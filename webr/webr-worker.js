"use strict";(()=>{var ki=Object.create;var ts=Object.defineProperty;var Ti=Object.getOwnPropertyDescriptor;var Ai=Object.getOwnPropertyNames;var Di=Object.getPrototypeOf,Pi=Object.prototype.hasOwnProperty;var Q=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(r,t)=>(typeof require<"u"?require:r)[t]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var H=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Mi=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of Ai(r))!Pi.call(e,s)&&s!==t&&ts(e,s,{get:()=>r[s],enumerable:!(n=Ti(r,s))||n.enumerable});return e};var rs=(e,r,t)=>(t=e!=null?ki(Di(e)):{},Mi(r||!e||!e.__esModule?ts(t,"default",{value:e,enumerable:!0}):t,e));var Ot=H(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.getUint64=ne.getInt64=ne.setInt64=ne.setUint64=ne.UINT32_MAX=void 0;ne.UINT32_MAX=4294967295;function Wi(e,r,t){let n=t/4294967296,s=t;e.setUint32(r,n),e.setUint32(r+4,s)}ne.setUint64=Wi;function Ci(e,r,t){let n=Math.floor(t/4294967296),s=t;e.setUint32(r,n),e.setUint32(r+4,s)}ne.setInt64=Ci;function Fi(e,r){let t=e.getInt32(r),n=e.getUint32(r+4);return t*4294967296+n}ne.getInt64=Fi;function Li(e,r){let t=e.getUint32(r),n=e.getUint32(r+4);return t*4294967296+n}ne.getUint64=Li});var lr=H(V=>{"use strict";var Zr,Jr,Xr;Object.defineProperty(V,"__esModule",{value:!0});V.utf8DecodeTD=V.TEXT_DECODER_THRESHOLD=V.utf8DecodeJs=V.utf8EncodeTE=V.TEXT_ENCODER_THRESHOLD=V.utf8EncodeJs=V.utf8Count=void 0;var fs=Ot(),or=(typeof process>"u"||((Zr=process==null?void 0:process.env)===null||Zr===void 0?void 0:Zr.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function Bi(e){let r=e.length,t=0,n=0;for(;n<r;){let s=e.charCodeAt(n++);if((s&4294967168)===0){t++;continue}else if((s&4294965248)===0)t+=2;else{if(s>=55296&&s<=56319&&n<r){let a=e.charCodeAt(n);(a&64512)===56320&&(++n,s=((s&1023)<<10)+(a&1023)+65536)}(s&4294901760)===0?t+=3:t+=4}}return t}V.utf8Count=Bi;function zi(e,r,t){let n=e.length,s=t,a=0;for(;a<n;){let i=e.charCodeAt(a++);if((i&4294967168)===0){r[s++]=i;continue}else if((i&4294965248)===0)r[s++]=i>>6&31|192;else{if(i>=55296&&i<=56319&&a<n){let o=e.charCodeAt(a);(o&64512)===56320&&(++a,i=((i&1023)<<10)+(o&1023)+65536)}(i&4294901760)===0?(r[s++]=i>>12&15|224,r[s++]=i>>6&63|128):(r[s++]=i>>18&7|240,r[s++]=i>>12&63|128,r[s++]=i>>6&63|128)}r[s++]=i&63|128}}V.utf8EncodeJs=zi;var It=or?new TextEncoder:void 0;V.TEXT_ENCODER_THRESHOLD=or?typeof process<"u"&&((Jr=process==null?void 0:process.env)===null||Jr===void 0?void 0:Jr.TEXT_ENCODING)!=="force"?200:0:fs.UINT32_MAX;function ji(e,r,t){r.set(It.encode(e),t)}function Hi(e,r,t){It.encodeInto(e,r.subarray(t))}V.utf8EncodeTE=It?.encodeInto?Hi:ji;var qi=4096;function $i(e,r,t){let n=r,s=n+t,a=[],i="";for(;n<s;){let o=e[n++];if((o&128)===0)a.push(o);else if((o&224)===192){let d=e[n++]&63;a.push((o&31)<<6|d)}else if((o&240)===224){let d=e[n++]&63,l=e[n++]&63;a.push((o&31)<<12|d<<6|l)}else if((o&248)===240){let d=e[n++]&63,l=e[n++]&63,u=e[n++]&63,_=(o&7)<<18|d<<12|l<<6|u;_>65535&&(_-=65536,a.push(_>>>10&1023|55296),_=56320|_&1023),a.push(_)}else a.push(o);a.length>=qi&&(i+=String.fromCharCode(...a),a.length=0)}return a.length>0&&(i+=String.fromCharCode(...a)),i}V.utf8DecodeJs=$i;var Vi=or?new TextDecoder:null;V.TEXT_DECODER_THRESHOLD=or?typeof process<"u"&&((Xr=process==null?void 0:process.env)===null||Xr===void 0?void 0:Xr.TEXT_DECODER)!=="force"?200:0:fs.UINT32_MAX;function Zi(e,r,t){let n=e.subarray(r,r+t);return Vi.decode(n)}V.utf8DecodeTD=Zi});var Kr=H(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});cr.ExtData=void 0;var Gr=class{constructor(r,t){this.type=r,this.data=t}};cr.ExtData=Gr});var dr=H(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.DecodeError=void 0;var Yr=class e extends Error{constructor(r){super(r);let t=Object.create(e.prototype);Object.setPrototypeOf(this,t),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:e.name})}};ur.DecodeError=Yr});var Qr=H(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.timestampExtension=q.decodeTimestampExtension=q.decodeTimestampToTimeSpec=q.encodeTimestampExtension=q.encodeDateToTimeSpec=q.encodeTimeSpecToTimestamp=q.EXT_TIMESTAMP=void 0;var Ji=dr(),hs=Ot();q.EXT_TIMESTAMP=-1;var Xi=4294967296-1,Gi=17179869184-1;function ps({sec:e,nsec:r}){if(e>=0&&r>=0&&e<=Gi)if(r===0&&e<=Xi){let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e),t}else{let t=e/4294967296,n=e&4294967295,s=new Uint8Array(8),a=new DataView(s.buffer);return a.setUint32(0,r<<2|t&3),a.setUint32(4,n),s}else{let t=new Uint8Array(12),n=new DataView(t.buffer);return n.setUint32(0,r),(0,hs.setInt64)(n,4,e),t}}q.encodeTimeSpecToTimestamp=ps;function gs(e){let r=e.getTime(),t=Math.floor(r/1e3),n=(r-t*1e3)*1e6,s=Math.floor(n/1e9);return{sec:t+s,nsec:n-s*1e9}}q.encodeDateToTimeSpec=gs;function ms(e){if(e instanceof Date){let r=gs(e);return ps(r)}else return null}q.encodeTimestampExtension=ms;function ys(e){let r=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:r.getUint32(0),nsec:0};case 8:{let t=r.getUint32(0),n=r.getUint32(4),s=(t&3)*4294967296+n,a=t>>>2;return{sec:s,nsec:a}}case 12:{let t=(0,hs.getInt64)(r,4),n=r.getUint32(0);return{sec:t,nsec:n}}default:throw new Ji.DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}q.decodeTimestampToTimeSpec=ys;function _s(e){let r=ys(e);return new Date(r.sec*1e3+r.nsec/1e6)}q.decodeTimestampExtension=_s;q.timestampExtension={type:q.EXT_TIMESTAMP,encode:ms,decode:_s}});var pr=H(hr=>{"use strict";Object.defineProperty(hr,"__esModule",{value:!0});hr.ExtensionCodec=void 0;var fr=Kr(),Ki=Qr(),Nt=class{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Ki.timestampExtension)}register({type:r,encode:t,decode:n}){if(r>=0)this.encoders[r]=t,this.decoders[r]=n;else{let s=1+r;this.builtInEncoders[s]=t,this.builtInDecoders[s]=n}}tryToEncode(r,t){for(let n=0;n<this.builtInEncoders.length;n++){let s=this.builtInEncoders[n];if(s!=null){let a=s(r,t);if(a!=null){let i=-1-n;return new fr.ExtData(i,a)}}}for(let n=0;n<this.encoders.length;n++){let s=this.encoders[n];if(s!=null){let a=s(r,t);if(a!=null){let i=n;return new fr.ExtData(i,a)}}}return r instanceof fr.ExtData?r:null}decode(r,t,n){let s=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return s?s(r,t,n):new fr.ExtData(t,r)}};hr.ExtensionCodec=Nt;Nt.defaultCodec=new Nt});var en=H(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.createDataView=ct.ensureUint8Array=void 0;function bs(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}ct.ensureUint8Array=bs;function Yi(e){if(e instanceof ArrayBuffer)return new DataView(e);let r=bs(e);return new DataView(r.buffer,r.byteOffset,r.byteLength)}ct.createDataView=Yi});var rn=H(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.Encoder=ue.DEFAULT_INITIAL_BUFFER_SIZE=ue.DEFAULT_MAX_DEPTH=void 0;var Ut=lr(),Qi=pr(),ws=Ot(),eo=en();ue.DEFAULT_MAX_DEPTH=100;ue.DEFAULT_INITIAL_BUFFER_SIZE=2048;var tn=class{constructor(r=Qi.ExtensionCodec.defaultCodec,t=void 0,n=ue.DEFAULT_MAX_DEPTH,s=ue.DEFAULT_INITIAL_BUFFER_SIZE,a=!1,i=!1,o=!1,d=!1){this.extensionCodec=r,this.context=t,this.maxDepth=n,this.initialBufferSize=s,this.sortKeys=a,this.forceFloat32=i,this.ignoreUndefined=o,this.forceIntegerToFloat=d,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}reinitializeState(){this.pos=0}encodeSharedRef(r){return this.reinitializeState(),this.doEncode(r,1),this.bytes.subarray(0,this.pos)}encode(r){return this.reinitializeState(),this.doEncode(r,1),this.bytes.slice(0,this.pos)}doEncode(r,t){if(t>this.maxDepth)throw new Error(`Too deep objects in depth ${t}`);r==null?this.encodeNil():typeof r=="boolean"?this.encodeBoolean(r):typeof r=="number"?this.encodeNumber(r):typeof r=="string"?this.encodeString(r):this.encodeObject(r,t)}ensureBufferSizeToWrite(r){let t=this.pos+r;this.view.byteLength<t&&this.resizeBuffer(t*2)}resizeBuffer(r){let t=new ArrayBuffer(r),n=new Uint8Array(t),s=new DataView(t);n.set(this.bytes),this.view=s,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(r){r===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(r){Number.isSafeInteger(r)&&!this.forceIntegerToFloat?r>=0?r<128?this.writeU8(r):r<256?(this.writeU8(204),this.writeU8(r)):r<65536?(this.writeU8(205),this.writeU16(r)):r<4294967296?(this.writeU8(206),this.writeU32(r)):(this.writeU8(207),this.writeU64(r)):r>=-32?this.writeU8(224|r+32):r>=-128?(this.writeU8(208),this.writeI8(r)):r>=-32768?(this.writeU8(209),this.writeI16(r)):r>=-2147483648?(this.writeU8(210),this.writeI32(r)):(this.writeU8(211),this.writeI64(r)):this.forceFloat32?(this.writeU8(202),this.writeF32(r)):(this.writeU8(203),this.writeF64(r))}writeStringHeader(r){if(r<32)this.writeU8(160+r);else if(r<256)this.writeU8(217),this.writeU8(r);else if(r<65536)this.writeU8(218),this.writeU16(r);else if(r<4294967296)this.writeU8(219),this.writeU32(r);else throw new Error(`Too long string: ${r} bytes in UTF-8`)}encodeString(r){if(r.length>Ut.TEXT_ENCODER_THRESHOLD){let s=(0,Ut.utf8Count)(r);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),(0,Ut.utf8EncodeTE)(r,this.bytes,this.pos),this.pos+=s}else{let s=(0,Ut.utf8Count)(r);this.ensureBufferSizeToWrite(5+s),this.writeStringHeader(s),(0,Ut.utf8EncodeJs)(r,this.bytes,this.pos),this.pos+=s}}encodeObject(r,t){let n=this.extensionCodec.tryToEncode(r,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(r))this.encodeArray(r,t);else if(ArrayBuffer.isView(r))this.encodeBinary(r);else if(typeof r=="object")this.encodeMap(r,t);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(r)}`)}encodeBinary(r){let t=r.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<4294967296)this.writeU8(198),this.writeU32(t);else throw new Error(`Too large binary: ${t}`);let n=(0,eo.ensureUint8Array)(r);this.writeU8a(n)}encodeArray(r,t){let n=r.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(let s of r)this.doEncode(s,t+1)}countWithoutUndefined(r,t){let n=0;for(let s of t)r[s]!==void 0&&n++;return n}encodeMap(r,t){let n=Object.keys(r);this.sortKeys&&n.sort();let s=this.ignoreUndefined?this.countWithoutUndefined(r,n):n.length;if(s<16)this.writeU8(128+s);else if(s<65536)this.writeU8(222),this.writeU16(s);else if(s<4294967296)this.writeU8(223),this.writeU32(s);else throw new Error(`Too large map object: ${s}`);for(let a of n){let i=r[a];this.ignoreUndefined&&i===void 0||(this.encodeString(a),this.doEncode(i,t+1))}}encodeExtension(r){let t=r.data.length;if(t===1)this.writeU8(212);else if(t===2)this.writeU8(213);else if(t===4)this.writeU8(214);else if(t===8)this.writeU8(215);else if(t===16)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<4294967296)this.writeU8(201),this.writeU32(t);else throw new Error(`Too large extension object: ${t}`);this.writeI8(r.type),this.writeU8a(r.data)}writeU8(r){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,r),this.pos++}writeU8a(r){let t=r.length;this.ensureBufferSizeToWrite(t),this.bytes.set(r,this.pos),this.pos+=t}writeI8(r){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,r),this.pos++}writeU16(r){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,r),this.pos+=2}writeI16(r){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,r),this.pos+=2}writeU32(r){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,r),this.pos+=4}writeI32(r){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,r),this.pos+=4}writeF32(r){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,r),this.pos+=4}writeF64(r){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,r),this.pos+=8}writeU64(r){this.ensureBufferSizeToWrite(8),(0,ws.setUint64)(this.view,this.pos,r),this.pos+=8}writeI64(r){this.ensureBufferSizeToWrite(8),(0,ws.setInt64)(this.view,this.pos,r),this.pos+=8}};ue.Encoder=tn});var Rs=H(gr=>{"use strict";Object.defineProperty(gr,"__esModule",{value:!0});gr.encode=void 0;var to=rn(),ro={};function no(e,r=ro){return new to.Encoder(r.extensionCodec,r.context,r.maxDepth,r.initialBufferSize,r.sortKeys,r.forceFloat32,r.ignoreUndefined,r.forceIntegerToFloat).encodeSharedRef(e)}gr.encode=no});var xs=H(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.prettyByte=void 0;function so(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}mr.prettyByte=so});var Es=H(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.CachedKeyDecoder=void 0;var ao=lr(),io=16,oo=16,nn=class{constructor(r=io,t=oo){this.maxKeyLength=r,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(r){return r>0&&r<=this.maxKeyLength}find(r,t,n){let s=this.caches[n-1];e:for(let a of s){let i=a.bytes;for(let o=0;o<n;o++)if(i[o]!==r[t+o])continue e;return a.str}return null}store(r,t){let n=this.caches[r.length-1],s={bytes:r,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=s:n.push(s)}decode(r,t,n){let s=this.find(r,t,n);if(s!=null)return this.hit++,s;this.miss++;let a=(0,ao.utf8DecodeJs)(r,t,n),i=Uint8Array.prototype.slice.call(r,t,t+n);return this.store(i,a),a}};yr.CachedKeyDecoder=nn});var _r=H(we=>{"use strict";Object.defineProperty(we,"__esModule",{value:!0});we.Decoder=we.DataViewIndexOutOfBoundsError=void 0;var sn=xs(),lo=pr(),Xe=Ot(),an=lr(),on=en(),co=Es(),be=dr(),uo=e=>{let r=typeof e;return r==="string"||r==="number"},Wt=-1,cn=new DataView(new ArrayBuffer(0)),fo=new Uint8Array(cn.buffer);we.DataViewIndexOutOfBoundsError=(()=>{try{cn.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")})();var vs=new we.DataViewIndexOutOfBoundsError("Insufficient data"),ho=new co.CachedKeyDecoder,ln=class{constructor(r=lo.ExtensionCodec.defaultCodec,t=void 0,n=Xe.UINT32_MAX,s=Xe.UINT32_MAX,a=Xe.UINT32_MAX,i=Xe.UINT32_MAX,o=Xe.UINT32_MAX,d=ho){this.extensionCodec=r,this.context=t,this.maxStrLength=n,this.maxBinLength=s,this.maxArrayLength=a,this.maxMapLength=i,this.maxExtLength=o,this.keyDecoder=d,this.totalPos=0,this.pos=0,this.view=cn,this.bytes=fo,this.headByte=Wt,this.stack=[]}reinitializeState(){this.totalPos=0,this.headByte=Wt,this.stack.length=0}setBuffer(r){this.bytes=(0,on.ensureUint8Array)(r),this.view=(0,on.createDataView)(this.bytes),this.pos=0}appendBuffer(r){if(this.headByte===Wt&&!this.hasRemaining(1))this.setBuffer(r);else{let t=this.bytes.subarray(this.pos),n=(0,on.ensureUint8Array)(r),s=new Uint8Array(t.length+n.length);s.set(t),s.set(n,t.length),this.setBuffer(s)}}hasRemaining(r){return this.view.byteLength-this.pos>=r}createExtraByteError(r){let{view:t,pos:n}=this;return new RangeError(`Extra ${t.byteLength-n} of ${t.byteLength} byte(s) found at buffer[${r}]`)}decode(r){this.reinitializeState(),this.setBuffer(r);let t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t}*decodeMulti(r){for(this.reinitializeState(),this.setBuffer(r);this.hasRemaining(1);)yield this.doDecodeSync()}async decodeAsync(r){let t=!1,n;for await(let o of r){if(t)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o);try{n=this.doDecodeSync(),t=!0}catch(d){if(!(d instanceof we.DataViewIndexOutOfBoundsError))throw d}this.totalPos+=this.pos}if(t){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}let{headByte:s,pos:a,totalPos:i}=this;throw new RangeError(`Insufficient data in parsing ${(0,sn.prettyByte)(s)} at ${i} (${a} in the current buffer)`)}decodeArrayStream(r){return this.decodeMultiAsync(r,!0)}decodeStream(r){return this.decodeMultiAsync(r,!1)}async*decodeMultiAsync(r,t){let n=t,s=-1;for await(let a of r){if(t&&s===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(a),n&&(s=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--s!==0;);}catch(i){if(!(i instanceof we.DataViewIndexOutOfBoundsError))throw i}this.totalPos+=this.pos}}doDecodeSync(){e:for(;;){let r=this.readHeadByte(),t;if(r>=224)t=r-256;else if(r<192)if(r<128)t=r;else if(r<144){let s=r-128;if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(r<160){let s=r-144;if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else{let s=r-160;t=this.decodeUtf8String(s,0)}else if(r===192)t=null;else if(r===194)t=!1;else if(r===195)t=!0;else if(r===202)t=this.readF32();else if(r===203)t=this.readF64();else if(r===204)t=this.readU8();else if(r===205)t=this.readU16();else if(r===206)t=this.readU32();else if(r===207)t=this.readU64();else if(r===208)t=this.readI8();else if(r===209)t=this.readI16();else if(r===210)t=this.readI32();else if(r===211)t=this.readI64();else if(r===217){let s=this.lookU8();t=this.decodeUtf8String(s,1)}else if(r===218){let s=this.lookU16();t=this.decodeUtf8String(s,2)}else if(r===219){let s=this.lookU32();t=this.decodeUtf8String(s,4)}else if(r===220){let s=this.readU16();if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else if(r===221){let s=this.readU32();if(s!==0){this.pushArrayState(s),this.complete();continue e}else t=[]}else if(r===222){let s=this.readU16();if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(r===223){let s=this.readU32();if(s!==0){this.pushMapState(s),this.complete();continue e}else t={}}else if(r===196){let s=this.lookU8();t=this.decodeBinary(s,1)}else if(r===197){let s=this.lookU16();t=this.decodeBinary(s,2)}else if(r===198){let s=this.lookU32();t=this.decodeBinary(s,4)}else if(r===212)t=this.decodeExtension(1,0);else if(r===213)t=this.decodeExtension(2,0);else if(r===214)t=this.decodeExtension(4,0);else if(r===215)t=this.decodeExtension(8,0);else if(r===216)t=this.decodeExtension(16,0);else if(r===199){let s=this.lookU8();t=this.decodeExtension(s,1)}else if(r===200){let s=this.lookU16();t=this.decodeExtension(s,2)}else if(r===201){let s=this.lookU32();t=this.decodeExtension(s,4)}else throw new be.DecodeError(`Unrecognized type byte: ${(0,sn.prettyByte)(r)}`);this.complete();let n=this.stack;for(;n.length>0;){let s=n[n.length-1];if(s.type===0)if(s.array[s.position]=t,s.position++,s.position===s.size)n.pop(),t=s.array;else continue e;else if(s.type===1){if(!uo(t))throw new be.DecodeError("The type of key must be string or number but "+typeof t);if(t==="__proto__")throw new be.DecodeError("The key __proto__ is not allowed");s.key=t,s.type=2;continue e}else if(s.map[s.key]=t,s.readCount++,s.readCount===s.size)n.pop(),t=s.map;else{s.key=null,s.type=1;continue e}}return t}}readHeadByte(){return this.headByte===Wt&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Wt}readArraySize(){let r=this.readHeadByte();switch(r){case 220:return this.readU16();case 221:return this.readU32();default:{if(r<160)return r-144;throw new be.DecodeError(`Unrecognized array type byte: ${(0,sn.prettyByte)(r)}`)}}}pushMapState(r){if(r>this.maxMapLength)throw new be.DecodeError(`Max length exceeded: map length (${r}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:r,key:null,readCount:0,map:{}})}pushArrayState(r){if(r>this.maxArrayLength)throw new be.DecodeError(`Max length exceeded: array length (${r}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:r,array:new Array(r),position:0})}decodeUtf8String(r,t){var n;if(r>this.maxStrLength)throw new be.DecodeError(`Max length exceeded: UTF-8 byte length (${r}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+t+r)throw vs;let s=this.pos+t,a;return this.stateIsMapKey()&&(!((n=this.keyDecoder)===null||n===void 0)&&n.canBeCached(r))?a=this.keyDecoder.decode(this.bytes,s,r):r>an.TEXT_DECODER_THRESHOLD?a=(0,an.utf8DecodeTD)(this.bytes,s,r):a=(0,an.utf8DecodeJs)(this.bytes,s,r),this.pos+=t+r,a}stateIsMapKey(){return this.stack.length>0?this.stack[this.stack.length-1].type===1:!1}decodeBinary(r,t){if(r>this.maxBinLength)throw new be.DecodeError(`Max length exceeded: bin length (${r}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(r+t))throw vs;let n=this.pos+t,s=this.bytes.subarray(n,n+r);return this.pos+=t+r,s}decodeExtension(r,t){if(r>this.maxExtLength)throw new be.DecodeError(`Max length exceeded: ext length (${r}) > maxExtLength (${this.maxExtLength})`);let n=this.view.getInt8(this.pos+t),s=this.decodeBinary(r,t+1);return this.extensionCodec.decode(s,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let r=this.view.getUint8(this.pos);return this.pos++,r}readI8(){let r=this.view.getInt8(this.pos);return this.pos++,r}readU16(){let r=this.view.getUint16(this.pos);return this.pos+=2,r}readI16(){let r=this.view.getInt16(this.pos);return this.pos+=2,r}readU32(){let r=this.view.getUint32(this.pos);return this.pos+=4,r}readI32(){let r=this.view.getInt32(this.pos);return this.pos+=4,r}readU64(){let r=(0,Xe.getUint64)(this.view,this.pos);return this.pos+=8,r}readI64(){let r=(0,Xe.getInt64)(this.view,this.pos);return this.pos+=8,r}readF32(){let r=this.view.getFloat32(this.pos);return this.pos+=4,r}readF64(){let r=this.view.getFloat64(this.pos);return this.pos+=8,r}};we.Decoder=ln});var un=H(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.decodeMulti=de.decode=de.defaultDecodeOptions=void 0;var Ss=_r();de.defaultDecodeOptions={};function po(e,r=de.defaultDecodeOptions){return new Ss.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decode(e)}de.decode=po;function go(e,r=de.defaultDecodeOptions){return new Ss.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeMulti(e)}de.decodeMulti=go});var As=H(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.ensureAsyncIterable=Ae.asyncIterableFromStream=Ae.isAsyncIterable=void 0;function ks(e){return e[Symbol.asyncIterator]!=null}Ae.isAsyncIterable=ks;function mo(e){if(e==null)throw new Error("Assertion Failure: value must not be null nor undefined")}async function*Ts(e){let r=e.getReader();try{for(;;){let{done:t,value:n}=await r.read();if(t)return;mo(n),yield n}}finally{r.releaseLock()}}Ae.asyncIterableFromStream=Ts;function yo(e){return ks(e)?e:Ts(e)}Ae.ensureAsyncIterable=yo});var Ps=H(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.decodeStream=fe.decodeMultiStream=fe.decodeArrayStream=fe.decodeAsync=void 0;var dn=_r(),fn=As(),br=un();async function _o(e,r=br.defaultDecodeOptions){let t=(0,fn.ensureAsyncIterable)(e);return new dn.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeAsync(t)}fe.decodeAsync=_o;function bo(e,r=br.defaultDecodeOptions){let t=(0,fn.ensureAsyncIterable)(e);return new dn.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeArrayStream(t)}fe.decodeArrayStream=bo;function Ds(e,r=br.defaultDecodeOptions){let t=(0,fn.ensureAsyncIterable)(e);return new dn.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeStream(t)}fe.decodeMultiStream=Ds;function wo(e,r=br.defaultDecodeOptions){return Ds(e,r)}fe.decodeStream=wo});var Is=H(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.decodeTimestampExtension=k.encodeTimestampExtension=k.decodeTimestampToTimeSpec=k.encodeTimeSpecToTimestamp=k.encodeDateToTimeSpec=k.EXT_TIMESTAMP=k.ExtData=k.ExtensionCodec=k.Encoder=k.DataViewIndexOutOfBoundsError=k.DecodeError=k.Decoder=k.decodeStream=k.decodeMultiStream=k.decodeArrayStream=k.decodeAsync=k.decodeMulti=k.decode=k.encode=void 0;var Ro=Rs();Object.defineProperty(k,"encode",{enumerable:!0,get:function(){return Ro.encode}});var Ms=un();Object.defineProperty(k,"decode",{enumerable:!0,get:function(){return Ms.decode}});Object.defineProperty(k,"decodeMulti",{enumerable:!0,get:function(){return Ms.decodeMulti}});var wr=Ps();Object.defineProperty(k,"decodeAsync",{enumerable:!0,get:function(){return wr.decodeAsync}});Object.defineProperty(k,"decodeArrayStream",{enumerable:!0,get:function(){return wr.decodeArrayStream}});Object.defineProperty(k,"decodeMultiStream",{enumerable:!0,get:function(){return wr.decodeMultiStream}});Object.defineProperty(k,"decodeStream",{enumerable:!0,get:function(){return wr.decodeStream}});var Os=_r();Object.defineProperty(k,"Decoder",{enumerable:!0,get:function(){return Os.Decoder}});Object.defineProperty(k,"DataViewIndexOutOfBoundsError",{enumerable:!0,get:function(){return Os.DataViewIndexOutOfBoundsError}});var xo=dr();Object.defineProperty(k,"DecodeError",{enumerable:!0,get:function(){return xo.DecodeError}});var Eo=rn();Object.defineProperty(k,"Encoder",{enumerable:!0,get:function(){return Eo.Encoder}});var vo=pr();Object.defineProperty(k,"ExtensionCodec",{enumerable:!0,get:function(){return vo.ExtensionCodec}});var So=Kr();Object.defineProperty(k,"ExtData",{enumerable:!0,get:function(){return So.ExtData}});var ut=Qr();Object.defineProperty(k,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return ut.EXT_TIMESTAMP}});Object.defineProperty(k,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return ut.encodeDateToTimeSpec}});Object.defineProperty(k,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return ut.encodeTimeSpecToTimestamp}});Object.defineProperty(k,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return ut.decodeTimestampToTimeSpec}});Object.defineProperty(k,"encodeTimestampExtension",{enumerable:!0,get:function(){return ut.encodeTimestampExtension}});Object.defineProperty(k,"decodeTimestampExtension",{enumerable:!0,get:function(){return ut.decodeTimestampExtension}})});var _i=H((mh,yi)=>{var xt=Q("fs"),mi=Q("url"),bu=Q("child_process").spawn;yi.exports=Qn;Qn.XMLHttpRequest=Qn;function Qn(e){"use strict";e=e||{};var r=this,t=Q("http"),n=Q("https"),s,a,i={},o=!1,d={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},l=Object.assign({},d),u=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],_=["TRACE","TRACK","CONNECT"],g=!1,f=!1,m=!1,x={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),this.status=null,this.statusText=null;var b=function(p){return o||p&&u.indexOf(p.toLowerCase())===-1},w=function(p){return p&&_.indexOf(p)===-1};this.open=function(p,h,S,I,y){if(this.abort(),f=!1,m=!1,!w(p))throw new Error("SecurityError: Request method not allowed");i={method:p,url:h.toString(),async:typeof S!="boolean"?!0:S,user:I||null,password:y||null},v(this.OPENED)},this.setDisableHeaderCheck=function(p){o=p},this.setRequestHeader=function(p,h){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!b(p))return console.warn('Refused to set unsafe header "'+p+'"'),!1;if(g)throw new Error("INVALID_STATE_ERR: send flag is true");return l[p]=h,!0},this.getResponseHeader=function(p){return typeof p=="string"&&this.readyState>this.OPENED&&a.headers[p.toLowerCase()]&&!f?a.headers[p.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||f)return"";var p="";for(var h in a.headers)h!=="set-cookie"&&h!=="set-cookie2"&&(p+=h+": "+a.headers[h]+`\r
`);return p.substr(0,p.length-2)},this.getRequestHeader=function(p){return typeof p=="string"&&l[p]?l[p]:""},this.send=function(p){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(g)throw new Error("INVALID_STATE_ERR: send has already been called");var h=!1,S=!1,I=mi.parse(i.url),y;switch(I.protocol){case"https:":h=!0;case"http:":y=I.hostname;break;case"file:":S=!0;break;case void 0:case"":y="localhost";break;default:throw new Error("Protocol not supported.")}if(S){if(i.method!=="GET")throw new Error("XMLHttpRequest: Only GET method is supported");if(i.async)xt.readFile(unescape(I.pathname),function(Y,We){Y?r.handleError(Y,Y.errno||-1):(r.status=200,r.responseText=We.toString("utf8"),r.response=We,v(r.DONE))});else try{this.response=xt.readFileSync(unescape(I.pathname)),this.responseText=this.response.toString("utf8"),this.status=200,v(r.DONE)}catch(Y){this.handleError(Y,Y.errno||-1)}return}var M=I.port||(h?443:80),A=I.pathname+(I.search?I.search:"");if(l.Host=y,h&&M===443||M===80||(l.Host+=":"+I.port),i.user){typeof i.password>"u"&&(i.password="");var E=new Buffer(i.user+":"+i.password);l.Authorization="Basic "+E.toString("base64")}i.method==="GET"||i.method==="HEAD"?p=null:p?(l["Content-Length"]=Buffer.isBuffer(p)?p.length:Buffer.byteLength(p),l["Content-Type"]||(l["Content-Type"]="text/plain;charset=UTF-8")):i.method==="POST"&&(l["Content-Length"]=0);var T=e.agent||!1,j={host:y,port:M,path:A,method:i.method,headers:l,agent:T};if(h&&(j.pfx=e.pfx,j.key=e.key,j.passphrase=e.passphrase,j.cert=e.cert,j.ca=e.ca,j.ciphers=e.ciphers,j.rejectUnauthorized=e.rejectUnauthorized!==!1),f=!1,i.async){var vt=h?n.request:t.request;g=!0,r.dispatchEvent("readystatechange");var Ne=function(Y){if(a=Y,a.statusCode===302||a.statusCode===303||a.statusCode===307){i.url=a.headers.location;var We=mi.parse(i.url);y=We.hostname;var ve={hostname:We.hostname,port:We.port,path:We.path,method:a.statusCode===303?"GET":i.method,headers:l};h&&(ve.pfx=e.pfx,ve.key=e.key,ve.passphrase=e.passphrase,ve.cert=e.cert,ve.ca=e.ca,ve.ciphers=e.ciphers,ve.rejectUnauthorized=e.rejectUnauthorized!==!1),s=vt(ve,Ne).on("error",Ue),s.end();return}v(r.HEADERS_RECEIVED),r.status=a.statusCode,a.on("data",function(sr){if(sr){var Si=Buffer.from(sr);r.response=Buffer.concat([r.response,Si])}g&&v(r.LOADING)}),a.on("end",function(){g&&(g=!1,v(r.DONE),r.responseText=r.response.toString("utf8"))}),a.on("error",function(sr){r.handleError(sr)})},Ue=function(Y){r.handleError(Y)};s=vt(j,Ne).on("error",Ue),e.autoUnref&&s.on("socket",Y=>{Y.unref()}),p&&s.write(p),s.end(),r.dispatchEvent("loadstart")}else{var St=".node-xmlhttprequest-content-"+process.pid,kt=".node-xmlhttprequest-sync-"+process.pid;xt.writeFileSync(kt,"","utf8");for(var xi="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(h?"s":"")+".request;var options = "+JSON.stringify(j)+";var responseText = '';var responseData = Buffer.alloc(0);var req = doRequest(options, function(response) {response.on('data', function(chunk) {  var data = Buffer.from(chunk);  responseText += data.toString('utf8');  responseData = Buffer.concat([responseData, data]);});response.on('end', function() {fs.writeFileSync('"+St+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText, data: responseData.toString('base64')}}), 'utf8');fs.unlinkSync('"+kt+"');});response.on('error', function(error) {fs.writeFileSync('"+St+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+kt+"');});}).on('error', function(error) {fs.writeFileSync('"+St+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+kt+"');});"+(p?"req.write('"+JSON.stringify(p).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",Ei=bu(process.argv[0],["-e",xi]),Su;xt.existsSync(kt););if(r.responseText=xt.readFileSync(St,"utf8"),Ei.stdin.end(),xt.unlinkSync(St),r.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var vi=JSON.parse(r.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,""));r.handleError(vi,503)}else{r.status=r.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1");var zr=JSON.parse(r.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"));a={statusCode:r.status,headers:zr.data.headers},r.responseText=zr.data.text,r.response=Buffer.from(zr.data.data,"base64"),v(r.DONE,!0)}}},this.handleError=function(p,h){this.status=h||0,this.statusText=p,this.responseText=p.stack,f=!0,v(this.DONE)},this.abort=function(){s&&(s.abort(),s=null),l=Object.assign({},d),this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),f=m=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||g)&&this.readyState!==this.DONE&&(g=!1,v(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(p,h){p in x||(x[p]=[]),x[p].push(h)},this.removeEventListener=function(p,h){p in x&&(x[p]=x[p].filter(function(S){return S!==h}))},this.dispatchEvent=function(p){if(typeof r["on"+p]=="function"&&(this.readyState===this.DONE&&i.async?setTimeout(function(){r["on"+p]()},0):r["on"+p]()),p in x)for(let h=0,S=x[p].length;h<S;h++)this.readyState===this.DONE?setTimeout(function(){x[p][h].call(r)},0):x[p][h].call(r)};var v=function(p){if(!(r.readyState===p||r.readyState===r.UNSENT&&m)&&(r.readyState=p,(i.async||r.readyState<r.OPENED||r.readyState===r.DONE)&&r.dispatchEvent("readystatechange"),r.readyState===r.DONE)){let h;m?h="abort":f?h="error":h="load",r.dispatchEvent(h),r.dispatchEvent("loadend")}}}});var Ce=class extends Error{constructor(r){super(r),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};var Se=class extends Ce{};var L=typeof process<"u"&&process.release&&process.release.name==="node",Tt;if(globalThis.document)Tt=e=>new Promise((r,t)=>{let n=document.createElement("script");n.src=e,n.onload=()=>r(),n.onerror=t,document.head.appendChild(n)});else if(globalThis.importScripts)Tt=async e=>{try{globalThis.importScripts(e)}catch(r){if(r instanceof TypeError)await import(e);else throw r}};else if(L)Tt=async e=>{await import((await import("path")).default.resolve(e))};else throw new Ce("Cannot determine runtime environment");var ie={null:0,symbol:1,pairlist:2,closure:3,environment:4,promise:5,call:6,special:7,builtin:8,string:9,logical:10,integer:13,double:14,complex:15,character:16,dots:17,any:18,list:19,expression:20,bytecode:21,pointer:22,weakref:23,raw:24,s4:25,new:30,free:31,function:99};function At(e){return!!e&&typeof e=="object"&&Object.keys(ie).includes(e.type)}function Fe(e){return!!e&&typeof e=="object"&&"re"in e&&"im"in e}var c={};function ns(e){Object.keys(e).forEach(r=>c._free(e[r]))}function Le(e){return c._Rf_protect(ee(e)),e}function D(e,r){return c._Rf_protect(ee(e)),++r.n,e}function ss(e){let r=c._malloc(4);return c._R_ProtectWithIndex(ee(e),r),{loc:c.getValue(r,"i32"),ptr:r}}function as(e){c._Rf_unprotect(1),c._free(e.ptr)}function is(e,r){return c._R_Reprotect(ee(e),r.loc),e}function U(e){c._Rf_unprotect(e)}function jr(e,r,t){c._Rf_defineVar(ee(r),ee(t),ee(e))}function ye(e,r){let t={},n={n:0};try{let s=new te(r);D(s,n),t.code=c.allocateUTF8(e);let a=c._R_ParseEvalString(t.code,s.ptr);return R.wrap(a)}finally{ns(t),U(n.n)}}var nt=class extends Error{constructor(r,t){super(r),this.name="UnwindProtectException",this.cont=t}};function Be(e,r){return c.getWasmTableEntry(c.GOT.ffi_safe_eval.value)(ee(e),ee(r))}var Oi=new WeakMap;function os(e,r){return Oi.set(e,r),e}function Hr(e){return typeof e=="string"&&e.length===Dt}var Dt=63;function _e(){let e=Array.from({length:4},Ii).join("-");if(e.length!==Dt)throw new Error("comlink internal error: UUID has the wrong length");return e}function Ii(){let e=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16),r=15-e.length;return r>0&&(e=Array.from({length:r},()=>0).join("")+e),e}function ee(e){return $e(e)?e.ptr:e}function Ve(e,r){if(c._TYPEOF(e.ptr)!==ie[r])throw new Error(`Unexpected object type "${e.type()}" when expecting type "${r}"`)}var ke=new Map;function Ze(e,r){let t=ee(r);if(c._R_PreserveObject(t),e!==void 0){if(Hr(e)){ke.get(e).push(t);return}throw new Error("Unexpected shelter type "+typeof e)}}function qr(e,r){let t=ee(r);c._R_ReleaseObject(t);let n=ke.get(e),s=n.indexOf(t);if(s<0)throw new Error("Can't find object in shelter.");n.splice(s,1)}function $r(e){let r=ke.get(e);for(let t of r)try{c._R_ReleaseObject(t)}catch(n){console.error(n)}ke.set(e,[])}function ls(e){if(At(e))return new(Mt(e.type))(e);if(typeof e>"u")return new at;if(e&&typeof e=="object"&&"type"in e&&e.type==="null")return new at;if(e===null)return new re({type:"logical",names:null,values:[null]});if(typeof e=="boolean")return new re(e);if(typeof e=="number")return new qe(e);if(typeof e=="string")return new oe(e);if(Fe(e))return new it(e);if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)return new ot(e);if(Array.isArray(e))return Ni(e);if(typeof e=="object")return je.fromObject(e);throw new Error("R object construction for this JS object is not yet supported.")}function Ni(e){let r={n:0};if(e.every(n=>n&&typeof n=="object"&&!$e(n)&&!Fe(n))){let n=e,s=n.every(i=>Object.keys(i).filter(o=>!Object.keys(n[0]).includes(o)).length===0&&Object.keys(n[0]).filter(o=>!Object.keys(i).includes(o)).length===0),a=n.every(i=>Object.values(i).every(o=>us(o)||cs(o)));if(s&&a)return je.fromD3(n)}if(e.every(n=>typeof n=="boolean"||n===null))return new re(e);if(e.every(n=>typeof n=="number"||n===null))return new qe(e);if(e.every(n=>typeof n=="string"||n===null))return new oe(e);try{let n=new le([new B("c"),...e]);return D(n,r),n.eval()}finally{U(r.n)}}var F=class{constructor(r){this.ptr=r}type(){let r=c._TYPEOF(this.ptr);return Object.keys(ie).find(n=>ie[n]===r)}},R=class e extends F{constructor(r){if(!(r instanceof F))return ls(r);super(r.ptr)}static wrap(r){let t=c._TYPEOF(r),n=Object.keys(ie)[Object.values(ie).indexOf(t)];return new(Mt(n))(new F(r))}get[Symbol.toStringTag](){return`RObject:${this.type()}`}static getPersistentObject(r){return W[r]}getPropertyValue(r){return this[r]}inspect(){ye(".Internal(inspect(x))",{x:this})}isNull(){return c._TYPEOF(this.ptr)===ie.null}isNa(){try{let r=ye("is.na(x)",{x:this});return Le(r),r.toBoolean()}finally{U(1)}}isUnbound(){return this.ptr===W.unboundValue.ptr}attrs(){return ze.wrap(c._ATTRIB(this.ptr))}class(){let r={n:0},t=new le([new B("class"),this]);D(t,r);try{return t.eval()}finally{U(r.n)}}setNames(r){let t;if(r===null)t=W.null;else if(Array.isArray(r)&&r.every(n=>typeof n=="string"||n===null))t=new oe(r);else throw new Error("Argument to setNames must be null or an Array of strings or null");return c._Rf_setAttrib(this.ptr,W.namesSymbol.ptr,t.ptr),this}names(){let r=oe.wrap(c._Rf_getAttrib(this.ptr,W.namesSymbol.ptr));return r.isNull()?null:r.toArray()}includes(r){let t=this.names();return t&&t.includes(r)}toJs(r={depth:0},t=1){throw new Error("This R object cannot be converted to JS")}subset(r){return this.#e(r,W.bracketSymbol.ptr)}get(r){return this.#e(r,W.bracket2Symbol.ptr)}getDollar(r){return this.#e(r,W.dollarSymbol.ptr)}#e(r,t){let n={n:0};try{let s=new e(r);D(s,n);let a=c._Rf_lang3(t,this.ptr,s.ptr);return D(a,n),e.wrap(Be(a,W.baseEnv))}finally{U(n.n)}}pluck(...r){let t=ss(W.null);try{let n=(a,i)=>{let o=a.get(i);return is(o,t)},s=r.reduce(n,this);return s.isNull()?void 0:s}finally{as(t)}}set(r,t){let n={n:0};try{let s=new e(r);D(s,n);let a=new e(t);D(a,n);let i=new B("[[<-"),o=c._Rf_lang4(i.ptr,this.ptr,s.ptr,a.ptr);return D(o,n),e.wrap(Be(o,W.baseEnv))}finally{U(n.n)}}static getMethods(r){let t=new Set,n=r;do Object.getOwnPropertyNames(n).map(s=>t.add(s));while(n=Object.getPrototypeOf(n));return[...t.keys()].filter(s=>typeof r[s]=="function")}},at=class extends R{constructor(){return super(new F(c.getValue(c._R_NilValue,"*"))),this}toJs(){return{type:"null"}}},B=class extends R{constructor(r){if(r instanceof F){Ve(r,"symbol"),super(r);return}let t=c.allocateUTF8(r);try{super(new F(c._Rf_install(t)))}finally{c._free(t)}}toJs(){let r=this.toObject();return{type:"symbol",printname:r.printname,symvalue:r.symvalue,internal:r.internal}}toObject(){return{printname:this.printname().isUnbound()?null:this.printname().toString(),symvalue:this.symvalue().isUnbound()?null:this.symvalue().ptr,internal:this.internal().isNull()?null:this.internal().ptr}}toString(){return this.printname().toString()}printname(){return He.wrap(c._PRINTNAME(this.ptr))}symvalue(){return R.wrap(c._SYMVALUE(this.ptr))}internal(){return R.wrap(c._INTERNAL(this.ptr))}},ze=class e extends R{constructor(r){if(r instanceof F)return Ve(r,"pairlist"),super(r),this;let t={n:0};try{let{names:n,values:s}=lt(r),a=e.wrap(c._Rf_allocList(s.length));D(a,t);for(let[i,o]=[0,a];!o.isNull();[i,o]=[i+1,o.cdr()])o.setcar(new R(s[i]));a.setNames(n),super(a)}finally{U(t.n)}}get length(){return this.toArray().length}toArray(r={depth:1}){return this.toJs(r).values}toObject({allowDuplicateKey:r=!0,allowEmptyKey:t=!1,depth:n=-1}={}){let s=this.entries({depth:n}),a=s.map(([i])=>i);if(!r&&new Set(a).size!==a.length)throw new Error("Duplicate key when converting pairlist without allowDuplicateKey enabled");if(!t&&a.some(i=>!i))throw new Error("Empty or null key when converting pairlist without allowEmptyKey enabled");return Object.fromEntries(s.filter((i,o)=>s.findIndex(d=>d[0]===i[0])===o))}entries(r={depth:1}){let t=this.toJs(r);return t.values.map((n,s)=>[t.names?t.names[s]:null,n])}toJs(r={depth:0},t=1){let n=[],s=!1,a=[];for(let o=this;!o.isNull();o=o.cdr()){let d=o.tag();d.isNull()?n.push(""):(s=!0,n.push(d.toString())),r.depth&&t>=r.depth?a.push(o.car()):a.push(o.car().toJs(r,t+1))}return{type:"pairlist",names:s?n:null,values:a}}includes(r){return r in this.toObject()}setcar(r){c._SETCAR(this.ptr,r.ptr)}car(){return R.wrap(c._CAR(this.ptr))}cdr(){return R.wrap(c._CDR(this.ptr))}tag(){return R.wrap(c._TAG(this.ptr))}},le=class e extends R{constructor(r){if(r instanceof F)return Ve(r,"call"),super(r),this;let t={n:0};try{let{values:n}=lt(r),s=n.map(i=>D(new R(i),t)),a=e.wrap(c._Rf_allocVector(ie.call,n.length));D(a,t);for(let[i,o]=[0,a];!o.isNull();[i,o]=[i+1,o.cdr()])o.setcar(s[i]);super(a)}finally{U(t.n)}}setcar(r){c._SETCAR(this.ptr,r.ptr)}car(){return R.wrap(c._CAR(this.ptr))}cdr(){return R.wrap(c._CDR(this.ptr))}eval(){return c.webr.evalR(this,{env:W.baseEnv})}capture(r={}){return c.webr.captureR(this,r)}deparse(){let r={n:0};try{let t=c._Rf_lang2(new B("deparse1").ptr,c._Rf_lang2(new B("quote").ptr,this.ptr));D(t,r);let n=oe.wrap(Be(t,W.baseEnv));return D(n,r),n.toString()}finally{U(r.n)}}},ce=class e extends R{constructor(r,t=null){if(r instanceof F){if(Ve(r,"list"),super(r),t){if(t.length!==this.length)throw new Error("Can't construct named `RList`. Supplied `names` must be the same length as the list.");this.setNames(t)}return this}let n={n:0};try{let s=lt(r),a=c._Rf_allocVector(ie.list,s.values.length);D(a,n),s.values.forEach((o,d)=>{ds(o)?c._SET_VECTOR_ELT(a,d,new e(o).ptr):c._SET_VECTOR_ELT(a,d,new R(o).ptr)});let i=t||s.names;if(i&&i.length!==s.values.length)throw new Error("Can't construct named `RList`. Supplied `names` must be the same length as the list.");R.wrap(a).setNames(i),super(new F(a))}finally{U(n.n)}}get length(){return c._LENGTH(this.ptr)}isDataFrame(){let r=ze.wrap(c._ATTRIB(this.ptr)).get("class");return!r.isNull()&&r.toArray().includes("data.frame")}toArray(r={depth:1}){return this.toJs(r).values}toObject({allowDuplicateKey:r=!0,allowEmptyKey:t=!1,depth:n=-1}={}){let s=this.entries({depth:n}),a=s.map(([i])=>i);if(!r&&new Set(a).size!==a.length)throw new Error("Duplicate key when converting list without allowDuplicateKey enabled");if(!t&&a.some(i=>!i))throw new Error("Empty or null key when converting list without allowEmptyKey enabled");return Object.fromEntries(s.filter((i,o)=>s.findIndex(d=>d[0]===i[0])===o))}toD3(){if(!this.isDataFrame())throw new Error("Can't convert R list object to D3 format. Object must be of class 'data.frame'.");return this.entries().reduce((t,n)=>(n[1].forEach((s,a)=>t[a]=Object.assign(t[a]||{},{[n[0]]:s})),t),[])}entries(r={depth:-1}){let t=this.toJs(r);return this.isDataFrame()&&r.depth<0&&(t.values=t.values.map(n=>n.toArray())),t.values.map((n,s)=>[t.names?t.names[s]:null,n])}toJs(r={depth:0},t=1){return{type:"list",names:this.names(),values:[...Array(this.length).keys()].map(n=>r.depth&&t>=r.depth?this.get(n+1):this.get(n+1).toJs(r,t+1))}}},je=class e extends ce{constructor(r){if(r instanceof F){if(super(r),!this.isDataFrame())throw new Error("Can't construct `RDataFrame`. Supplied R object is not a `data.frame`.");return this}return e.fromObject(r)}static fromObject(r){let{names:t,values:n}=lt(r),s={n:0};try{let a=!!t&&t.length>0&&t.every(o=>o),i=n.length>0&&n.every(o=>Array.isArray(o)||ArrayBuffer.isView(o)||o instanceof ArrayBuffer);if(a&&i){let o=n,d=o.every(u=>u.length===o[0].length),l=o.every(u=>us(u[0])||cs(u[0]));if(d&&l){let u=new ce({type:"list",names:t,values:o.map(g=>ls(g))});D(u,s);let _=new le([new B("as.data.frame"),u]);return D(_,s),new e(_.eval())}}}finally{U(s.n)}throw new Error("Can't construct `data.frame`. Source object is not eligible.")}static fromD3(r){return this.fromObject(Object.fromEntries(Object.keys(r[0]).map(t=>[t,r.map(n=>n[t])])))}},st=class extends R{exec(...r){let t={n:0};try{let n=new le([this,...r]);return D(n,t),n.eval()}finally{U(t.n)}}capture(r={},...t){let n={n:0};try{let s=new le([this,...t]);return D(s,n),s.capture(r)}finally{U(n.n)}}},He=class e extends R{static{this.CEType={CE_NATIVE:0,CE_UTF8:1,CE_LATIN1:2,CE_BYTES:3,CE_SYMBOL:5,CE_ANY:99}}constructor(r){if(r instanceof F){Ve(r,"string"),super(r);return}let t=c.allocateUTF8(r);try{super(new F(c._Rf_mkCharCE(t,e.CEType.CE_UTF8)))}finally{c._free(t)}}toString(){let r=c._vmaxget();try{return c.UTF8ToString(c._Rf_translateCharUTF8(this.ptr))}finally{c._vmaxset(r)}}toJs(){return{type:"string",value:this.toString()}}},te=class extends R{constructor(r={}){if(r instanceof F)return Ve(r,"environment"),super(r),this;let t=0;try{let{names:n,values:s}=lt(r),a=Le(c._R_NewEnv(W.globalEnv.ptr,0,0));++t,s.forEach((i,o)=>{let d=n?n[o]:null;if(!d)throw new Error("Can't create object in new environment with empty symbol name");let l=new B(d),u=Le(new R(i));try{jr(a,l,u)}finally{U(1)}}),super(new F(a))}finally{U(t)}}ls(r=!1,t=!0){return oe.wrap(c._R_lsInternal3(this.ptr,Number(r),Number(t))).toArray()}bind(r,t){let n=new B(r),s=Le(new R(t));try{jr(this,n,s)}finally{U(1)}}names(){return this.ls(!0,!0)}frame(){return R.wrap(c._FRAME(this.ptr))}subset(r){if(typeof r=="number")throw new Error("Object of type environment is not subsettable");return this.getDollar(r)}toObject({depth:r=-1}={}){let t=this.names();return Object.fromEntries([...Array(t.length).keys()].map(n=>{let s=this.getDollar(t[n]);return[t[n],r<0?s:s.toJs({depth:r})]}))}toJs(r={depth:0},t=1){let n=this.names(),s=[...Array(n.length).keys()].map(a=>r.depth&&t>=r.depth?this.getDollar(n[a]):this.getDollar(n[a]).toJs(r,t+1));return{type:"environment",names:n,values:s}}},Te=class extends R{constructor(r,t,n){if(r instanceof F)return Ve(r,t),super(r),this;let s={n:0};try{let{names:a,values:i}=lt(r),o=c._Rf_allocVector(ie[t],i.length);D(o,s),i.forEach(n(o)),R.wrap(o).setNames(a),super(new F(o))}finally{U(s.n)}}get length(){return c._LENGTH(this.ptr)}get(r){return super.get(r)}subset(r){return super.subset(r)}getDollar(){throw new Error("$ operator is invalid for atomic vectors")}detectMissing(){let r={n:0};try{let t=c._Rf_lang2(new B("is.na").ptr,this.ptr);D(t,r);let n=re.wrap(Be(t,W.baseEnv));D(n,r);let s=n.toTypedArray();return Array.from(s).map(a=>!!a)}finally{U(r.n)}}toArray(){let r=this.toTypedArray();return this.detectMissing().map((t,n)=>t?null:r[n])}toObject({allowDuplicateKey:r=!0,allowEmptyKey:t=!1}={}){let n=this.entries(),s=n.map(([a])=>a);if(!r&&new Set(s).size!==s.length)throw new Error("Duplicate key when converting atomic vector without allowDuplicateKey enabled");if(!t&&s.some(a=>!a))throw new Error("Empty or null key when converting atomic vector without allowEmptyKey enabled");return Object.fromEntries(n.filter((a,i)=>n.findIndex(o=>o[0]===a[0])===i))}entries(){let r=this.toArray(),t=this.names();return r.map((n,s)=>[t?t[s]:null,n])}toJs(){return{type:this.type(),names:this.names(),values:this.toArray()}}},re=class e extends Te{constructor(r){super(r,"logical",e.#e)}static#e=r=>{let t=c._LOGICAL(r),n=c.getValue(c._R_NaInt,"i32");return(s,a)=>{c.setValue(t+4*a,s===null?n:!!s,"i32")}};getBoolean(r){return this.get(r).toArray()[0]}toBoolean(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getBoolean(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS boolean");return r}toTypedArray(){return new Int32Array(c.HEAP32.subarray(c._LOGICAL(this.ptr)/4,c._LOGICAL(this.ptr)/4+this.length))}toArray(){let r=this.toTypedArray();return this.detectMissing().map((t,n)=>t?null:!!r[n])}},Pt=class e extends Te{constructor(r){super(r,"integer",e.#e)}static#e=r=>{let t=c._INTEGER(r),n=c.getValue(c._R_NaInt,"i32");return(s,a)=>{c.setValue(t+4*a,s===null?n:Math.round(Number(s)),"i32")}};getNumber(r){return this.get(r).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getNumber(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS number");return r}toTypedArray(){return new Int32Array(c.HEAP32.subarray(c._INTEGER(this.ptr)/4,c._INTEGER(this.ptr)/4+this.length))}},qe=class e extends Te{constructor(r){super(r,"double",e.#e)}static#e=r=>{let t=c._REAL(r),n=c.getValue(c._R_NaReal,"double");return(s,a)=>{c.setValue(t+8*a,s===null?n:s,"double")}};getNumber(r){return this.get(r).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getNumber(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS number");return r}toTypedArray(){return new Float64Array(c.HEAPF64.subarray(c._REAL(this.ptr)/8,c._REAL(this.ptr)/8+this.length))}},it=class e extends Te{constructor(r){super(r,"complex",e.#e)}static#e=r=>{let t=c._COMPLEX(r),n=c.getValue(c._R_NaReal,"double");return(s,a)=>{c.setValue(t+8*(2*a),s===null?n:s.re,"double"),c.setValue(t+8*(2*a+1),s===null?n:s.im,"double")}};getComplex(r){return this.get(r).toArray()[0]}toComplex(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getComplex(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS object");return r}toTypedArray(){return new Float64Array(c.HEAPF64.subarray(c._COMPLEX(this.ptr)/8,c._COMPLEX(this.ptr)/8+2*this.length))}toArray(){let r=this.toTypedArray();return this.detectMissing().map((t,n)=>t?null:{re:r[2*n],im:r[2*n+1]})}},oe=class e extends Te{constructor(r){super(r,"character",e.#e)}static#e=r=>(t,n)=>{t===null?c._SET_STRING_ELT(r,n,W.naString.ptr):c._SET_STRING_ELT(r,n,new He(t).ptr)};getString(r){return this.get(r).toArray()[0]}toString(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getString(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS string");return r}toTypedArray(){return new Uint32Array(c.HEAPU32.subarray(c._STRING_PTR(this.ptr)/4,c._STRING_PTR(this.ptr)/4+this.length))}toArray(){let r=c._vmaxget();try{return this.detectMissing().map((t,n)=>t?null:c.UTF8ToString(c._Rf_translateCharUTF8(c._STRING_ELT(this.ptr,n))))}finally{c._vmaxset(r)}}},ot=class e extends Te{constructor(r){r instanceof ArrayBuffer&&(r=new Uint8Array(r)),super(r,"raw",e.#e)}static#e=r=>{let t=c._RAW(r);return(n,s)=>{c.setValue(t+s,Number(n),"i8")}};getNumber(r){return this.get(r).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getNumber(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS number");return r}toTypedArray(){return new Uint8Array(c.HEAPU8.subarray(c._RAW(this.ptr),c._RAW(this.ptr)+this.length))}};function lt(e){return At(e)?e:Array.isArray(e)||ArrayBuffer.isView(e)?{names:null,values:e}:e&&typeof e=="object"&&!Fe(e)?{names:Object.keys(e),values:Object.values(e)}:{names:null,values:[e]}}function Mt(e){let r={object:R,null:at,symbol:B,pairlist:ze,closure:st,environment:te,call:le,special:st,builtin:st,string:He,logical:re,integer:Pt,double:qe,complex:it,character:oe,list:ce,raw:ot,function:st,dataframe:je};return e in r?r[e]:R}function $e(e){return e instanceof R}function cs(e){let r=["logical","integer","double","complex","character"];return $e(e)&&r.includes(e.type())||$e(e)&&e.isNa()}function us(e){return e===null||typeof e=="number"||typeof e=="boolean"||typeof e=="string"||Fe(e)}var W;function Vr(){W={baseEnv:te.wrap(c.getValue(c._R_BaseEnv,"*")),bracket2Symbol:B.wrap(c.getValue(c._R_Bracket2Symbol,"*")),bracketSymbol:B.wrap(c.getValue(c._R_BracketSymbol,"*")),dollarSymbol:B.wrap(c.getValue(c._R_DollarSymbol,"*")),emptyEnv:te.wrap(c.getValue(c._R_EmptyEnv,"*")),false:re.wrap(c.getValue(c._R_FalseValue,"*")),globalEnv:te.wrap(c.getValue(c._R_GlobalEnv,"*")),na:re.wrap(c.getValue(c._R_LogicalNAValue,"*")),namesSymbol:B.wrap(c.getValue(c._R_NamesSymbol,"*")),naString:R.wrap(c.getValue(c._R_NaString,"*")),null:at.wrap(c.getValue(c._R_NilValue,"*")),true:re.wrap(c.getValue(c._R_TrueValue,"*")),unboundValue:R.wrap(c.getValue(c._R_UnboundValue,"*"))}}function ar(){let e={resolve:(()=>{}),reject:(()=>{}),promise:Promise.resolve()},r=new Promise((t,n)=>{e.resolve=t,e.reject=n});return e.promise=r,e}function Je(e,r,t,...n){return e==null||Ui(e)?e:e instanceof ArrayBuffer?new Uint8Array(e):r(e)?t(e,...n):Array.isArray(e)||ArrayBuffer.isView(e)?e.map(s=>Je(s,r,t,...n)):e instanceof F?e:typeof e=="object"?Object.fromEntries(Object.entries(e).map(([s,a])=>[s,Je(a,r,t,...n)])):e}function Ui(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap}function ir(e){let r="Reached the unreachable";throw r=r+(e?": "+e:"."),new Ce(r)}function ds(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!ArrayBuffer.isView(e)&&!Fe(e)&&!At(e)&&!(e instanceof Date)&&!(e instanceof RegExp)&&!(e instanceof Error)&&!(e instanceof F)&&Object.getPrototypeOf(e)===Object.prototype}var Fd=new TextEncoder;function pn(e,r){return Us({type:"request",data:{uuid:_e(),msg:e}},r)}function gn(e,r,t){return Us({type:"response",data:{uuid:e,resp:r}},t)}function Us(e,r){return r&&os(e,r),e}function Ws(e,r){return{type:"sync-request",data:{msg:e,reqData:r}}}function ko(e){return!!e&&typeof e=="object"&&"payloadType"in e&&"obj"in e}function Ct(e){return ko(e)&&e.payloadType==="ptr"}var Ls=rs(Is()),Ao=new TextDecoder("utf-8"),xr=class{constructor(r,t,n=[]){this.#e=!1;this.syncifier=new mn;this.endpoint=r,this.msg=t,this.transfers=n,this.#t=!1}#e;#t;#r;#n;#s;scheduleSync(){if(!this.#e)return this.#e=!0,this.syncifier.scheduleTask(this),this.#s=this.doSync(),this.#s.next(),this}poll(){if(!this.#e)throw new Error("Task not synchronously scheduled");let{done:r,value:t}=this.#s.next();return r?(this.#t=!0,this.#r=t,!0):!1}*doSync(){let{endpoint:r,msg:t,transfers:n}=this,s=new Int32Array(new SharedArrayBuffer(8)),a=this.signalBuffer,i=this.taskId,o=Fs(Dt),d=Ws(t,{sizeBuffer:s,dataBuffer:o,signalBuffer:a,taskId:i});if(r.postMessage(d,n),yield,Atomics.load(s,1)===0){let u=Ao.decode(o.slice(0,Dt));Do(o);let _=Atomics.load(s,0);o=Fs(_),r.postMessage({id:u,dataBuffer:o}),yield}let l=Atomics.load(s,0);return(0,Ls.decode)(o.slice(0,l))}get result(){if(this.#n)throw this.#n;if(this.#t)return this.#r;throw new Error("Not ready.")}syncify(){return this.scheduleSync(),this.syncifier.syncifyTask(this),this.result}},mn=class{constructor(){this.nextTaskId=new Int32Array([1]),this.signalBuffer=new Int32Array(new SharedArrayBuffer(132)),this.tasks=new Map}scheduleTask(r){r.taskId=this.nextTaskId[0],this.nextTaskId[0]+=2,r.signalBuffer=this.signalBuffer,this.tasks.set(r.taskId,r)}waitOnSignalBuffer(){for(;;)switch(Atomics.wait(this.signalBuffer,0,0,50)){case"ok":case"not-equal":return;case"timed-out":yn[0]!==0&&Bs();break;default:throw new Error("Unreachable")}}*tasksIdsToWakeup(){let r=Atomics.load(this.signalBuffer,0);for(let t=0;t<32;t++){let n=1<<t;r&n&&(Atomics.and(this.signalBuffer,0,~n),yield Atomics.exchange(this.signalBuffer,t+1,0))}}pollTasks(r){let t=!1;for(let n of this.tasksIdsToWakeup()){let s=this.tasks.get(n);if(!s)throw new Error(`Assertion error: unknown taskId ${n}.`);s.poll()&&(this.tasks.delete(n),s===r&&(t=!0))}return t}syncifyTask(r){for(;;)if(this.waitOnSignalBuffer(),this.pollTasks(r))return}},Rr=[];function Fs(e){let r=Math.ceil(Math.log2(e));Rr[r]||(Rr[r]=[]);let t=Rr[r].pop();return t?(t.fill(0),t):new Uint8Array(new SharedArrayBuffer(2**r))}function Do(e){let r=Math.ceil(Math.log2(e.byteLength));Rr[r].push(e)}var yn=new Int32Array(new ArrayBuffer(4)),Bs=()=>{throw yn[0]=0,new Error("No event handler.")};function zs(e){Bs=e}function js(e){yn=new Int32Array(e)}var Er=class{static proxy(r){return class dt extends EventTarget{constructor(s,a){super();this.CONNECTING=dt.CONNECTING;this.OPEN=dt.OPEN;this.CLOSING=dt.CLOSING;this.CLOSED=dt.CLOSED;this.readyState=dt.CONNECTING;this.bufferedAmount=0;this.extensions="";this.url=String(s),this.protocol=Array.isArray(a)?a[0]:a||"",this.binaryType="arraybuffer",this.onopen=null,this.onmessage=null,this.onclose=null,this.onerror=null,this.uuid=_e(),r.writeSystem({type:"proxyWebSocket",data:{uuid:this.uuid,url:this.url,protocol:this.protocol}}),r.ws.set(this.uuid,this)}static{this.CONNECTING=0}static{this.OPEN=1}static{this.CLOSING=2}static{this.CLOSED=3}send(s){r.writeSystem({type:"sendWebSocket",data:{uuid:this.uuid,data:s}})}close(s,a){r.writeSystem({type:"closeWebSocket",data:{uuid:this.uuid,code:s,reason:a}})}_accept(){if(this.readyState!==0)return;this.readyState=1;let s=new Event("open");this.dispatchEvent(s),this.onopen?.(s)}_recieve(s){let a=new MessageEvent("message",{data:s});this.dispatchEvent(a),this.onmessage?.(a)}_close(s,a){let i=new CloseEvent("close",{code:s,reason:a});this.dispatchEvent(i),this.onclose?.(i),r.ws.delete(this.uuid)}_error(){let s=new Event("error");this.dispatchEvent(s),this.onerror?.(s)}}}};L&&(globalThis.CloseEvent=class extends Event{constructor(r,t={}){super(r,t),this.wasClean=t.wasClean||!1,this.code=t.code||0,this.reason=t.reason||""}});var vr=class{static proxy(r){return class extends EventTarget{constructor(n,s={}){super(),this.url=String(n),this.options=s,this.onmessage=null,this.onmessageerror=null,this.onerror=null,this.uuid=_e(),r.writeSystem({type:"proxyWorker",data:{uuid:this.uuid,url:this.url,options:this.options}}),r.workers.set(this.uuid,this)}postMessage(n,s={async:!0}){let a=Array.isArray(s)?!0:s.async??!0,i=Array.isArray(s)?s:s.transfer??[];return r.syncRequest({type:"post-message-worker",data:{uuid:this.uuid,data:n,async:a,transfer:i}}).data}terminate(){r.writeSystem({type:"terminateWorker",data:{uuid:this.uuid}})}_message(n){let s=new MessageEvent("message",{data:n});this.dispatchEvent(s),this.onmessage?.(s)}_messageerror(n){let s=new MessageEvent("message",{data:n});this.dispatchEvent(s),this.onmessageerror?.(s)}_error(){let n=new Event("error");this.dispatchEvent(n),this.onerror?.(n)}}}};L&&(globalThis.Worker=Q("worker_threads").Worker);var Sr=class{constructor(){this.#t=()=>0;this.#r=new Int32Array(new SharedArrayBuffer(4));this.#n=()=>{};this.resolveRequest=()=>{};this.#e=L?Q("worker_threads").parentPort:globalThis,js(this.#r.buffer),zs(()=>this.handleEvents()),this.WebSocketProxy=Er.proxy(this),this.ws=new Map,this.WorkerProxy=vr.proxy(this),this.workers=new Map}#e;#t;#r;#n;resolve(){this.write({type:"resolve",data:this.#r.buffer})}write(r,t){this.#e.postMessage(r,t)}writeSystem(r,t){this.#e.postMessage({type:"system",data:r},t)}syncRequest(r,t){return new xr(this.#e,r,t).syncify()}read(){return this.syncRequest({type:"read"})}inputOrDispatch(){for(;;){let r=this.read();if(r.type==="stdin")return c.allocateUTF8(r.data);this.#t(r)}}run(r){try{c.callMain(r)}catch(t){throw t instanceof WebAssembly.RuntimeError&&(this.writeSystem({type:"console.error",data:t.message}),this.writeSystem({type:"console.error",data:"An unrecoverable WebAssembly error has occurred, the webR worker will be closed."}),this.writeSystem({type:"close"})),t}}handleEvents(){if(this.#r[0]!==0){for(;;){let r=this.syncRequest({type:"event"});if(!r)break;switch(r.data.msg.type){case"interrupt":this.#n();break;case"websocket-open":{let t=r.data.msg;this.ws.get(t.data.uuid)?._accept();break}case"websocket-message":{let t=r.data.msg;this.ws.get(t.data.uuid)?._recieve(t.data.data);break}case"websocket-close":{let t=r.data.msg;this.ws.get(t.data.uuid)?._close(t.data.code,t.data.reason);break}case"websocket-error":{let t=r.data.msg;this.ws.get(t.data.uuid)?._error();break}case"worker-message":{let t=r.data.msg;this.workers.get(t.data.uuid)?._message(t.data.data);break}case"worker-messageerror":{let t=r.data.msg;this.workers.get(t.data.uuid)?._messageerror(t.data.data);break}case"worker-error":{let t=r.data.msg;this.workers.get(t.data.uuid)?._error();break}default:throw new Error(`Unsupported event type '${r.data.msg.type}'.`)}}this.#r[0]=0}}setInterrupt(r){this.#n=r}setDispatchHandler(r){this.#t=r}};L&&(globalThis.Worker=Q("worker_threads").Worker);var kr=class{constructor(){this.#t=new Map;this.#r=()=>0;this.#n=0;this.WebSocketProxy=L?void 0:WebSocket;this.WorkerProxy=L?void 0:Worker;this.#s=async()=>{for(;;)try{this.#n=0;let r=await this.request({type:"read"});if(r.type==="stdin"){let t=Module.allocateUTF8(r.data);Module._strcpy(Module._DLLbuf,t),Module.setValue(Module._DLLbufp,Module._DLLbuf,"*"),Module._free(t);try{for(;Module._R_ReplDLLdo1()>0;);}catch(n){if(n instanceof WebAssembly.Exception)Module._R_ReplDLLinit(),Module._R_ReplDLLdo1();else throw n}}else this.#r(r)}catch(r){if(r instanceof WebAssembly.RuntimeError&&(this.writeSystem({type:"console.error",data:r.message}),this.writeSystem({type:"console.error",data:"An unrecoverable WebAssembly error has occurred, the webR worker will be closed."}),this.writeSystem({type:"close"})),!(r instanceof WebAssembly.Exception))throw r}};this.#e=L?Q("worker_threads").parentPort:globalThis}#e;#t;#r;#n;resolve(){this.write({type:"resolve"})}write(r,t){this.#e.postMessage(r,t)}writeSystem(r,t){this.#e.postMessage({type:"system",data:r},t)}read(){throw new Se("Unable to synchronously read when using the `PostMessage` channel.")}inputOrDispatch(){if(this.#n>0){this.#n=0;let r=Module.allocateUTF8OnStack("Can't block for input when using the PostMessage communication channel.");Module._Rf_error(r)}return this.#n++,0}run(r){let t=r||[];t.unshift("R");let n=t.length,s=Module._malloc(4*(n+1));t.forEach((a,i)=>{let o=s+4*i,d=Module.allocateUTF8(a);Module.setValue(o,d,"*")}),this.writeSystem({type:"console.warn",data:"WebR is using `PostMessage` communication channel, nested R REPLs are not available."}),Module._Rf_initialize_R(n,s),Module._setup_Rmainloop(),Module._R_ReplDLLinit(),Module._R_ReplDLLdo1(),this.#s()}setDispatchHandler(r){this.#r=r}async request(r,t){let n=pn(r,t),{resolve:s,promise:a}=ar();return this.#t.set(n.data.uuid,s),this.write(n,t),a}syncRequest(){throw new Error("Unable to sync-request when using the `PostMessage` channel.")}setInterrupt(){}handleEvents(){}resolveRequest(r){let t=r,n=t.data.uuid,s=this.#t.get(n);s?(this.#t.delete(n),s(t.data.resp)):console.warn("Can't find request.")}#s};var ft={Automatic:0,SharedArrayBuffer:1,PostMessage:3};function qs(e){switch(e.data.channelType){case ft.SharedArrayBuffer:return new Sr;case ft.PostMessage:return new kr;default:throw new Se("Unknown worker channel type received")}}function _t(e){let r=e.length;for(;--r>=0;)e[r]=0}var Oo=0,Da=1,Io=2,No=3,Uo=258,zn=29,Yt=256,qt=Yt+1+zn,gt=30,jn=19,Pa=2*qt+1,Ge=15,_n=16,Wo=7,Hn=256,Ma=16,Oa=17,Ia=18,On=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Or=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Co=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Na=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Fo=512,xe=new Array((qt+2)*2);_t(xe);var zt=new Array(gt*2);_t(zt);var $t=new Array(Fo);_t($t);var Vt=new Array(Uo-No+1);_t(Vt);var qn=new Array(zn);_t(qn);var Ir=new Array(gt);_t(Ir);function bn(e,r,t,n,s){this.static_tree=e,this.extra_bits=r,this.extra_base=t,this.elems=n,this.max_length=s,this.has_stree=e&&e.length}var Ua,Wa,Ca;function wn(e,r){this.dyn_tree=e,this.max_code=0,this.stat_desc=r}var Fa=e=>e<256?$t[e]:$t[256+(e>>>7)],Zt=(e,r)=>{e.pending_buf[e.pending++]=r&255,e.pending_buf[e.pending++]=r>>>8&255},J=(e,r,t)=>{e.bi_valid>_n-t?(e.bi_buf|=r<<e.bi_valid&65535,Zt(e,e.bi_buf),e.bi_buf=r>>_n-e.bi_valid,e.bi_valid+=t-_n):(e.bi_buf|=r<<e.bi_valid&65535,e.bi_valid+=t)},pe=(e,r,t)=>{J(e,t[r*2],t[r*2+1])},La=(e,r)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--r>0);return t>>>1},Lo=e=>{e.bi_valid===16?(Zt(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Bo=(e,r)=>{let t=r.dyn_tree,n=r.max_code,s=r.stat_desc.static_tree,a=r.stat_desc.has_stree,i=r.stat_desc.extra_bits,o=r.stat_desc.extra_base,d=r.stat_desc.max_length,l,u,_,g,f,m,x=0;for(g=0;g<=Ge;g++)e.bl_count[g]=0;for(t[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<Pa;l++)u=e.heap[l],g=t[t[u*2+1]*2+1]+1,g>d&&(g=d,x++),t[u*2+1]=g,!(u>n)&&(e.bl_count[g]++,f=0,u>=o&&(f=i[u-o]),m=t[u*2],e.opt_len+=m*(g+f),a&&(e.static_len+=m*(s[u*2+1]+f)));if(x!==0){do{for(g=d-1;e.bl_count[g]===0;)g--;e.bl_count[g]--,e.bl_count[g+1]+=2,e.bl_count[d]--,x-=2}while(x>0);for(g=d;g!==0;g--)for(u=e.bl_count[g];u!==0;)_=e.heap[--l],!(_>n)&&(t[_*2+1]!==g&&(e.opt_len+=(g-t[_*2+1])*t[_*2],t[_*2+1]=g),u--)}},Ba=(e,r,t)=>{let n=new Array(Ge+1),s=0,a,i;for(a=1;a<=Ge;a++)s=s+t[a-1]<<1,n[a]=s;for(i=0;i<=r;i++){let o=e[i*2+1];o!==0&&(e[i*2]=La(n[o]++,o))}},zo=()=>{let e,r,t,n,s,a=new Array(Ge+1);for(t=0,n=0;n<zn-1;n++)for(qn[n]=t,e=0;e<1<<On[n];e++)Vt[t++]=n;for(Vt[t-1]=n,s=0,n=0;n<16;n++)for(Ir[n]=s,e=0;e<1<<Or[n];e++)$t[s++]=n;for(s>>=7;n<gt;n++)for(Ir[n]=s<<7,e=0;e<1<<Or[n]-7;e++)$t[256+s++]=n;for(r=0;r<=Ge;r++)a[r]=0;for(e=0;e<=143;)xe[e*2+1]=8,e++,a[8]++;for(;e<=255;)xe[e*2+1]=9,e++,a[9]++;for(;e<=279;)xe[e*2+1]=7,e++,a[7]++;for(;e<=287;)xe[e*2+1]=8,e++,a[8]++;for(Ba(xe,qt+1,a),e=0;e<gt;e++)zt[e*2+1]=5,zt[e*2]=La(e,5);Ua=new bn(xe,On,Yt+1,qt,Ge),Wa=new bn(zt,Or,0,gt,Ge),Ca=new bn(new Array(0),Co,0,jn,Wo)},za=e=>{let r;for(r=0;r<qt;r++)e.dyn_ltree[r*2]=0;for(r=0;r<gt;r++)e.dyn_dtree[r*2]=0;for(r=0;r<jn;r++)e.bl_tree[r*2]=0;e.dyn_ltree[Hn*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},ja=e=>{e.bi_valid>8?Zt(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},$s=(e,r,t,n)=>{let s=r*2,a=t*2;return e[s]<e[a]||e[s]===e[a]&&n[r]<=n[t]},Rn=(e,r,t)=>{let n=e.heap[t],s=t<<1;for(;s<=e.heap_len&&(s<e.heap_len&&$s(r,e.heap[s+1],e.heap[s],e.depth)&&s++,!$s(r,n,e.heap[s],e.depth));)e.heap[t]=e.heap[s],t=s,s<<=1;e.heap[t]=n},Vs=(e,r,t)=>{let n,s,a=0,i,o;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+a++]&255,n+=(e.pending_buf[e.sym_buf+a++]&255)<<8,s=e.pending_buf[e.sym_buf+a++],n===0?pe(e,s,r):(i=Vt[s],pe(e,i+Yt+1,r),o=On[i],o!==0&&(s-=qn[i],J(e,s,o)),n--,i=Fa(n),pe(e,i,t),o=Or[i],o!==0&&(n-=Ir[i],J(e,n,o)));while(a<e.sym_next);pe(e,Hn,r)},In=(e,r)=>{let t=r.dyn_tree,n=r.stat_desc.static_tree,s=r.stat_desc.has_stree,a=r.stat_desc.elems,i,o,d=-1,l;for(e.heap_len=0,e.heap_max=Pa,i=0;i<a;i++)t[i*2]!==0?(e.heap[++e.heap_len]=d=i,e.depth[i]=0):t[i*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=d<2?++d:0,t[l*2]=1,e.depth[l]=0,e.opt_len--,s&&(e.static_len-=n[l*2+1]);for(r.max_code=d,i=e.heap_len>>1;i>=1;i--)Rn(e,t,i);l=a;do i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Rn(e,t,1),o=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=o,t[l*2]=t[i*2]+t[o*2],e.depth[l]=(e.depth[i]>=e.depth[o]?e.depth[i]:e.depth[o])+1,t[i*2+1]=t[o*2+1]=l,e.heap[1]=l++,Rn(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Bo(e,r),Ba(t,d,e.bl_count)},Zs=(e,r,t)=>{let n,s=-1,a,i=r[1],o=0,d=7,l=4;for(i===0&&(d=138,l=3),r[(t+1)*2+1]=65535,n=0;n<=t;n++)a=i,i=r[(n+1)*2+1],!(++o<d&&a===i)&&(o<l?e.bl_tree[a*2]+=o:a!==0?(a!==s&&e.bl_tree[a*2]++,e.bl_tree[Ma*2]++):o<=10?e.bl_tree[Oa*2]++:e.bl_tree[Ia*2]++,o=0,s=a,i===0?(d=138,l=3):a===i?(d=6,l=3):(d=7,l=4))},Js=(e,r,t)=>{let n,s=-1,a,i=r[1],o=0,d=7,l=4;for(i===0&&(d=138,l=3),n=0;n<=t;n++)if(a=i,i=r[(n+1)*2+1],!(++o<d&&a===i)){if(o<l)do pe(e,a,e.bl_tree);while(--o!==0);else a!==0?(a!==s&&(pe(e,a,e.bl_tree),o--),pe(e,Ma,e.bl_tree),J(e,o-3,2)):o<=10?(pe(e,Oa,e.bl_tree),J(e,o-3,3)):(pe(e,Ia,e.bl_tree),J(e,o-11,7));o=0,s=a,i===0?(d=138,l=3):a===i?(d=6,l=3):(d=7,l=4)}},jo=e=>{let r;for(Zs(e,e.dyn_ltree,e.l_desc.max_code),Zs(e,e.dyn_dtree,e.d_desc.max_code),In(e,e.bl_desc),r=jn-1;r>=3&&e.bl_tree[Na[r]*2+1]===0;r--);return e.opt_len+=3*(r+1)+5+5+4,r},Ho=(e,r,t,n)=>{let s;for(J(e,r-257,5),J(e,t-1,5),J(e,n-4,4),s=0;s<n;s++)J(e,e.bl_tree[Na[s]*2+1],3);Js(e,e.dyn_ltree,r-1),Js(e,e.dyn_dtree,t-1)},qo=e=>{let r=4093624447,t;for(t=0;t<=31;t++,r>>>=1)if(r&1&&e.dyn_ltree[t*2]!==0)return 0;if(e.dyn_ltree[18]!==0||e.dyn_ltree[20]!==0||e.dyn_ltree[26]!==0)return 1;for(t=32;t<Yt;t++)if(e.dyn_ltree[t*2]!==0)return 1;return 0},Xs=!1,$o=e=>{Xs||(zo(),Xs=!0),e.l_desc=new wn(e.dyn_ltree,Ua),e.d_desc=new wn(e.dyn_dtree,Wa),e.bl_desc=new wn(e.bl_tree,Ca),e.bi_buf=0,e.bi_valid=0,za(e)},Ha=(e,r,t,n)=>{J(e,(Oo<<1)+(n?1:0),3),ja(e),Zt(e,t),Zt(e,~t),t&&e.pending_buf.set(e.window.subarray(r,r+t),e.pending),e.pending+=t},Vo=e=>{J(e,Da<<1,3),pe(e,Hn,xe),Lo(e)},Zo=(e,r,t,n)=>{let s,a,i=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=qo(e)),In(e,e.l_desc),In(e,e.d_desc),i=jo(e),s=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=s&&(s=a)):s=a=t+5,t+4<=s&&r!==-1?Ha(e,r,t,n):e.strategy===4||a===s?(J(e,(Da<<1)+(n?1:0),3),Vs(e,xe,zt)):(J(e,(Io<<1)+(n?1:0),3),Ho(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),Vs(e,e.dyn_ltree,e.dyn_dtree)),za(e),n&&ja(e)},Jo=(e,r,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=r,e.pending_buf[e.sym_buf+e.sym_next++]=r>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,r===0?e.dyn_ltree[t*2]++:(e.matches++,r--,e.dyn_ltree[(Vt[t]+Yt+1)*2]++,e.dyn_dtree[Fa(r)*2]++),e.sym_next===e.sym_end),Xo=$o,Go=Ha,Ko=Zo,Yo=Jo,Qo=Vo,el={_tr_init:Xo,_tr_stored_block:Go,_tr_flush_block:Ko,_tr_tally:Yo,_tr_align:Qo},tl=(e,r,t,n)=>{let s=e&65535|0,a=e>>>16&65535|0,i=0;for(;t!==0;){i=t>2e3?2e3:t,t-=i;do s=s+r[n++]|0,a=a+s|0;while(--i);s%=65521,a%=65521}return s|a<<16|0},Jt=tl,rl=()=>{let e,r=[];for(var t=0;t<256;t++){e=t;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;r[t]=e}return r},nl=new Uint32Array(rl()),sl=(e,r,t,n)=>{let s=nl,a=n+t;e^=-1;for(let i=n;i<a;i++)e=e>>>8^s[(e^r[i])&255];return e^-1},z=sl,Qe={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},bt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:al,_tr_stored_block:Nn,_tr_flush_block:il,_tr_tally:Me,_tr_align:ol}=el,{Z_NO_FLUSH:Oe,Z_PARTIAL_FLUSH:ll,Z_FULL_FLUSH:cl,Z_FINISH:se,Z_BLOCK:Gs,Z_OK:$,Z_STREAM_END:Ks,Z_STREAM_ERROR:ge,Z_DATA_ERROR:ul,Z_BUF_ERROR:xn,Z_DEFAULT_COMPRESSION:dl,Z_FILTERED:fl,Z_HUFFMAN_ONLY:Tr,Z_RLE:hl,Z_FIXED:pl,Z_DEFAULT_STRATEGY:gl,Z_UNKNOWN:ml,Z_DEFLATED:Wr}=bt,yl=9,_l=15,bl=8,wl=29,Rl=256,Un=Rl+1+wl,xl=30,El=19,vl=2*Un+1,Sl=15,P=3,Pe=258,me=Pe+P+1,kl=32,mt=42,$n=57,Wn=69,Cn=73,Fn=91,Ln=103,Ke=113,Lt=666,Z=1,wt=2,et=3,Rt=4,Tl=3,Ye=(e,r)=>(e.msg=Qe[r],r),Ys=e=>e*2-(e>4?9:0),De=e=>{let r=e.length;for(;--r>=0;)e[r]=0},Al=e=>{let r,t,n,s=e.w_size;r=e.hash_size,n=r;do t=e.head[--n],e.head[n]=t>=s?t-s:0;while(--r);r=s,n=r;do t=e.prev[--n],e.prev[n]=t>=s?t-s:0;while(--r)},Dl=(e,r,t)=>(r<<e.hash_shift^t)&e.hash_mask,Ie=Dl,G=e=>{let r=e.state,t=r.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(r.pending_buf.subarray(r.pending_out,r.pending_out+t),e.next_out),e.next_out+=t,r.pending_out+=t,e.total_out+=t,e.avail_out-=t,r.pending-=t,r.pending===0&&(r.pending_out=0))},K=(e,r)=>{il(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,r),e.block_start=e.strstart,G(e.strm)},O=(e,r)=>{e.pending_buf[e.pending++]=r},Ft=(e,r)=>{e.pending_buf[e.pending++]=r>>>8&255,e.pending_buf[e.pending++]=r&255},Bn=(e,r,t,n)=>{let s=e.avail_in;return s>n&&(s=n),s===0?0:(e.avail_in-=s,r.set(e.input.subarray(e.next_in,e.next_in+s),t),e.state.wrap===1?e.adler=Jt(e.adler,r,s,t):e.state.wrap===2&&(e.adler=z(e.adler,r,s,t)),e.next_in+=s,e.total_in+=s,s)},qa=(e,r)=>{let t=e.max_chain_length,n=e.strstart,s,a,i=e.prev_length,o=e.nice_match,d=e.strstart>e.w_size-me?e.strstart-(e.w_size-me):0,l=e.window,u=e.w_mask,_=e.prev,g=e.strstart+Pe,f=l[n+i-1],m=l[n+i];e.prev_length>=e.good_match&&(t>>=2),o>e.lookahead&&(o=e.lookahead);do if(s=r,!(l[s+i]!==m||l[s+i-1]!==f||l[s]!==l[n]||l[++s]!==l[n+1])){n+=2,s++;do;while(l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&n<g);if(a=Pe-(g-n),n=g-Pe,a>i){if(e.match_start=r,i=a,a>=o)break;f=l[n+i-1],m=l[n+i]}}while((r=_[r&u])>d&&--t!==0);return i<=e.lookahead?i:e.lookahead},yt=e=>{let r=e.w_size,t,n,s;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=r+(r-me)&&(e.window.set(e.window.subarray(r,r+r-n),0),e.match_start-=r,e.strstart-=r,e.block_start-=r,e.insert>e.strstart&&(e.insert=e.strstart),Al(e),n+=r),e.strm.avail_in===0)break;if(t=Bn(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=P)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=Ie(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=Ie(e,e.ins_h,e.window[s+P-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<P)););}while(e.lookahead<me&&e.strm.avail_in!==0)},$a=(e,r)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,s,a,i=0,o=e.strm.avail_in;do{if(n=65535,a=e.bi_valid+42>>3,e.strm.avail_out<a||(a=e.strm.avail_out-a,s=e.strstart-e.block_start,n>s+e.strm.avail_in&&(n=s+e.strm.avail_in),n>a&&(n=a),n<t&&(n===0&&r!==se||r===Oe||n!==s+e.strm.avail_in)))break;i=r===se&&n===s+e.strm.avail_in?1:0,Nn(e,0,0,i),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,G(e.strm),s&&(s>n&&(s=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+s),e.strm.next_out),e.strm.next_out+=s,e.strm.avail_out-=s,e.strm.total_out+=s,e.block_start+=s,n-=s),n&&(Bn(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(i===0);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),i?Rt:r!==Oe&&r!==se&&e.strm.avail_in===0&&e.strstart===e.block_start?wt:(a=e.window_size-e.strstart,e.strm.avail_in>a&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,a+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),a>e.strm.avail_in&&(a=e.strm.avail_in),a&&(Bn(e.strm,e.window,e.strstart,a),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.high_water<e.strstart&&(e.high_water=e.strstart),a=e.bi_valid+42>>3,a=e.pending_buf_size-a>65535?65535:e.pending_buf_size-a,t=a>e.w_size?e.w_size:a,s=e.strstart-e.block_start,(s>=t||(s||r===se)&&r!==Oe&&e.strm.avail_in===0&&s<=a)&&(n=s>a?a:s,i=r===se&&e.strm.avail_in===0&&n===s?1:0,Nn(e,e.block_start,n,i),e.block_start+=n,G(e.strm)),i?et:Z)},En=(e,r)=>{let t,n;for(;;){if(e.lookahead<me){if(yt(e),e.lookahead<me&&r===Oe)return Z;if(e.lookahead===0)break}if(t=0,e.lookahead>=P&&(e.ins_h=Ie(e,e.ins_h,e.window[e.strstart+P-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-me&&(e.match_length=qa(e,t)),e.match_length>=P)if(n=Me(e,e.strstart-e.match_start,e.match_length-P),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=P){e.match_length--;do e.strstart++,e.ins_h=Ie(e,e.ins_h,e.window[e.strstart+P-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ie(e,e.ins_h,e.window[e.strstart+1]);else n=Me(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(K(e,!1),e.strm.avail_out===0))return Z}return e.insert=e.strstart<P-1?e.strstart:P-1,r===se?(K(e,!0),e.strm.avail_out===0?et:Rt):e.sym_next&&(K(e,!1),e.strm.avail_out===0)?Z:wt},ht=(e,r)=>{let t,n,s;for(;;){if(e.lookahead<me){if(yt(e),e.lookahead<me&&r===Oe)return Z;if(e.lookahead===0)break}if(t=0,e.lookahead>=P&&(e.ins_h=Ie(e,e.ins_h,e.window[e.strstart+P-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=P-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-me&&(e.match_length=qa(e,t),e.match_length<=5&&(e.strategy===fl||e.match_length===P&&e.strstart-e.match_start>4096)&&(e.match_length=P-1)),e.prev_length>=P&&e.match_length<=e.prev_length){s=e.strstart+e.lookahead-P,n=Me(e,e.strstart-1-e.prev_match,e.prev_length-P),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=s&&(e.ins_h=Ie(e,e.ins_h,e.window[e.strstart+P-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=P-1,e.strstart++,n&&(K(e,!1),e.strm.avail_out===0))return Z}else if(e.match_available){if(n=Me(e,0,e.window[e.strstart-1]),n&&K(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Z}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Me(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<P-1?e.strstart:P-1,r===se?(K(e,!0),e.strm.avail_out===0?et:Rt):e.sym_next&&(K(e,!1),e.strm.avail_out===0)?Z:wt},Pl=(e,r)=>{let t,n,s,a,i=e.window;for(;;){if(e.lookahead<=Pe){if(yt(e),e.lookahead<=Pe&&r===Oe)return Z;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=P&&e.strstart>0&&(s=e.strstart-1,n=i[s],n===i[++s]&&n===i[++s]&&n===i[++s])){a=e.strstart+Pe;do;while(n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&n===i[++s]&&s<a);e.match_length=Pe-(a-s),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=P?(t=Me(e,1,e.match_length-P),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=Me(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(K(e,!1),e.strm.avail_out===0))return Z}return e.insert=0,r===se?(K(e,!0),e.strm.avail_out===0?et:Rt):e.sym_next&&(K(e,!1),e.strm.avail_out===0)?Z:wt},Ml=(e,r)=>{let t;for(;;){if(e.lookahead===0&&(yt(e),e.lookahead===0)){if(r===Oe)return Z;break}if(e.match_length=0,t=Me(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(K(e,!1),e.strm.avail_out===0))return Z}return e.insert=0,r===se?(K(e,!0),e.strm.avail_out===0?et:Rt):e.sym_next&&(K(e,!1),e.strm.avail_out===0)?Z:wt};function he(e,r,t,n,s){this.good_length=e,this.max_lazy=r,this.nice_length=t,this.max_chain=n,this.func=s}var Bt=[new he(0,0,0,0,$a),new he(4,4,8,4,En),new he(4,5,16,8,En),new he(4,6,32,32,En),new he(4,4,16,16,ht),new he(8,16,32,32,ht),new he(8,16,128,128,ht),new he(8,32,128,256,ht),new he(32,128,258,1024,ht),new he(32,258,258,4096,ht)],Ol=e=>{e.window_size=2*e.w_size,De(e.head),e.max_lazy_match=Bt[e.level].max_lazy,e.good_match=Bt[e.level].good_length,e.nice_match=Bt[e.level].nice_length,e.max_chain_length=Bt[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=P-1,e.match_available=0,e.ins_h=0};function Il(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Wr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(vl*2),this.dyn_dtree=new Uint16Array((2*xl+1)*2),this.bl_tree=new Uint16Array((2*El+1)*2),De(this.dyn_ltree),De(this.dyn_dtree),De(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Sl+1),this.heap=new Uint16Array(2*Un+1),De(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Un+1),De(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Qt=e=>{if(!e)return 1;let r=e.state;return!r||r.strm!==e||r.status!==mt&&r.status!==$n&&r.status!==Wn&&r.status!==Cn&&r.status!==Fn&&r.status!==Ln&&r.status!==Ke&&r.status!==Lt?1:0},Va=e=>{if(Qt(e))return Ye(e,ge);e.total_in=e.total_out=0,e.data_type=ml;let r=e.state;return r.pending=0,r.pending_out=0,r.wrap<0&&(r.wrap=-r.wrap),r.status=r.wrap===2?$n:r.wrap?mt:Ke,e.adler=r.wrap===2?0:1,r.last_flush=-2,al(r),$},Za=e=>{let r=Va(e);return r===$&&Ol(e.state),r},Nl=(e,r)=>Qt(e)||e.state.wrap!==2?ge:(e.state.gzhead=r,$),Ja=(e,r,t,n,s,a)=>{if(!e)return ge;let i=1;if(r===dl&&(r=6),n<0?(i=0,n=-n):n>15&&(i=2,n-=16),s<1||s>yl||t!==Wr||n<8||n>15||r<0||r>9||a<0||a>pl||n===8&&i!==1)return Ye(e,ge);n===8&&(n=9);let o=new Il;return e.state=o,o.strm=e,o.status=mt,o.wrap=i,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=s+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+P-1)/P),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<s+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=r,o.strategy=a,o.method=t,Za(e)},Ul=(e,r)=>Ja(e,r,Wr,_l,bl,gl),Wl=(e,r)=>{if(Qt(e)||r>Gs||r<0)return e?Ye(e,ge):ge;let t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===Lt&&r!==se)return Ye(e,e.avail_out===0?xn:ge);let n=t.last_flush;if(t.last_flush=r,t.pending!==0){if(G(e),e.avail_out===0)return t.last_flush=-1,$}else if(e.avail_in===0&&Ys(r)<=Ys(n)&&r!==se)return Ye(e,xn);if(t.status===Lt&&e.avail_in!==0)return Ye(e,xn);if(t.status===mt&&t.wrap===0&&(t.status=Ke),t.status===mt){let s=Wr+(t.w_bits-8<<4)<<8,a=-1;if(t.strategy>=Tr||t.level<2?a=0:t.level<6?a=1:t.level===6?a=2:a=3,s|=a<<6,t.strstart!==0&&(s|=kl),s+=31-s%31,Ft(t,s),t.strstart!==0&&(Ft(t,e.adler>>>16),Ft(t,e.adler&65535)),e.adler=1,t.status=Ke,G(e),t.pending!==0)return t.last_flush=-1,$}if(t.status===$n){if(e.adler=0,O(t,31),O(t,139),O(t,8),t.gzhead)O(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),O(t,t.gzhead.time&255),O(t,t.gzhead.time>>8&255),O(t,t.gzhead.time>>16&255),O(t,t.gzhead.time>>24&255),O(t,t.level===9?2:t.strategy>=Tr||t.level<2?4:0),O(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(O(t,t.gzhead.extra.length&255),O(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=z(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=Wn;else if(O(t,0),O(t,0),O(t,0),O(t,0),O(t,0),O(t,t.level===9?2:t.strategy>=Tr||t.level<2?4:0),O(t,Tl),t.status=Ke,G(e),t.pending!==0)return t.last_flush=-1,$}if(t.status===Wn){if(t.gzhead.extra){let s=t.pending,a=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+a>t.pending_buf_size;){let o=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>s&&(e.adler=z(e.adler,t.pending_buf,t.pending-s,s)),t.gzindex+=o,G(e),t.pending!==0)return t.last_flush=-1,$;s=0,a-=o}let i=new Uint8Array(t.gzhead.extra);t.pending_buf.set(i.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending+=a,t.gzhead.hcrc&&t.pending>s&&(e.adler=z(e.adler,t.pending_buf,t.pending-s,s)),t.gzindex=0}t.status=Cn}if(t.status===Cn){if(t.gzhead.name){let s=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>s&&(e.adler=z(e.adler,t.pending_buf,t.pending-s,s)),G(e),t.pending!==0)return t.last_flush=-1,$;s=0}t.gzindex<t.gzhead.name.length?a=t.gzhead.name.charCodeAt(t.gzindex++)&255:a=0,O(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>s&&(e.adler=z(e.adler,t.pending_buf,t.pending-s,s)),t.gzindex=0}t.status=Fn}if(t.status===Fn){if(t.gzhead.comment){let s=t.pending,a;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>s&&(e.adler=z(e.adler,t.pending_buf,t.pending-s,s)),G(e),t.pending!==0)return t.last_flush=-1,$;s=0}t.gzindex<t.gzhead.comment.length?a=t.gzhead.comment.charCodeAt(t.gzindex++)&255:a=0,O(t,a)}while(a!==0);t.gzhead.hcrc&&t.pending>s&&(e.adler=z(e.adler,t.pending_buf,t.pending-s,s))}t.status=Ln}if(t.status===Ln){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(G(e),t.pending!==0))return t.last_flush=-1,$;O(t,e.adler&255),O(t,e.adler>>8&255),e.adler=0}if(t.status=Ke,G(e),t.pending!==0)return t.last_flush=-1,$}if(e.avail_in!==0||t.lookahead!==0||r!==Oe&&t.status!==Lt){let s=t.level===0?$a(t,r):t.strategy===Tr?Ml(t,r):t.strategy===hl?Pl(t,r):Bt[t.level].func(t,r);if((s===et||s===Rt)&&(t.status=Lt),s===Z||s===et)return e.avail_out===0&&(t.last_flush=-1),$;if(s===wt&&(r===ll?ol(t):r!==Gs&&(Nn(t,0,0,!1),r===cl&&(De(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),G(e),e.avail_out===0))return t.last_flush=-1,$}return r!==se?$:t.wrap<=0?Ks:(t.wrap===2?(O(t,e.adler&255),O(t,e.adler>>8&255),O(t,e.adler>>16&255),O(t,e.adler>>24&255),O(t,e.total_in&255),O(t,e.total_in>>8&255),O(t,e.total_in>>16&255),O(t,e.total_in>>24&255)):(Ft(t,e.adler>>>16),Ft(t,e.adler&65535)),G(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?$:Ks)},Cl=e=>{if(Qt(e))return ge;let r=e.state.status;return e.state=null,r===Ke?Ye(e,ul):$},Fl=(e,r)=>{let t=r.length;if(Qt(e))return ge;let n=e.state,s=n.wrap;if(s===2||s===1&&n.status!==mt||n.lookahead)return ge;if(s===1&&(e.adler=Jt(e.adler,r,t,0)),n.wrap=0,t>=n.w_size){s===0&&(De(n.head),n.strstart=0,n.block_start=0,n.insert=0);let d=new Uint8Array(n.w_size);d.set(r.subarray(t-n.w_size,t),0),r=d,t=n.w_size}let a=e.avail_in,i=e.next_in,o=e.input;for(e.avail_in=t,e.next_in=0,e.input=r,yt(n);n.lookahead>=P;){let d=n.strstart,l=n.lookahead-(P-1);do n.ins_h=Ie(n,n.ins_h,n.window[d+P-1]),n.prev[d&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=d,d++;while(--l);n.strstart=d,n.lookahead=P-1,yt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=P-1,n.match_available=0,e.next_in=i,e.input=o,e.avail_in=a,n.wrap=s,$},Ll=Ul,Bl=Ja,zl=Za,jl=Va,Hl=Nl,ql=Wl,$l=Cl,Vl=Fl,Zl="pako deflate (from Nodeca project)",jt={deflateInit:Ll,deflateInit2:Bl,deflateReset:zl,deflateResetKeep:jl,deflateSetHeader:Hl,deflate:ql,deflateEnd:$l,deflateSetDictionary:Vl,deflateInfo:Zl},Jl=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),Xl=function(e){let r=Array.prototype.slice.call(arguments,1);for(;r.length;){let t=r.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let n in t)Jl(t,n)&&(e[n]=t[n])}}return e},Gl=e=>{let r=0;for(let n=0,s=e.length;n<s;n++)r+=e[n].length;let t=new Uint8Array(r);for(let n=0,s=0,a=e.length;n<a;n++){let i=e[n];t.set(i,s),s+=i.length}return t},Cr={assign:Xl,flattenChunks:Gl},Xa=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Xa=!1}var Xt=new Uint8Array(256);for(let e=0;e<256;e++)Xt[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Xt[254]=Xt[254]=1;var Kl=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let r,t,n,s,a,i=e.length,o=0;for(s=0;s<i;s++)t=e.charCodeAt(s),(t&64512)===55296&&s+1<i&&(n=e.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(r=new Uint8Array(o),a=0,s=0;a<o;s++)t=e.charCodeAt(s),(t&64512)===55296&&s+1<i&&(n=e.charCodeAt(s+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),s++)),t<128?r[a++]=t:t<2048?(r[a++]=192|t>>>6,r[a++]=128|t&63):t<65536?(r[a++]=224|t>>>12,r[a++]=128|t>>>6&63,r[a++]=128|t&63):(r[a++]=240|t>>>18,r[a++]=128|t>>>12&63,r[a++]=128|t>>>6&63,r[a++]=128|t&63);return r},Yl=(e,r)=>{if(r<65534&&e.subarray&&Xa)return String.fromCharCode.apply(null,e.length===r?e:e.subarray(0,r));let t="";for(let n=0;n<r;n++)t+=String.fromCharCode(e[n]);return t},Ql=(e,r)=>{let t=r||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,r));let n,s,a=new Array(t*2);for(s=0,n=0;n<t;){let i=e[n++];if(i<128){a[s++]=i;continue}let o=Xt[i];if(o>4){a[s++]=65533,n+=o-1;continue}for(i&=o===2?31:o===3?15:7;o>1&&n<t;)i=i<<6|e[n++]&63,o--;if(o>1){a[s++]=65533;continue}i<65536?a[s++]=i:(i-=65536,a[s++]=55296|i>>10&1023,a[s++]=56320|i&1023)}return Yl(a,s)},ec=(e,r)=>{r=r||e.length,r>e.length&&(r=e.length);let t=r-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?r:t+Xt[e[t]]>r?t:r},Gt={string2buf:Kl,buf2string:Ql,utf8border:ec};function tc(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Ga=tc,Ka=Object.prototype.toString,{Z_NO_FLUSH:rc,Z_SYNC_FLUSH:nc,Z_FULL_FLUSH:sc,Z_FINISH:ac,Z_OK:Nr,Z_STREAM_END:ic,Z_DEFAULT_COMPRESSION:oc,Z_DEFAULT_STRATEGY:lc,Z_DEFLATED:cc}=bt;function er(e){this.options=Cr.assign({level:oc,method:cc,chunkSize:16384,windowBits:15,memLevel:8,strategy:lc},e||{});let r=this.options;r.raw&&r.windowBits>0?r.windowBits=-r.windowBits:r.gzip&&r.windowBits>0&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ga,this.strm.avail_out=0;let t=jt.deflateInit2(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(t!==Nr)throw new Error(Qe[t]);if(r.header&&jt.deflateSetHeader(this.strm,r.header),r.dictionary){let n;if(typeof r.dictionary=="string"?n=Gt.string2buf(r.dictionary):Ka.call(r.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(r.dictionary):n=r.dictionary,t=jt.deflateSetDictionary(this.strm,n),t!==Nr)throw new Error(Qe[t]);this._dict_set=!0}}er.prototype.push=function(e,r){let t=this.strm,n=this.options.chunkSize,s,a;if(this.ended)return!1;for(r===~~r?a=r:a=r===!0?ac:rc,typeof e=="string"?t.input=Gt.string2buf(e):Ka.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(a===nc||a===sc)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(s=jt.deflate(t,a),s===ic)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),s=jt.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===Nr;if(t.avail_out===0){this.onData(t.output);continue}if(a>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};er.prototype.onData=function(e){this.chunks.push(e)};er.prototype.onEnd=function(e){e===Nr&&(this.result=Cr.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Vn(e,r){let t=new er(r);if(t.push(e,!0),t.err)throw t.msg||Qe[t.err];return t.result}function uc(e,r){return r=r||{},r.raw=!0,Vn(e,r)}function dc(e,r){return r=r||{},r.gzip=!0,Vn(e,r)}var fc=er,hc=Vn,pc=uc,gc=dc,mc=bt,yc={Deflate:fc,deflate:hc,deflateRaw:pc,gzip:gc,constants:mc},Ar=16209,_c=16191,bc=function(r,t){let n,s,a,i,o,d,l,u,_,g,f,m,x,b,w,v,p,h,S,I,y,M,A,E,T=r.state;n=r.next_in,A=r.input,s=n+(r.avail_in-5),a=r.next_out,E=r.output,i=a-(t-r.avail_out),o=a+(r.avail_out-257),d=T.dmax,l=T.wsize,u=T.whave,_=T.wnext,g=T.window,f=T.hold,m=T.bits,x=T.lencode,b=T.distcode,w=(1<<T.lenbits)-1,v=(1<<T.distbits)-1;e:do{m<15&&(f+=A[n++]<<m,m+=8,f+=A[n++]<<m,m+=8),p=x[f&w];t:for(;;){if(h=p>>>24,f>>>=h,m-=h,h=p>>>16&255,h===0)E[a++]=p&65535;else if(h&16){S=p&65535,h&=15,h&&(m<h&&(f+=A[n++]<<m,m+=8),S+=f&(1<<h)-1,f>>>=h,m-=h),m<15&&(f+=A[n++]<<m,m+=8,f+=A[n++]<<m,m+=8),p=b[f&v];r:for(;;){if(h=p>>>24,f>>>=h,m-=h,h=p>>>16&255,h&16){if(I=p&65535,h&=15,m<h&&(f+=A[n++]<<m,m+=8,m<h&&(f+=A[n++]<<m,m+=8)),I+=f&(1<<h)-1,I>d){r.msg="invalid distance too far back",T.mode=Ar;break e}if(f>>>=h,m-=h,h=a-i,I>h){if(h=I-h,h>u&&T.sane){r.msg="invalid distance too far back",T.mode=Ar;break e}if(y=0,M=g,_===0){if(y+=l-h,h<S){S-=h;do E[a++]=g[y++];while(--h);y=a-I,M=E}}else if(_<h){if(y+=l+_-h,h-=_,h<S){S-=h;do E[a++]=g[y++];while(--h);if(y=0,_<S){h=_,S-=h;do E[a++]=g[y++];while(--h);y=a-I,M=E}}}else if(y+=_-h,h<S){S-=h;do E[a++]=g[y++];while(--h);y=a-I,M=E}for(;S>2;)E[a++]=M[y++],E[a++]=M[y++],E[a++]=M[y++],S-=3;S&&(E[a++]=M[y++],S>1&&(E[a++]=M[y++]))}else{y=a-I;do E[a++]=E[y++],E[a++]=E[y++],E[a++]=E[y++],S-=3;while(S>2);S&&(E[a++]=E[y++],S>1&&(E[a++]=E[y++]))}}else if((h&64)===0){p=b[(p&65535)+(f&(1<<h)-1)];continue r}else{r.msg="invalid distance code",T.mode=Ar;break e}break}}else if((h&64)===0){p=x[(p&65535)+(f&(1<<h)-1)];continue t}else if(h&32){T.mode=_c;break e}else{r.msg="invalid literal/length code",T.mode=Ar;break e}break}}while(n<s&&a<o);S=m>>3,n-=S,m-=S<<3,f&=(1<<m)-1,r.next_in=n,r.next_out=a,r.avail_in=n<s?5+(s-n):5-(n-s),r.avail_out=a<o?257+(o-a):257-(a-o),T.hold=f,T.bits=m},pt=15,Qs=852,ea=592,ta=0,vn=1,ra=2,wc=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Rc=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),xc=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Ec=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),vc=(e,r,t,n,s,a,i,o)=>{let d=o.bits,l=0,u=0,_=0,g=0,f=0,m=0,x=0,b=0,w=0,v=0,p,h,S,I,y,M=null,A,E=new Uint16Array(pt+1),T=new Uint16Array(pt+1),j=null,vt,Ne,Ue;for(l=0;l<=pt;l++)E[l]=0;for(u=0;u<n;u++)E[r[t+u]]++;for(f=d,g=pt;g>=1&&E[g]===0;g--);if(f>g&&(f=g),g===0)return s[a++]=1<<24|64<<16|0,s[a++]=1<<24|64<<16|0,o.bits=1,0;for(_=1;_<g&&E[_]===0;_++);for(f<_&&(f=_),b=1,l=1;l<=pt;l++)if(b<<=1,b-=E[l],b<0)return-1;if(b>0&&(e===ta||g!==1))return-1;for(T[1]=0,l=1;l<pt;l++)T[l+1]=T[l]+E[l];for(u=0;u<n;u++)r[t+u]!==0&&(i[T[r[t+u]]++]=u);if(e===ta?(M=j=i,A=20):e===vn?(M=wc,j=Rc,A=257):(M=xc,j=Ec,A=0),v=0,u=0,l=_,y=a,m=f,x=0,S=-1,w=1<<f,I=w-1,e===vn&&w>Qs||e===ra&&w>ea)return 1;for(;;){vt=l-x,i[u]+1<A?(Ne=0,Ue=i[u]):i[u]>=A?(Ne=j[i[u]-A],Ue=M[i[u]-A]):(Ne=96,Ue=0),p=1<<l-x,h=1<<m,_=h;do h-=p,s[y+(v>>x)+h]=vt<<24|Ne<<16|Ue|0;while(h!==0);for(p=1<<l-1;v&p;)p>>=1;if(p!==0?(v&=p-1,v+=p):v=0,u++,--E[l]===0){if(l===g)break;l=r[t+i[u]]}if(l>f&&(v&I)!==S){for(x===0&&(x=f),y+=_,m=l-x,b=1<<m;m+x<g&&(b-=E[m+x],!(b<=0));)m++,b<<=1;if(w+=1<<m,e===vn&&w>Qs||e===ra&&w>ea)return 1;S=v&I,s[S]=f<<24|m<<16|y-a|0}}return v!==0&&(s[y+v]=l-x<<24|64<<16|0),o.bits=f,0},Ht=vc,Sc=0,Ya=1,Qa=2,{Z_FINISH:na,Z_BLOCK:kc,Z_TREES:Dr,Z_OK:tt,Z_STREAM_END:Tc,Z_NEED_DICT:Ac,Z_STREAM_ERROR:ae,Z_DATA_ERROR:ei,Z_MEM_ERROR:ti,Z_BUF_ERROR:Dc,Z_DEFLATED:sa}=bt,Fr=16180,aa=16181,ia=16182,oa=16183,la=16184,ca=16185,ua=16186,da=16187,fa=16188,ha=16189,Ur=16190,Re=16191,Sn=16192,pa=16193,kn=16194,ga=16195,ma=16196,ya=16197,_a=16198,Pr=16199,Mr=16200,ba=16201,wa=16202,Ra=16203,xa=16204,Ea=16205,Tn=16206,va=16207,Sa=16208,C=16209,ri=16210,ni=16211,Pc=852,Mc=592,Oc=15,Ic=Oc,ka=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Nc(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var rt=e=>{if(!e)return 1;let r=e.state;return!r||r.strm!==e||r.mode<Fr||r.mode>ni?1:0},si=e=>{if(rt(e))return ae;let r=e.state;return e.total_in=e.total_out=r.total=0,e.msg="",r.wrap&&(e.adler=r.wrap&1),r.mode=Fr,r.last=0,r.havedict=0,r.flags=-1,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Int32Array(Pc),r.distcode=r.distdyn=new Int32Array(Mc),r.sane=1,r.back=-1,tt},ai=e=>{if(rt(e))return ae;let r=e.state;return r.wsize=0,r.whave=0,r.wnext=0,si(e)},ii=(e,r)=>{let t;if(rt(e))return ae;let n=e.state;return r<0?(t=0,r=-r):(t=(r>>4)+5,r<48&&(r&=15)),r&&(r<8||r>15)?ae:(n.window!==null&&n.wbits!==r&&(n.window=null),n.wrap=t,n.wbits=r,ai(e))},oi=(e,r)=>{if(!e)return ae;let t=new Nc;e.state=t,t.strm=e,t.window=null,t.mode=Fr;let n=ii(e,r);return n!==tt&&(e.state=null),n},Uc=e=>oi(e,Ic),Ta=!0,An,Dn,Wc=e=>{if(Ta){An=new Int32Array(512),Dn=new Int32Array(32);let r=0;for(;r<144;)e.lens[r++]=8;for(;r<256;)e.lens[r++]=9;for(;r<280;)e.lens[r++]=7;for(;r<288;)e.lens[r++]=8;for(Ht(Ya,e.lens,0,288,An,0,e.work,{bits:9}),r=0;r<32;)e.lens[r++]=5;Ht(Qa,e.lens,0,32,Dn,0,e.work,{bits:5}),Ta=!1}e.lencode=An,e.lenbits=9,e.distcode=Dn,e.distbits=5},li=(e,r,t,n)=>{let s,a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(r.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(s=a.wsize-a.wnext,s>n&&(s=n),a.window.set(r.subarray(t-n,t-n+s),a.wnext),n-=s,n?(a.window.set(r.subarray(t-n,t),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0},Cc=(e,r)=>{let t,n,s,a,i,o,d,l,u,_,g,f,m,x,b=0,w,v,p,h,S,I,y,M,A=new Uint8Array(4),E,T,j=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(rt(e)||!e.output||!e.input&&e.avail_in!==0)return ae;t=e.state,t.mode===Re&&(t.mode=Sn),i=e.next_out,s=e.output,d=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,l=t.hold,u=t.bits,_=o,g=d,M=tt;e:for(;;)switch(t.mode){case Fr:if(t.wrap===0){t.mode=Sn;break}for(;u<16;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,A[0]=l&255,A[1]=l>>>8&255,t.check=z(t.check,A,2,0),l=0,u=0,t.mode=aa;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",t.mode=C;break}if((l&15)!==sa){e.msg="unknown compression method",t.mode=C;break}if(l>>>=4,u-=4,y=(l&15)+8,t.wbits===0&&(t.wbits=y),y>15||y>t.wbits){e.msg="invalid window size",t.mode=C;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=l&512?ha:Re,l=0,u=0;break;case aa:for(;u<16;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(t.flags=l,(t.flags&255)!==sa){e.msg="unknown compression method",t.mode=C;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=C;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(A[0]=l&255,A[1]=l>>>8&255,t.check=z(t.check,A,2,0)),l=0,u=0,t.mode=ia;case ia:for(;u<32;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(A[0]=l&255,A[1]=l>>>8&255,A[2]=l>>>16&255,A[3]=l>>>24&255,t.check=z(t.check,A,4,0)),l=0,u=0,t.mode=oa;case oa:for(;u<16;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(A[0]=l&255,A[1]=l>>>8&255,t.check=z(t.check,A,2,0)),l=0,u=0,t.mode=la;case la:if(t.flags&1024){for(;u<16;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(A[0]=l&255,A[1]=l>>>8&255,t.check=z(t.check,A,2,0)),l=0,u=0}else t.head&&(t.head.extra=null);t.mode=ca;case ca:if(t.flags&1024&&(f=t.length,f>o&&(f=o),f&&(t.head&&(y=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(a,a+f),y)),t.flags&512&&t.wrap&4&&(t.check=z(t.check,n,f,a)),o-=f,a+=f,t.length-=f),t.length))break e;t.length=0,t.mode=ua;case ua:if(t.flags&2048){if(o===0)break e;f=0;do y=n[a+f++],t.head&&y&&t.length<65536&&(t.head.name+=String.fromCharCode(y));while(y&&f<o);if(t.flags&512&&t.wrap&4&&(t.check=z(t.check,n,f,a)),o-=f,a+=f,y)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=da;case da:if(t.flags&4096){if(o===0)break e;f=0;do y=n[a+f++],t.head&&y&&t.length<65536&&(t.head.comment+=String.fromCharCode(y));while(y&&f<o);if(t.flags&512&&t.wrap&4&&(t.check=z(t.check,n,f,a)),o-=f,a+=f,y)break e}else t.head&&(t.head.comment=null);t.mode=fa;case fa:if(t.flags&512){for(;u<16;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(t.wrap&4&&l!==(t.check&65535)){e.msg="header crc mismatch",t.mode=C;break}l=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=Re;break;case ha:for(;u<32;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}e.adler=t.check=ka(l),l=0,u=0,t.mode=Ur;case Ur:if(t.havedict===0)return e.next_out=i,e.avail_out=d,e.next_in=a,e.avail_in=o,t.hold=l,t.bits=u,Ac;e.adler=t.check=1,t.mode=Re;case Re:if(r===kc||r===Dr)break e;case Sn:if(t.last){l>>>=u&7,u-=u&7,t.mode=Tn;break}for(;u<3;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}switch(t.last=l&1,l>>>=1,u-=1,l&3){case 0:t.mode=pa;break;case 1:if(Wc(t),t.mode=Pr,r===Dr){l>>>=2,u-=2;break e}break;case 2:t.mode=ma;break;case 3:e.msg="invalid block type",t.mode=C}l>>>=2,u-=2;break;case pa:for(l>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",t.mode=C;break}if(t.length=l&65535,l=0,u=0,t.mode=kn,r===Dr)break e;case kn:t.mode=ga;case ga:if(f=t.length,f){if(f>o&&(f=o),f>d&&(f=d),f===0)break e;s.set(n.subarray(a,a+f),i),o-=f,a+=f,d-=f,i+=f,t.length-=f;break}t.mode=Re;break;case ma:for(;u<14;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(t.nlen=(l&31)+257,l>>>=5,u-=5,t.ndist=(l&31)+1,l>>>=5,u-=5,t.ncode=(l&15)+4,l>>>=4,u-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=C;break}t.have=0,t.mode=ya;case ya:for(;t.have<t.ncode;){for(;u<3;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}t.lens[j[t.have++]]=l&7,l>>>=3,u-=3}for(;t.have<19;)t.lens[j[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,E={bits:t.lenbits},M=Ht(Sc,t.lens,0,19,t.lencode,0,t.work,E),t.lenbits=E.bits,M){e.msg="invalid code lengths set",t.mode=C;break}t.have=0,t.mode=_a;case _a:for(;t.have<t.nlen+t.ndist;){for(;b=t.lencode[l&(1<<t.lenbits)-1],w=b>>>24,v=b>>>16&255,p=b&65535,!(w<=u);){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(p<16)l>>>=w,u-=w,t.lens[t.have++]=p;else{if(p===16){for(T=w+2;u<T;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(l>>>=w,u-=w,t.have===0){e.msg="invalid bit length repeat",t.mode=C;break}y=t.lens[t.have-1],f=3+(l&3),l>>>=2,u-=2}else if(p===17){for(T=w+3;u<T;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}l>>>=w,u-=w,y=0,f=3+(l&7),l>>>=3,u-=3}else{for(T=w+7;u<T;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}l>>>=w,u-=w,y=0,f=11+(l&127),l>>>=7,u-=7}if(t.have+f>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=C;break}for(;f--;)t.lens[t.have++]=y}}if(t.mode===C)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=C;break}if(t.lenbits=9,E={bits:t.lenbits},M=Ht(Ya,t.lens,0,t.nlen,t.lencode,0,t.work,E),t.lenbits=E.bits,M){e.msg="invalid literal/lengths set",t.mode=C;break}if(t.distbits=6,t.distcode=t.distdyn,E={bits:t.distbits},M=Ht(Qa,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,E),t.distbits=E.bits,M){e.msg="invalid distances set",t.mode=C;break}if(t.mode=Pr,r===Dr)break e;case Pr:t.mode=Mr;case Mr:if(o>=6&&d>=258){e.next_out=i,e.avail_out=d,e.next_in=a,e.avail_in=o,t.hold=l,t.bits=u,bc(e,g),i=e.next_out,s=e.output,d=e.avail_out,a=e.next_in,n=e.input,o=e.avail_in,l=t.hold,u=t.bits,t.mode===Re&&(t.back=-1);break}for(t.back=0;b=t.lencode[l&(1<<t.lenbits)-1],w=b>>>24,v=b>>>16&255,p=b&65535,!(w<=u);){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(v&&(v&240)===0){for(h=w,S=v,I=p;b=t.lencode[I+((l&(1<<h+S)-1)>>h)],w=b>>>24,v=b>>>16&255,p=b&65535,!(h+w<=u);){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}l>>>=h,u-=h,t.back+=h}if(l>>>=w,u-=w,t.back+=w,t.length=p,v===0){t.mode=Ea;break}if(v&32){t.back=-1,t.mode=Re;break}if(v&64){e.msg="invalid literal/length code",t.mode=C;break}t.extra=v&15,t.mode=ba;case ba:if(t.extra){for(T=t.extra;u<T;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=wa;case wa:for(;b=t.distcode[l&(1<<t.distbits)-1],w=b>>>24,v=b>>>16&255,p=b&65535,!(w<=u);){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if((v&240)===0){for(h=w,S=v,I=p;b=t.distcode[I+((l&(1<<h+S)-1)>>h)],w=b>>>24,v=b>>>16&255,p=b&65535,!(h+w<=u);){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}l>>>=h,u-=h,t.back+=h}if(l>>>=w,u-=w,t.back+=w,v&64){e.msg="invalid distance code",t.mode=C;break}t.offset=p,t.extra=v&15,t.mode=Ra;case Ra:if(t.extra){for(T=t.extra;u<T;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=C;break}t.mode=xa;case xa:if(d===0)break e;if(f=g-d,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=C;break}f>t.wnext?(f-=t.wnext,m=t.wsize-f):m=t.wnext-f,f>t.length&&(f=t.length),x=t.window}else x=s,m=i-t.offset,f=t.length;f>d&&(f=d),d-=f,t.length-=f;do s[i++]=x[m++];while(--f);t.length===0&&(t.mode=Mr);break;case Ea:if(d===0)break e;s[i++]=t.length,d--,t.mode=Mr;break;case Tn:if(t.wrap){for(;u<32;){if(o===0)break e;o--,l|=n[a++]<<u,u+=8}if(g-=d,e.total_out+=g,t.total+=g,t.wrap&4&&g&&(e.adler=t.check=t.flags?z(t.check,s,g,i-g):Jt(t.check,s,g,i-g)),g=d,t.wrap&4&&(t.flags?l:ka(l))!==t.check){e.msg="incorrect data check",t.mode=C;break}l=0,u=0}t.mode=va;case va:if(t.wrap&&t.flags){for(;u<32;){if(o===0)break e;o--,l+=n[a++]<<u,u+=8}if(t.wrap&4&&l!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=C;break}l=0,u=0}t.mode=Sa;case Sa:M=Tc;break e;case C:M=ei;break e;case ri:return ti;case ni:default:return ae}return e.next_out=i,e.avail_out=d,e.next_in=a,e.avail_in=o,t.hold=l,t.bits=u,(t.wsize||g!==e.avail_out&&t.mode<C&&(t.mode<Tn||r!==na))&&li(e,e.output,e.next_out,g-e.avail_out),_-=e.avail_in,g-=e.avail_out,e.total_in+=_,e.total_out+=g,t.total+=g,t.wrap&4&&g&&(e.adler=t.check=t.flags?z(t.check,s,g,e.next_out-g):Jt(t.check,s,g,e.next_out-g)),e.data_type=t.bits+(t.last?64:0)+(t.mode===Re?128:0)+(t.mode===Pr||t.mode===kn?256:0),(_===0&&g===0||r===na)&&M===tt&&(M=Dc),M},Fc=e=>{if(rt(e))return ae;let r=e.state;return r.window&&(r.window=null),e.state=null,tt},Lc=(e,r)=>{if(rt(e))return ae;let t=e.state;return(t.wrap&2)===0?ae:(t.head=r,r.done=!1,tt)},Bc=(e,r)=>{let t=r.length,n,s,a;return rt(e)||(n=e.state,n.wrap!==0&&n.mode!==Ur)?ae:n.mode===Ur&&(s=1,s=Jt(s,r,t,0),s!==n.check)?ei:(a=li(e,r,t,t),a?(n.mode=ri,ti):(n.havedict=1,tt))},zc=ai,jc=ii,Hc=si,qc=Uc,$c=oi,Vc=Cc,Zc=Fc,Jc=Lc,Xc=Bc,Gc="pako inflate (from Nodeca project)",Ee={inflateReset:zc,inflateReset2:jc,inflateResetKeep:Hc,inflateInit:qc,inflateInit2:$c,inflate:Vc,inflateEnd:Zc,inflateGetHeader:Jc,inflateSetDictionary:Xc,inflateInfo:Gc};function Kc(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Yc=Kc,ci=Object.prototype.toString,{Z_NO_FLUSH:Qc,Z_FINISH:eu,Z_OK:Kt,Z_STREAM_END:Pn,Z_NEED_DICT:Mn,Z_STREAM_ERROR:tu,Z_DATA_ERROR:Aa,Z_MEM_ERROR:ru}=bt;function tr(e){this.options=Cr.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});let r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(e&&e.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15)===0&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ga,this.strm.avail_out=0;let t=Ee.inflateInit2(this.strm,r.windowBits);if(t!==Kt)throw new Error(Qe[t]);if(this.header=new Yc,Ee.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=Gt.string2buf(r.dictionary):ci.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(t=Ee.inflateSetDictionary(this.strm,r.dictionary),t!==Kt)))throw new Error(Qe[t])}tr.prototype.push=function(e,r){let t=this.strm,n=this.options.chunkSize,s=this.options.dictionary,a,i,o;if(this.ended)return!1;for(r===~~r?i=r:i=r===!0?eu:Qc,ci.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),a=Ee.inflate(t,i),a===Mn&&s&&(a=Ee.inflateSetDictionary(t,s),a===Kt?a=Ee.inflate(t,i):a===Aa&&(a=Mn));t.avail_in>0&&a===Pn&&t.state.wrap>0&&e[t.next_in]!==0;)Ee.inflateReset(t),a=Ee.inflate(t,i);switch(a){case tu:case Aa:case Mn:case ru:return this.onEnd(a),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||a===Pn))if(this.options.to==="string"){let d=Gt.utf8border(t.output,t.next_out),l=t.next_out-d,u=Gt.buf2string(t.output,d);t.next_out=l,t.avail_out=n-l,l&&t.output.set(t.output.subarray(d,d+l),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(a===Kt&&o===0)){if(a===Pn)return a=Ee.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};tr.prototype.onData=function(e){this.chunks.push(e)};tr.prototype.onEnd=function(e){e===Kt&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Cr.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Zn(e,r){let t=new tr(r);if(t.push(e),t.err)throw t.msg||Qe[t.err];return t.result}function nu(e,r){return r=r||{},r.raw=!0,Zn(e,r)}var su=tr,au=Zn,iu=nu,ou=Zn,lu=bt,cu={Inflate:su,inflate:au,inflateRaw:iu,ungzip:ou,constants:lu},{Deflate:eh,deflate:th,deflateRaw:rh,gzip:nh}=yc,{Inflate:sh,inflate:ah,inflateRaw:ih,ungzip:uu}=cu;var Lr=uu;function ui(e){return"node"in e}var pu=":";var gu=new TextEncoder,mu=new TextDecoder("utf-8"),di={0:!1,1:!0,2:!0,64:!0,65:!0,66:!0,129:!0,193:!0,514:!0,577:!0,578:!0,705:!0,706:!0,1024:!0,1025:!0,1026:!0,1089:!0,1090:!0,1153:!0,1154:!0,1217:!0,1218:!0,4096:!0,4098:!0},Jn=class{constructor(r){this.fs=r}open(r){let t=this.fs.realPath(r.node);this.fs.FS.isFile(r.node.mode)&&(r.file=this.fs.API.get(t))}close(r){if(!this.fs.FS.isFile(r.node.mode)||!r.file)return;let t=this.fs.realPath(r.node),n=r.flags,s=typeof n=="string"?parseInt(n,10):n;s&=8191;let a=!0;s in di&&(a=di[s]),a&&this.fs.API.put(t,r.file),r.file=void 0}read(r,t,n,s,a){if(s<=0||r.file===void 0||a>=(r.file.data.length||0))return 0;let i=Math.min(r.file.data.length-a,s);return t.set(r.file.data.subarray(a,a+i),n),i}write(r,t,n,s,a){var i;if(s<=0||r.file===void 0)return 0;if(r.node.timestamp=Date.now(),a+s>(((i=r.file)===null||i===void 0?void 0:i.data.length)||0)){let o=r.file.data?r.file.data:new Uint8Array;r.file.data=new Uint8Array(a+s),r.file.data.set(o)}return r.file.data.set(t.subarray(n,n+s),a),s}llseek(r,t,n){let s=t;if(n===1)s+=r.position;else if(n===2&&this.fs.FS.isFile(r.node.mode))if(r.file!==void 0)s+=r.file.data.length;else throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EPERM);if(s<0)throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EINVAL);return s}},Xn=class{constructor(r){this.fs=r}node(r){return ui(r)?r.node:r}getattr(r){let t=this.node(r);return{...this.fs.API.getattr(this.fs.realPath(t)),mode:t.mode,ino:t.id}}setattr(r,t){let n=this.node(r);for(let[s,a]of Object.entries(t))switch(s){case"mode":n.mode=a;break;case"timestamp":n.timestamp=a;break;case"size":{let i=a,o=this.fs.realPath(n);if(this.fs.FS.isFile(n.mode)&&i>=0){let d=this.fs.API.get(o),l=d.data?d.data:new Uint8Array;i!==l.length&&(i<l.length?d.data=d.data.slice(0,i):(d.data=new Uint8Array(i),d.data.set(l)),this.fs.API.put(o,d))}else console.warn("setattr size of",i,"on",n,"not yet implemented");break}default:console.warn("setattr",s,"of",a,"on",n,"not yet implemented");break}}lookup(r,t){let n=this.node(r),s=this.fs.PATH.join2(this.fs.realPath(n),t),a=this.fs.API.lookup(s);if(!a.ok)throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.ENOENT);return this.fs.createNode(n,t,a.mode,0)}mknod(r,t,n,s){let a=this.node(r),i=this.fs.PATH.join2(this.fs.realPath(a),t);return this.fs.API.mknod(i,n),this.fs.createNode(a,t,n,s)}rename(r,t,n){let s=this.node(r),a=this.node(t);this.fs.API.rename(s.parent?this.fs.PATH.join2(this.fs.realPath(s.parent),s.name):s.name,this.fs.PATH.join2(this.fs.realPath(a),n)),s.name=n,s.parent=a}unlink(r,t){this.fs.API.rmdir(this.fs.PATH.join2(this.fs.realPath(this.node(r)),t))}rmdir(r,t){this.fs.API.rmdir(this.fs.PATH.join2(this.fs.realPath(this.node(r)),t))}readdir(r){return this.fs.API.readdir(this.fs.realPath(this.node(r)))}symlink(r,t,n){throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EPERM)}readlink(r){throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EPERM)}},Gn=class{constructor(r){this._driveName=r.driveName,this._mountpoint=r.mountpoint,this.FS=r.FS,this.ERRNO_CODES=r.ERRNO_CODES}lookup(r){return this.request({method:"lookup",path:this.normalizePath(r)})}getmode(r){return this.request({method:"getmode",path:this.normalizePath(r)})}mknod(r,t){return this.request({method:"mknod",path:this.normalizePath(r),data:{mode:t}})}rename(r,t){return this.request({method:"rename",path:this.normalizePath(r),data:{newPath:this.normalizePath(t)}})}readdir(r){let t=this.request({method:"readdir",path:this.normalizePath(r)});return t.push("."),t.push(".."),t}rmdir(r){return this.request({method:"rmdir",path:this.normalizePath(r)})}get(r){let t=this.request({method:"get",path:this.normalizePath(r)});if(!t)throw new this.FS.ErrnoError(this.ERRNO_CODES.ENOENT);let n=t.content,s=t.format;switch(s){case"json":case"text":return{data:gu.encode(n),format:s};case"base64":{let a=atob(n),i=a.length,o=new Uint8Array(i);for(let d=0;d<i;d++)o[d]=a.charCodeAt(d);return{data:o,format:s}}default:throw new this.FS.ErrnoError(this.ERRNO_CODES.ENOENT)}}put(r,t){switch(t.format){case"json":case"text":return this.request({method:"put",path:this.normalizePath(r),data:{format:t.format,data:mu.decode(t.data)}});case"base64":{let n="";for(let s=0;s<t.data.byteLength;s++)n+=String.fromCharCode(t.data[s]);return this.request({method:"put",path:this.normalizePath(r),data:{format:t.format,data:btoa(n)}})}}}getattr(r){let t=this.request({method:"getattr",path:this.normalizePath(r)});return t.atime&&(t.atime=new Date(t.atime)),t.mtime&&(t.mtime=new Date(t.mtime)),t.ctime&&(t.ctime=new Date(t.ctime)),t.size=t.size||0,t}normalizePath(r){return r.startsWith(this._mountpoint)&&(r=r.slice(this._mountpoint.length)),this._driveName&&(r=`${this._driveName}${pu}${r}`),r}},Kn=class extends Gn{constructor(r){super(r),this._baseUrl=r.baseUrl,this._browsingContextId=r.browsingContextId||""}request(r){let t=new XMLHttpRequest;t.open("POST",encodeURI(this.endpoint),!1);let n={data:r,browsingContextId:this._browsingContextId};try{t.send(JSON.stringify(n))}catch(s){console.error(s)}if(t.status>=400)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return JSON.parse(t.responseText)}get endpoint(){return`${this._baseUrl}api/drive`}},Br=class{constructor(r){this.FS=r.FS,this.PATH=r.PATH,this.ERRNO_CODES=r.ERRNO_CODES,this.API=this.createAPI(r),this.driveName=r.driveName,this.node_ops=new Xn(this),this.stream_ops=new Jn(this)}createAPI(r){if(!r.browsingContextId||!r.baseUrl)throw new Error("Cannot create service-worker API without current browsingContextId");return new Kn(r)}mount(r){return this.createNode(null,r.mountpoint,16895,0)}createNode(r,t,n,s){let a=this.FS;if(!a.isDir(n)&&!a.isFile(n))throw new a.ErrnoError(this.ERRNO_CODES.EINVAL);let i=a.createNode(r,t,n,s);return i.node_ops=this.node_ops,i.stream_ops=this.stream_ops,i}getMode(r){return this.API.getmode(r)}realPath(r){let t=[],n=r;for(t.push(n.name);n.parent!==n;)n=n.parent,t.push(n.name);return t.reverse(),this.PATH.join.apply(null,t)}};function fi(e,r,t){if(e!==c.FS.filesystems.WORKERFS)return c.FS._mount(e,r,t);if("packages"in r&&r.packages)r.packages.forEach(n=>{rr(n.blob,n.metadata,t)});else throw new Error("Can't mount data. You must use the `packages` key when mounting with `WORKERFS` in webR.")}function Yn(e,r){let t=location.origin+"/",n=new Br({FS:globalThis.FS,PATH:globalThis.PATH,ERRNO_CODES:globalThis.ERRNO_CODES,baseUrl:t,driveName:r?.driveName||"",mountpoint:e,browsingContextId:r?.browsingContextId||""});n.node_ops.readdir=n.node_ops.readdir.bind(n.node_ops),n.node_ops.getattr=n.node_ops.getattr.bind(n.node_ops),n.node_ops.setattr=n.node_ops.setattr.bind(n.node_ops),c.FS.mount(n,{},e)}function hi(e,r){if(/\.tgz$|\.tar\.gz$|\.tar$/.test(e)){let t=c.downloadFileContent(e);if(t.status<200||t.status>=300)throw new Error("Can't download Emscripten filesystem image.");let{data:n,metadata:s}=gi(t.response);rr(n,s,r)}else{let t=e.replace(/\.data\.gz$|\.data$|\.js.metadata$/,""),n=c.downloadFileContent(`${t}.js.metadata`);if(n.status<200||n.status>=300)throw new Error("Can't download Emscripten filesystem image metadata.");let s=JSON.parse(new TextDecoder().decode(n.response)),a=s.gzip?".data.gz":".data",i=c.downloadFileContent(`${t}${a}`);if(i.status<200||i.status>=300)throw new Error("Can't download Emscripten filesystem image data.");let o=i.response;s.gzip&&(o=Lr(o).buffer),rr(o,s,r)}}function pi(e,r){let t=Q("fs");if(/\.tgz$|\.tar\.gz$|\.tar$/.test(e)){let n=t.readFileSync(e),{data:s,metadata:a}=gi(n);rr(s,a,r)}else{let n=e.replace(/\.data\.gz$|\.data$|\.js.metadata$/,""),s=JSON.parse(t.readFileSync(`${n}.js.metadata`,"utf8")),a=s.gzip?".data.gz":".data",i=t.readFileSync(`${n}${a}`),o=new Uint8Array(i).buffer;s.gzip&&(o=Lr(o).buffer),rr(o,s,r)}}function rr(e,r,t){if(L){let n=Buffer.from(e),s=c.FS.filesystems.WORKERFS;s.reader||(s.reader={readAsArrayBuffer:a=>new Uint8Array(a).buffer}),r.files.forEach(a=>{let i=n.subarray(a.start,a.end);i.size=i.byteLength,i.slice=(_,g)=>{let f=i.subarray(_,g);return f.size=f.byteLength,f};let o=(t+a.filename).split("/"),d=o.pop();if(!d)throw new Error(`Invalid mount path "${t}${a.filename}".`);let l=o.join("/");c.FS.mkdirTree(l);let u=c.FS.lookupPath(l,{}).node;s.createNode(u,d,s.FILE_MODE,0,i)})}else c.FS._mount(c.FS.filesystems.WORKERFS,{packages:[{blob:new Blob([e]),metadata:r}]},t)}function gi(e){let r=Lr(new Uint8Array(e)).buffer,t=yu(r)||_u(r);if(!t)throw new Error("Can't mount archive, no VFS metadata found.");let n=new DataView(r,512*t.block,t.len),s=JSON.parse(new TextDecoder().decode(n));return{data:r,metadata:s}}function yu(e){let r=new DataView(e),t=r.getInt32(r.byteLength-16),n=r.getInt32(r.byteLength-8),s=r.getInt32(r.byteLength-4);return t!==2003133010||n===0||s===0?null:{block:n,len:s}}function _u(e){let r=new TextDecoder,t=0;for(;t<e.byteLength;){let n=e.slice(t,t+512);if(t+=512,new Uint8Array(n).every(o=>o===0))return null;let s=r.decode(n.slice(156,157));if(/5|g|[A-Z]/.test(s))continue;let a=r.decode(n.slice(0,100)).replace(/\0+$/,""),i=parseInt(r.decode(n.slice(124,136)),8);if(a==".vfs-index.json")return{block:t/512,len:i};t+=512*Math.ceil(i/512)}return null}var bi=!1,wi=!1,N;Object.assign(globalThis,{RCall:le,RCharacter:oe,RComplex:it,RDataFrame:je,RDouble:qe,REnvironment:te,RInteger:Pt,RList:ce,RLogical:re,RObject:R,RPairlist:ze,RRaw:ot,RString:He,RSymbol:B,destroy:qr,getRWorkerClass:Mt,initPersistentObjects:Vr,isRObject:$e,keep:Ze,objs:W,purge:$r,shelters:ke});var Ri=function(e){if(!(!e||!e.type)){if(e.type==="init"){if(bi)throw new Error("Can't initialise worker multiple times.");let r=e;N=qs(r),r.data.config.channelType=r.data.channelType,vu(r.data.config),bi=!0;return}N?.resolveRequest(e)}};L?(Q("worker_threads").parentPort.on("message",Ri),globalThis.XMLHttpRequest=_i().XMLHttpRequest):globalThis.onmessage=e=>Ri(e.data);var X;function wu(e){switch(e.type){case"request":{let r=e,t=r.data.msg,n=(s,a)=>N?.write(gn(r.data.uuid,{type:"payload",data:s},a));try{switch(t.type){case"analyzePath":{let s=t,a=c.FS.analyzePath(s.data.path,s.data.dontResolveLastLink),i={isRoot:a.isRoot,exists:a.exists,error:a.error,name:a.name,path:a.path,parentExists:a.parentExists,parentPath:a.parentPath,object:a.exists?Et(a.object):void 0,parentObject:a.parentExists?Et(a.parentObject):void 0};n({obj:i,payloadType:"raw"});break}case"lookupPath":{let s=t,a=c.FS.lookupPath(s.data.path,{}).node;n({obj:Et(a),payloadType:"raw"});break}case"mkdir":{let s=t;n({obj:Et(c.FS.mkdir(s.data.path)),payloadType:"raw"});break}case"mount":{let s=t,a=s.data.type,i=s.data.mountpoint;if(a==="IDBFS"&&X.channelType==ft.SharedArrayBuffer)throw new Error("The `IDBFS` filesystem type is not supported under the `SharedArrayBuffer` communication channel. The `PostMessage` communication channel must be used.");if(a==="DRIVEFS"){let o=s.data.options;Yn(i,o)}else{let o=c.FS.filesystems[a];c.FS.mount(o,s.data.options,i)}n({obj:null,payloadType:"raw"});break}case"syncfs":{let s=t;c.FS.syncfs(s.data.populate,a=>{if(a)throw new Error(`Emscripten \`syncfs\` error: "${a}".`);n({obj:null,payloadType:"raw"})});break}case"readFile":{let a=t.data,i={obj:c.FS.readFile(a.path,{encoding:"binary",flags:a.flags}),payloadType:"raw"};n(i,[i.obj.buffer]);break}case"rename":{let s=t;n({obj:c.FS.rename(s.data.oldpath,s.data.newpath),payloadType:"raw"});break}case"rmdir":{let s=t;n({obj:c.FS.rmdir(s.data.path),payloadType:"raw"});break}case"writeFile":{let a=t.data,i=Uint8Array.from(Object.values(a.data));n({obj:c.FS.writeFile(a.path,i,{flags:a.flags}),payloadType:"raw"});break}case"unlink":{let s=t;n({obj:c.FS.unlink(s.data.path),payloadType:"raw"});break}case"unmount":{let s=t;n({obj:c.FS.unmount(s.data.path),payloadType:"raw"});break}case"newShelter":{let s=_e();ke.set(s,[]),n({payloadType:"raw",obj:s});break}case"shelterSize":{let s=t,a=ke.get(s.data).length;n({payloadType:"raw",obj:a});break}case"shelterPurge":{$r(t.data),n({payloadType:"raw",obj:null});break}case"shelterDestroy":{let s=t;qr(s.data.id,s.data.obj.obj.ptr),n({payloadType:"raw",obj:null});break}case"captureR":{let a=t.data,i=a.shelter,o={n:0};try{let d=es(a.code,a.options);D(d.result,o),D(d.output,o);let l=d.result;Ze(i,l);let u=d.output.length,_=[];for(let f=1;f<u+1;++f){let m=d.output.get(f),x=m.pluck(1,1).toString(),b=m.get(2);if(x==="stdout"||x==="stderr"){let w=b.toString();_.push({type:x,data:w})}else{Ze(i,b);let w={obj:{ptr:b.ptr,type:b.type(),methods:R.getMethods(b)},payloadType:"ptr"};_.push({type:x,data:w})}}let g={payloadType:"ptr",obj:{ptr:l.ptr,type:l.type(),methods:R.getMethods(l)}};n({payloadType:"raw",obj:{result:g,output:_,images:d.images}})}finally{U(o.n)}break}case"evalR":{let s=t,a=nr(s.data.code,s.data.options);Ze(s.data.shelter,a),n({obj:{type:a.type(),ptr:a.ptr,methods:R.getMethods(a)},payloadType:"ptr"});break}case"evalRRaw":{let s=t,a=nr(s.data.code,s.data.options);Le(a);let i=()=>{throw new Error(`Can't convert object of type ${a.type()} to ${s.data.outputType}.`)};try{let o;switch(s.data.outputType){case"void":break;case"boolean":switch(a.type()){case"logical":o=a.toBoolean();break;default:i()}break;case"boolean[]":switch(a.type()){case"logical":o=a.toArray(),o.some(d=>d===null)&&i();break;default:i()}break;case"number":switch(a.type()){case"logical":o=a.toBoolean(),o=Number(o);break;case"integer":o=a.toNumber();break;case"double":o=a.toNumber();break;default:i()}break;case"number[]":switch(a.type()){case"logical":o=a.toArray(),o=o.map(d=>d===null?i():Number(d));break;case"integer":o=a.toArray(),o.some(d=>d===null)&&i();break;case"double":o=a.toArray(),o.some(d=>d===null)&&i();break;default:i()}break;case"string":switch(a.type()){case"character":o=a.toString();break;default:i()}break;case"string[]":switch(a.type()){case"character":o=a.toArray(),o.some(d=>d===null)&&i();break;default:i()}break;default:throw new Error("Unexpected output type in `evalRRaw().")}n({obj:o,payloadType:"raw"});break}finally{U(1)}}case"newRObject":{let s=t,a=xu(s.data.args,s.data.objType);Ze(s.data.shelter,a.obj.ptr),n(a);break}case"callRObjectMethod":{let a=t.data,i=a.payload?R.wrap(a.payload.obj.ptr):R,o=Eu(i,a.prop,a.args);Ct(o)&&Ze(a.shelter,o.obj.ptr),n(o);break}case"invokeWasmFunction":{let s=t,a=c.getWasmTableEntry(s.data.ptr)(...s.data.args);n({payloadType:"raw",obj:a});break}case"installPackages":{let s=t,a=s.data.name,i=s.data.options.repos?s.data.options.repos:X.repoUrl;typeof a=="string"&&(a=[a]),typeof i=="string"&&(i=[i]),nr(`webr::install(
              c(${a.map(o=>'"'+o+'"').join(",")}),
              repos = c(${i.map(o=>'"'+o+'"').join(",")}),
              quiet = ${s.data.options.quiet?"TRUE":"FALSE"},
              mount = ${s.data.options.mount?"TRUE":"FALSE"}
            )`),n({obj:!0,payloadType:"raw"});break}default:throw new Error("Unknown event `"+t.type+"`")}}catch(s){let a=s,i={name:a.name,message:a.message,errno:a.errno,stack:a.stack};n({payloadType:"err",obj:i}),a instanceof nt&&(c._R_ContinueUnwind(a.cont),ir())}break}default:throw new Error("Unknown event `"+e.type+"`")}}function Et(e){let r={id:e.id,name:e.name,mode:e.mode,isFolder:e.isFolder,mounted:null,contents:{}};return e.isFolder&&e.contents&&(r.contents=Object.fromEntries(Object.entries(e.contents).map(([t,n])=>[t,Et(n)]))),e.mounted!==null&&(r.mounted={mountpoint:e.mounted.mountpoint,root:Et(e.mounted.root)}),r}function Ru(e,r=[]){let t=new XMLHttpRequest;t.open("GET",e,!1),t.responseType="arraybuffer";try{r.forEach(n=>{let s=n.split(": ");t.setRequestHeader(s[0],s[1])})}catch{let n="An error occurred setting headers in XMLHttpRequest";return console.error(n),{status:400,response:n}}try{t.send(null);let n=L?JSON.parse(String(t.status)).data.statusCode:t.status;if(n>=200&&n<300)return{status:n,response:t.response};{let s=new TextDecoder().decode(t.response);return console.error(`Error fetching ${e} - ${s}`),{status:n,response:s}}}catch{return{status:400,response:"An error occurred in XMLHttpRequest"}}}function xu(e,r){let t=Mt(r),n=Je(e,Ct,a=>R.wrap(a.obj.ptr)),s=new t(...n);return{obj:{type:s.type(),ptr:s.ptr,methods:R.getMethods(s)},payloadType:"ptr"}}function Eu(e,r,t){if(!(r in e))throw new ReferenceError(`${r} is not defined`);let n=e[r];if(typeof n!="function")throw Error("Requested property cannot be invoked");let s=n.apply(e,t.map(i=>i.payloadType==="ptr"?R.wrap(i.obj.ptr):Je(i.obj,Ct,o=>R.wrap(o.obj.ptr))));return{obj:Je(s,$e,i=>({obj:{type:i.type(),ptr:i.ptr,methods:R.getMethods(i)},payloadType:"ptr"})),payloadType:"raw"}}function es(e,r={}){let t=Object.assign({env:W.globalEnv,captureStreams:!0,captureConditions:!0,captureGraphics:typeof OffscreenCanvas<"u",withAutoprint:!1,throwJsException:!0,withHandlers:!0},Je(r,Ct,a=>R.wrap(a.obj.ptr))),n={n:0},s=new te({});D(s,n),c.setValue(c._R_Interactive,0,"i8");try{let a=new te(t.env);if(D(a,n),a.type()!=="environment")throw new Error("Attempted to evaluate R code with invalid environment object");if(t.captureGraphics){if(typeof OffscreenCanvas>"u")throw new Error("This environment does not have support for OffscreenCanvas. Consider disabling plot capture using `captureGraphics: false`.");s.bind("canvas_options",new ce(Object.assign({capture:!0},t.captureGraphics))),ye(`{
        old_dev <- dev.cur()
        do.call(webr::canvas, canvas_options)
        new_dev <- dev.cur()
        old_cache <- webr::canvas_cache()
        plots <- numeric()
      }`,s)}let i=W.true.ptr,o=W.false.ptr,d=ye("webr::eval_r",W.baseEnv),l=ye("quote",W.baseEnv);D(d,n),D(l,n);let u=new R(e);D(u,n);let _=c._Rf_lang6(d.ptr,c._Rf_lang2(l.ptr,u.ptr),t.captureConditions?i:o,t.captureStreams?i:o,t.withAutoprint?i:o,t.withHandlers?i:o);D(_,n);let g=ce.wrap(Be(_,a));if(D(g,n),t.captureConditions&&t.throwJsException){let x=g.get("output").toArray().find(b=>b.get("type").toString()==="error");if(x){let b=x.pluck("data","call"),w=b&&b.type()==="call"?`\`${b.deparse()}\``:"unknown source",v=x.pluck("data","message")?.toString()||"An error occurred evaluating R code.";throw new Error(`Error in ${w}: ${v}`)}}let f=[];if(t.captureGraphics){let m=ye(`{
        new_cache <- webr::canvas_cache()
        plots <- setdiff(new_cache, old_cache)
      }`,s);D(m,n),f=m.toArray().map(x=>c.webr.canvas[x].offscreen.transferToImageBitmap())}return{result:g.get("result"),output:g.get("output"),images:f}}finally{c.setValue(c._R_Interactive,X.interactive?1:0,"i8");let a=s.get("new_dev");t.captureGraphics&&a.type()!=="null"&&ye(`{
        dev.off(new_dev)
        dev.set(old_dev)
        webr::canvas_destroy(plots)
      }`,s),U(n.n)}}function nr(e,r={}){r=Object.assign({captureGraphics:!1},r);let t={n:0},n=es(e,r);try{D(n.output,t),D(n.result,t);for(let s=1;s<=n.output.length;s++){let a=n.output.get(s),i=a.get("type").toString();switch(i){case"stdout":N?.writeSystem({type:"console.log",data:a.get("data").toString()});break;case"stderr":N?.writeSystem({type:"console.warn",data:a.get("data").toString()});break;case"message":N?.writeSystem({type:"console.warn",data:a.pluck("data","message")?.toString()||""});break;case"warning":N?.writeSystem({type:"console.warn",data:`Warning message: 
${a.pluck("data","message")?.toString()||""}`});break;default:N?.writeSystem({type:"console.warn",data:`Output of type ${i}:`}),N?.writeSystem({type:"console.warn",data:a.get("data").toJs()});break}}return n.result}finally{U(t.n)}}function vu(e){X=e;let r={...e.REnv};if(!r.TZ){let t=new Intl.DateTimeFormat;r.TZ=t.resolvedOptions().timeZone}c.preRun=[],c.arguments=X.RArgs,c.noExitRuntime=!0,c.noImageDecoding=!0,c.noAudioDecoding=!0,c.noInitialRun=!0,c.noWasmDecoding=!0,c.preRun.push(()=>{L&&(globalThis.FS=c.FS,globalThis.chan=N),X.createLazyFilesystem&&c.createLazyFilesystem(),c.FS.mkdirTree(X.homedir),c.ENV.HOME=X.homedir,c.FS.chdir(X.homedir),c.ENV=Object.assign(c.ENV,r),c.FS._mount=c.FS.mount,c.FS.mount=fi}),N?.setDispatchHandler(wu),c.onRuntimeInitialized=()=>{N?.run(X.RArgs)},c.webr={UnwindProtectException:nt,evalR:nr,captureR:es,channel:N,canvas:{},resolveInit:()=>{Vr(),N?.setInterrupt(c._Rf_onintr),c.setValue(c._R_Interactive,X.interactive?1:0,"i8"),nr(`options(webr_pkg_repos="${X.repoUrl}")`),N?.resolve(),wi=!0},setPrompt:t=>{N?.write({type:"prompt",data:t})},readConsole:()=>{if(!N)throw new Error("Can't read console input without a communication channel");return wi||c.webr.resolveInit(),N.inputOrDispatch()},handleEvents:()=>{N?.handleEvents()},dataViewer:(t,n)=>{let s=ce.wrap(t).toObject({depth:0});N?.write({type:"view",data:{data:s,title:n}})},evalJs:(t,n=!1)=>{try{let s=null;if(n){let a=N?.syncRequest({type:"eval-await",data:c.UTF8ToString(t)});if(a){if(a.data.error)throw new Error(a?.data.error);s=a?.data.result}else throw new Error("Empty sync response for `evalJs`.")}else s=(0,eval)(c.UTF8ToString(t));return new R(s).ptr}catch(s){if(s instanceof nt)c._R_ContinueUnwind(s.cont),ir();else if(s===1/0)throw s;let a=c.allocateUTF8OnStack(`An error occurred during JavaScript evaluation:
  ${s.message}`);c._Rf_error(a)}return ir(),0},setTimeoutWasm:(t,n,...s)=>{N?.writeSystem({type:"setTimeoutWasm",data:{ptr:t,delay:n,args:s}})}},c.locateFile=t=>X.baseUrl+t,c.downloadFileContent=Ru,c.mountImageUrl=hi,c.mountImagePath=pi,c.mountDriveFS=Yn,c.print=t=>{N?.write({type:"stdout",data:t})},c.printErr=t=>{N?.write({type:"stderr",data:t})},globalThis.Module=c,N?.WebSocketProxy&&(globalThis.WebSocket=N.WebSocketProxy),N?.WorkerProxy&&(globalThis.Worker=N.WorkerProxy),setTimeout(()=>{let t=`${X.baseUrl}R.js`;Tt(t)})}})();
/*! Bundled license information:

xmlhttprequest-ssl/lib/XMLHttpRequest.js:
  (**
   * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.
   *
   * This can be used with JS designed for browsers to improve reuse of code and
   * allow the use of existing libraries.
   *
   * Usage: include("XMLHttpRequest.js") and use XMLHttpRequest per W3C specs.
   *
   * @author Dan DeFelippi <dan@driverdan.com>
   * @contributor David Ellis <d.f.ellis@ieee.org>
   * @license MIT
   *)

pako/dist/pako.esm.mjs:
  (*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) *)
*/
//# sourceMappingURL=webr-worker.js.map
