import{_ as F,u as I,r as c,c as o,j as l,d as e,g as k,t as i,e as b,h as L,q as T,n as B,i as W,b as $,F as A,f as D}from"./index-DDXOat2P.js";import H from"./MonacoEditor-NmHOSzWw.js";import"./monaco-editor-CGO6wXTd.js";const U={class:"flex flex-col md:flex-row h-full"},G={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col border-b md:border-b-0 md:border-r border-slate-700"},O={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700 bg-slate-800/50"},P={class:"flex items-center gap-4"},Y={class:"flex items-center gap-2"},J={key:0,class:"text-xs px-2 py-0.5 bg-emerald-600 text-white rounded-full"},K={key:1,class:"text-xs px-2 py-0.5 bg-slate-600 text-slate-300 rounded-full"},Q={class:"relative group"},X=["disabled"],Z={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ee={key:1,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},te={class:"flex-1 min-h-0"},se={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col bg-slate-900"},oe={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700"},le={class:"flex items-center gap-3"},re={class:"text-xs font-bold text-slate-400 uppercase tracking-wider"},ae={key:0,class:"text-xs text-slate-500"},ne={key:0,class:"flex-1 flex items-center justify-center"},ue={class:"text-center space-y-4"},ie={class:"text-slate-400"},de={key:1,class:"flex-1 overflow-y-auto p-4 font-mono text-sm space-y-1"},ce={key:0,class:"text-red-400"},me={key:1,class:"text-green-400"},pe={class:"whitespace-pre-wrap"},ve={key:0,class:"text-slate-500 italic"},ye={__name:"RubyRunner",emits:["output","error","ready"],setup(be,{emit:V}){const{t:m}=I(),R=V,g={hello:`# Ruby code runs in your browser with ruby-wasm
# No server required!

puts "Hello from Ruby #{RUBY_VERSION}!"`,math:`# Basic math
numbers = (1..100).to_a
sum = numbers.sum
puts "Sum of 1 to 100: #{sum}"

puts "Square root of 25: #{Math.sqrt(25)}"`,blocks:`# Blocks and iterators
squares = 1.upto(10).map { |x| x**2 }
puts "Squares: #{squares.inspect}"

3.times { puts "Ruby is fun!" }`,class:`# Class example
class Greeter
  def initialize(name)
    @name = name
  end

  def greet
    "Greetings, #{@name}!"
  end
end

puts Greeter.new("Developer").greet`},x=c(g.hello),f=c("hello"),n=c([]),u=c(!1),_=c(!1),w=c(""),v=c(null);let p=null;const E=async()=>{if(p)return p;if(window.rubyVM)return p=window.rubyVM,_.value=!0,p;u.value=!0,w.value=m("tools.code-playground.ruby.loading");try{const s="/tools/",t=`${s.endsWith("/")?s:s+"/"}ruby-wasm/`;if(await new Promise((M,N)=>{if(window["ruby-wasm-wasi"])return M();const h=document.createElement("script");h.src=`${t}browser.umd.js`,h.onload=M,h.onerror=()=>N(new Error("Failed to load browser.umd.js")),document.head.appendChild(h)}),!window["ruby-wasm-wasi"])throw new Error('Ruby WASM script loaded but window["ruby-wasm-wasi"] not found');w.value="Initializing Ruby environment...";const{DefaultRubyVM:r}=window["ruby-wasm-wasi"],d=await fetch(`${t}ruby+stdlib.wasm`);if(!d.ok)throw new Error(`Failed to fetch ruby+stdlib.wasm: ${d.statusText}`);const a=await d.arrayBuffer(),y=await WebAssembly.compile(a),{vm:C}=await r(y);return p=C,window.rubyVM=C,_.value=!0,R("ready"),p}catch(s){throw n.value.push({type:"error",message:`Failed to load Ruby: ${s.message}`}),console.error(s),s}finally{u.value=!1,w.value=""}},j=()=>{g[f.value]&&(x.value=g[f.value])},S=async()=>{n.value=[],v.value=null;try{const s=console.log,t=console.error;console.log=(...a)=>{s(...a);const y=a.join(" ");n.value.push({type:"log",message:y})},console.error=(...a)=>{t(...a);const y=a.join(" ");n.value.push({type:"error",message:y})};const r=performance.now();try{(await E()).eval(x.value)}catch(a){n.value.push({type:"error",message:a.toString()})}finally{console.log=s,console.error=t}const d=performance.now();v.value=(d-r).toFixed(2)}catch(s){n.value.push({type:"error",message:s.message}),R("error",s)}},q=()=>{n.value=[],v.value=null},z=s=>s==="error"?"text-red-400":"text-blue-400";return(s,t)=>(l(),o("div",U,[e("div",G,[e("div",O,[e("div",P,[e("div",Y,[t[2]||(t[2]=e("svg",{class:"w-5 h-5 text-red-500",viewBox:"0 0 128 128",fill:"currentColor"},[e("path",{d:"M3.802 99.828c.656 23.608 17.689 23.959 24.945 24.167l-16.759-39.14-8.186 14.973z"}),e("path",{d:"M4.981 65.131l6.987 19.821 30.365-6.812L77 45.922l9.783-31.075L71.38 3.969l-26.19 9.802c-8.252 7.675-24.263 22.86-24.84 23.146-.573.291-10.575 19.195-15.369 28.214z"})],-1)),t[3]||(t[3]=e("span",{class:"font-bold text-white"},"Ruby 3.4",-1)),_.value?(l(),o("span",J,i(b(m)("tools.code-playground.common.ready")),1)):u.value?k("",!0):(l(),o("span",K,i(b(m)("tools.code-playground.common.not_loaded","Not loaded")),1))]),e("div",Q,[L(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>f.value=r),onChange:j,class:"appearance-none bg-slate-700/50 border border-slate-600 text-slate-200 text-xs rounded px-2 pr-6 py-1 hover:border-slate-500 focus:outline-none focus:ring-1 focus:ring-red-500 transition-all cursor-pointer"},[...t[4]||(t[4]=[e("option",{value:"hello"},"Hello World",-1),e("option",{value:"math"},"Basic Math",-1),e("option",{value:"blocks"},"Blocks & Iterators",-1),e("option",{value:"class"},"Class Example",-1)])],544),[[T,f.value]]),t[5]||(t[5]=e("div",{class:"absolute inset-y-0 right-1.5 flex items-center pointer-events-none text-slate-400"},[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),e("button",{onClick:S,disabled:u.value,class:B(["px-4 py-1.5 rounded-lg font-medium text-sm transition-colors flex items-center gap-2",u.value?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-500 text-white"])},[u.value?(l(),o("svg",Z,[...t[6]||(t[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(l(),o("svg",ee,[...t[7]||(t[7]=[e("path",{d:"M8 5v14l11-7z"},null,-1)])])),W(" "+i(u.value?"Loading...":b(m)("tools.code-playground.common.run")),1)],10,X)]),e("div",te,[$(H,{modelValue:x.value,"onUpdate:modelValue":t[1]||(t[1]=r=>x.value=r),language:"ruby",theme:"vs-dark",height:"100%",minimap:!1},null,8,["modelValue"])])]),e("div",se,[e("div",oe,[e("div",le,[e("span",re,i(b(m)("tools.code-playground.common.output")),1),v.value?(l(),o("span",ae,i(v.value)+"ms",1)):k("",!0)]),e("button",{onClick:q,class:"text-xs text-slate-500 hover:text-white transition-colors"},i(b(m)("tools.code-playground.common.clear")),1)]),u.value?(l(),o("div",ne,[e("div",ue,[t[8]||(t[8]=e("div",{class:"w-12 h-12 border-4 border-rose-500 border-t-transparent rounded-full animate-spin mx-auto"},null,-1)),e("div",ie,i(w.value),1),t[9]||(t[9]=e("div",{class:"text-xs text-slate-500"},"Initializing Ruby WASM...",-1))])])):(l(),o("div",de,[(l(!0),o(A,null,D(n.value,(r,d)=>(l(),o("div",{key:d,class:B(["flex items-start gap-2",z(r.type)])},[r.type==="error"?(l(),o("span",ce,"✗")):(l(),o("span",me,"›")),e("span",pe,i(r.message),1)],2))),128)),n.value.length===0&&!u.value?(l(),o("div",ve,' Click "Run" to execute Ruby code... ')):k("",!0)]))])]))}},he=F(ye,[["__scopeId","data-v-8d5981e9"]]);export{he as default};
