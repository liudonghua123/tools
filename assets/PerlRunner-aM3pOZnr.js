import{u as j,r as w,o as E,c as o,j as r,d as s,g as b,t as d,e as g,n as P,i as V,b as N,F as S,f as T}from"./index-hxKMd8CD.js";import W from"./MonacoEditor-D13muXM5.js";import"./monaco-editor-CGO6wXTd.js";const F={class:"flex flex-col md:flex-row h-full"},M={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col border-b md:border-b-0 md:border-r border-slate-700"},q={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700 bg-slate-800/50"},I={class:"flex items-center gap-2"},L={key:0,class:"text-xs px-2 py-0.5 bg-emerald-600 text-white rounded-full"},O={key:1,class:"text-xs px-2 py-0.5 bg-slate-600 text-slate-300 rounded-full"},A=["disabled"],H={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},U={key:1,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},D={class:"flex-1 min-h-0"},G={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col bg-slate-900"},J={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700"},K={class:"flex items-center gap-3"},Q={class:"text-xs font-bold text-slate-400 uppercase tracking-wider"},X={key:0,class:"text-xs text-slate-500"},Y={key:0,class:"flex-1 flex items-center justify-center"},Z={class:"text-center space-y-4"},ee={class:"text-slate-400"},te={key:1,class:"flex-1 overflow-y-auto p-4 font-mono text-sm space-y-1"},se={key:0,class:"text-red-400"},oe={key:1,class:"text-indigo-400"},re={class:"whitespace-pre-wrap"},le={key:0,class:"text-slate-500 italic"},ue={__name:"PerlRunner",emits:["output","error","ready"],setup(ne,{emit:k}){const{t:c}=j(),_=k,y=w(`# Perl code runs in your browser with WebPerl
# No server required!

print "Hello from Perl $^V!\\n";

# Basic math
my $sum = 0;
$sum += $_ for (1..100);
print "Sum of 1 to 100: $sum\\n";

# Array operations
my @fruits = ("Apple", "Banana", "Cherry");
print "Fruits: ", join(", ", @fruits), "\\n";

# Map example
my @squares = map { $_ * $_ } (1..10);
print "Squares: @squares\\n";

# Subroutine example
sub greet {
    my $name = shift;
    return "Greetings, $name!";
}

print greet("Developer"), "\\n";
`),l=w([]),n=w(!1),f=w(!1),h=w(""),v=w(null),$=async()=>{if(window.Perl&&window.Perl.state==="Ready")return f.value=!0,window.Perl;if(window.Perl&&window.Perl.state==="Initializing")return new Promise(e=>{const t=()=>{window.Perl.state==="Ready"?(f.value=!0,e(window.Perl)):setTimeout(t,100)};t()});n.value=!0,h.value=c("tools.code-playground.perl.loading");try{const e="/tools/",t=`${e.endsWith("/")?e:e+"/"}webperl/`;if(await new Promise((i,m)=>{const u=document.createElement("script");u.src=`${t}webperl.js`,u.onload=()=>{typeof window<"u"&&(window.getScriptURL=(function(){for(var p=document.getElementsByTagName("script"),x=p.length-1;x>=0;x--)if(p[x].src&&p[x].src.indexOf("webperl.js")!==-1)return function(){return p[x].src};var B=p[p.length-1];return function(){return B.src}})()),i()},u.onerror=()=>m(new Error("Failed to load webperl.js")),document.head.appendChild(u)}),!window.Perl)throw new Error("WebPerl script loaded but window.Perl not found");window.Perl.trace=!0;const a=window.Perl.output;return window.Perl.output=(i,m)=>{typeof a=="function"&&a.call(window.Perl,i,m);const u=m===2?"error":"log";l.value.length>0&&l.value[l.value.length-1].type===u?l.value[l.value.length-1].message+=i:l.value.push({type:u,message:i})},new Promise((i,m)=>{console.log("Initializing WebPerl..."),window.Perl.init(()=>{console.log("WebPerl is Ready!"),f.value=!0,n.value=!1,h.value="",_("ready"),i(window.Perl)}),setTimeout(()=>{f.value||m(new Error("WebPerl initialization timed out"))},3e4)})}catch(e){throw l.value.push({type:"error",message:`Failed to load Perl: ${e.message}`}),console.error(e),n.value=!1,h.value="",e}},C=async()=>{l.value=[],v.value=null;try{const e=await $(),t=performance.now();if(e.state!=="Ready"&&e.state!=="Running")throw new Error(`Perl is in state ${e.state}, cannot run code.`);e.state==="Ready"&&e.start([]),e.eval(`$|=1;${y.value}`);const a=performance.now();v.value=(a-t).toFixed(2)}catch(e){l.value.push({type:"error",message:e.message}),_("error",e)}},R=()=>{l.value=[],v.value=null},z=e=>e==="error"?"text-red-400":"text-indigo-400";return E(()=>{}),(e,t)=>(r(),o("div",F,[s("div",M,[s("div",q,[s("div",I,[t[1]||(t[1]=s("svg",{class:"w-5 h-5 text-indigo-400",viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-12h2v4h-2zm0 6h2v2h-2z"})],-1)),t[2]||(t[2]=s("span",{class:"font-bold text-white"},"Perl 5",-1)),f.value?(r(),o("span",L,d(g(c)("tools.code-playground.common.ready")),1)):n.value?b("",!0):(r(),o("span",O,d(g(c)("tools.code-playground.common.not_loaded","Not loaded")),1))]),s("button",{onClick:C,disabled:n.value,class:P(["px-4 py-1.5 rounded-lg font-medium text-sm transition-colors flex items-center gap-2",n.value?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-500 text-white"])},[n.value?(r(),o("svg",H,[...t[3]||(t[3]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(r(),o("svg",U,[...t[4]||(t[4]=[s("path",{d:"M8 5v14l11-7z"},null,-1)])])),V(" "+d(n.value?"Loading...":g(c)("tools.code-playground.common.run")),1)],10,A)]),s("div",D,[N(W,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=a=>y.value=a),language:"perl",theme:"vs-dark",height:"100%",minimap:!1},null,8,["modelValue"])])]),s("div",G,[s("div",J,[s("div",K,[s("span",Q,d(g(c)("tools.code-playground.common.output")),1),v.value?(r(),o("span",X,d(v.value)+"ms",1)):b("",!0)]),s("button",{onClick:R,class:"text-xs text-slate-500 hover:text-white transition-colors"},d(g(c)("tools.code-playground.common.clear")),1)]),n.value?(r(),o("div",Y,[s("div",Z,[t[5]||(t[5]=s("div",{class:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto"},null,-1)),s("div",ee,d(h.value),1),t[6]||(t[6]=s("div",{class:"text-xs text-slate-500"},"Initializing WebPerl...",-1))])])):(r(),o("div",te,[(r(!0),o(S,null,T(l.value,(a,i)=>(r(),o("div",{key:i,class:P(["flex items-start gap-2",z(a.type)])},[a.type==="error"?(r(),o("span",se,"✗")):(r(),o("span",oe,"›")),s("span",re,d(a.message),1)],2))),128)),l.value.length===0&&!n.value?(r(),o("div",le,' Click "Run" to execute Perl code... ')):b("",!0)]))])]))}};export{ue as default};
