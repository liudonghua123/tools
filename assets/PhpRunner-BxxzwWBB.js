import{_ as $}from"./monaco-editor-CGO6wXTd.js";import{u as j,r as u,c as l,j as n,d as e,g,t as c,e as f,b as A,F as z,f as E,n as V}from"./index-DlYbbPaf.js";import B from"./MonacoEditor-Ckzx4lfY.js";const H={class:"flex flex-col md:flex-row h-full"},S={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col border-b md:border-b-0 md:border-r border-slate-700"},F={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700 bg-slate-800/50"},M={class:"flex items-center gap-2"},W={key:0,class:"text-xs px-2 py-0.5 bg-emerald-600 text-white rounded-full"},T=["disabled"],N={class:"flex-1 min-h-0"},O={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col bg-slate-900"},R={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700"},q={class:"flex items-center gap-3"},D={class:"text-xs font-bold text-slate-400 uppercase tracking-wider"},I={key:0,class:"text-xs text-slate-500"},U={key:0,class:"flex-1 flex items-center justify-center"},G={class:"text-center space-y-4"},J={class:"text-slate-400"},K={key:1,class:"flex-1 overflow-y-auto p-4 font-mono text-sm space-y-1"},Q={key:0,class:"text-red-400"},X={key:1,class:"text-slate-500"},Y={key:2,class:"text-blue-400"},Z={class:"whitespace-pre-wrap"},ae={__name:"PhpRunner",emits:["output","error","ready"],setup(ee,{emit:b}){const{t:h}=j(),w=b,x=u(`<?php
$version = phpversion();
echo "Hello from PHP $version!\\n";

// Array example
$fruits = ["Apple", "Banana", "Cherry"];
echo "Fruits:\\n";
foreach ($fruits as $fruit) {
    echo "- $fruit\\n";
}

// Math
echo "\\nSqrt(16) = " . sqrt(16) . "\\n";
?>`),i=u([]),p=u(!1),y=u(!1),v=u(""),m=u(null);let d=null;const P=async()=>{if(d)return d;console.log("Loading PHP runtime..."),p.value=!0,v.value="Loading PHP runtime...";try{const t="/tools/",s=`${t.endsWith("/")?t:t+"/"}php-wasm/`,{PhpWeb:a}=await $(async()=>{const{PhpWeb:o}=await import(`${s}PhpWeb.mjs`);return{PhpWeb:o}},[]);return d=new a,d.addEventListener("output",o=>{const r=o.detail,_=Array.isArray(r)?r.join(""):String(r);i.value.push({type:"log",message:_})}),d.addEventListener("error",o=>{const r=o.detail,_=Array.isArray(r)?r.join(""):String(r);i.value.push({type:"error",message:_})}),new Promise((o,r)=>{d.addEventListener("ready",()=>{y.value=!0,w("ready"),o(d)})})}catch(t){return i.value.push({type:"error",message:`Failed to load PHP: ${t.message}`}),Promise.reject(t)}finally{p.value=!1,v.value=""}},k=async()=>{i.value=[],m.value=null;try{const t=await P(),s=performance.now();let a=x.value;const o=await t.run(a),r=performance.now();m.value=(r-s).toFixed(2),i.value.push({type:"info",message:`Program exited with code ${o}`})}catch(t){i.value.push({type:"error",message:t.message})}},C=()=>{i.value=[],m.value=null},L=t=>t==="error"?"text-red-400":t==="info"?"text-slate-500 italic":"text-blue-400";return(t,s)=>(n(),l("div",H,[e("div",S,[e("div",F,[e("div",M,[s[1]||(s[1]=e("svg",{class:"w-5 h-5 text-indigo-400",viewBox:"0 0 128 128",fill:"currentColor"},[e("path",{d:"M64 30.332C28.654 30.332 0 45.407 0 64s28.654 33.668 64 33.668c35.345 0 64-15.075 64-33.668S99.346 30.332 64 30.332zm-5.982 9.81h7.293v.003l-1.745 8.968h6.496c4.087 0 6.908.714 8.458 2.139 1.553 1.427 2.017 3.737 1.398 6.93l-3.053 15.7h-7.408l2.902-14.929c.33-1.698.208-2.855-.365-3.473-.573-.617-1.793-.925-3.658-.925h-5.828L58.752 73.88h-7.291l6.557-33.738zM26.73 49.114h14.133c4.252 0 7.355 1.116 9.305 3.348 1.95 2.232 2.536 5.346 1.758 9.346-.32 1.649-.863 3.154-1.625 4.52-.763 1.364-1.76 2.613-2.99 3.745-1.468 1.373-3.098 2.353-4.891 2.936-1.794.585-4.08.875-6.858.875h-6.294l-1.745 8.97h-7.35l6.557-33.74zm57.366 0h14.13c4.252 0 7.353 1.116 9.303 3.348h.002c1.95 2.232 2.538 5.346 1.76 9.346-.32 1.649-.861 3.154-1.623 4.52-.763 1.364-1.76 2.613-2.992 3.745-1.467 1.373-3.098 2.353-4.893 2.936-1.794.585-4.077.875-6.855.875h-6.295l-1.744 8.97h-7.35l6.557-33.74zm-51.051 5.325-2.742 14.12h4.468c2.963 0 5.172-.556 6.622-1.673 1.45-1.116 2.428-2.981 2.937-5.592.485-2.507.264-4.279-.666-5.309-.93-1.032-2.79-1.547-5.584-1.547h-5.035zm57.363 0-2.744 14.12h4.47c2.965 0 5.17-.556 6.622-1.673 1.449-1.116 2.427-2.981 2.935-5.592.487-2.507.266-4.279-.664-5.309-.93-1.032-2.792-1.547-5.584-1.547h-5.035z"})],-1)),s[2]||(s[2]=e("span",{class:"font-bold text-white"},"PHP (WASM)",-1)),y.value?(n(),l("span",W,c(f(h)("tools.code-playground.common.ready")),1)):g("",!0)]),e("button",{onClick:k,disabled:p.value,class:"px-4 py-1.5 rounded-lg font-medium text-sm transition-colors flex items-center gap-2 bg-emerald-600 hover:bg-emerald-500 text-white disabled:bg-slate-600 disabled:text-slate-400"},c(p.value?"Loading...":f(h)("tools.code-playground.common.run")),9,T)]),e("div",N,[A(B,{modelValue:x.value,"onUpdate:modelValue":s[0]||(s[0]=a=>x.value=a),language:"php",theme:"vs-dark",height:"100%"},null,8,["modelValue"])])]),e("div",O,[e("div",R,[e("div",q,[e("span",D,c(f(h)("tools.code-playground.common.output")),1),m.value?(n(),l("span",I,c(m.value)+"ms",1)):g("",!0)]),e("button",{onClick:C,class:"text-xs text-slate-500 hover:text-white"},c(f(h)("tools.code-playground.common.clear")),1)]),p.value?(n(),l("div",U,[e("div",G,[s[3]||(s[3]=e("div",{class:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto"},null,-1)),e("div",J,c(v.value),1)])])):(n(),l("div",K,[(n(!0),l(z,null,E(i.value,(a,o)=>(n(),l("div",{key:o,class:V(["flex items-start gap-2",L(a.type)])},[a.type==="error"?(n(),l("span",Q,"✗")):a.type==="info"?(n(),l("span",X,"ℹ")):(n(),l("span",Y,"›")),e("span",Z,c(a.message),1)],2))),128))]))])]))}};export{ae as default};
