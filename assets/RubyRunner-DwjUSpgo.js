import{u as F,r as p,c as o,j as r,d as e,g as h,t as i,e as w,n as R,i as N,b as S,F as T,f as z}from"./index-B-wXu5Xs.js";import $ from"./MonacoEditor-D01zuseN.js";import"./monaco-editor-CGO6wXTd.js";const q={class:"flex flex-col md:flex-row h-full"},A={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col border-b md:border-b-0 md:border-r border-slate-700"},I={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700 bg-slate-800/50"},W={class:"flex items-center gap-2"},D={key:0,class:"text-xs px-2 py-0.5 bg-emerald-600 text-white rounded-full"},G={key:1,class:"text-xs px-2 py-0.5 bg-slate-600 text-slate-300 rounded-full"},H=["disabled"],O={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},U={key:1,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},Z={class:"flex-1 min-h-0"},P={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col bg-slate-900"},Y={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700"},J={class:"flex items-center gap-3"},K={class:"text-xs font-bold text-slate-400 uppercase tracking-wider"},Q={key:0,class:"text-xs text-slate-500"},X={key:0,class:"flex-1 flex items-center justify-center"},ee={class:"text-center space-y-4"},te={class:"text-slate-400"},se={key:1,class:"flex-1 overflow-y-auto p-4 font-mono text-sm space-y-1"},oe={key:0,class:"text-red-400"},re={key:1,class:"text-green-400"},ae={class:"whitespace-pre-wrap"},le={key:0,class:"text-slate-500 italic"},ce={__name:"RubyRunner",emits:["output","error","ready"],setup(ne,{emit:M}){const{t:c}=F(),_=M,x=p(`# Ruby code runs in your browser with ruby-wasm
# No server required!

puts "Hello from Ruby #{RUBY_VERSION}!"

# Basic math
numbers = (1..100).to_a
sum = numbers.sum
puts "Sum of 1 to 100: #{sum}"

# Blocks and iterators
squares = 1.upto(10).map { |x| x**2 }
puts "Squares: #{squares.inspect}"

# Tally (Ruby 2.7+)
words = %w[apple banana apple cherry banana apple]
puts "Fruit tally: #{words.tally}"

# Class example
class Greeter
  def initialize(name)
    @name = name
  end

  def greet
    "Greetings, #{@name}!"
  end
end

puts Greeter.new("Developer").greet
`),l=p([]),n=p(!1),g=p(!1),v=p(""),y=p(null);let m=null;const V=async()=>{if(m)return m;if(window.rubyVM)return m=window.rubyVM,g.value=!0,m;n.value=!0,v.value=c("tools.code-playground.ruby.loading");try{const s="/tools/",t=`${s.endsWith("/")?s:s+"/"}ruby-wasm/`;if(await new Promise((k,E)=>{if(window["ruby-wasm-wasi"])return k();const f=document.createElement("script");f.src=`${t}browser.umd.js`,f.onload=k,f.onerror=()=>E(new Error("Failed to load browser.umd.js")),document.head.appendChild(f)}),!window["ruby-wasm-wasi"])throw new Error('Ruby WASM script loaded but window["ruby-wasm-wasi"] not found');v.value="Initializing Ruby environment...";const{DefaultRubyVM:u}=window["ruby-wasm-wasi"],d=await fetch(`${t}ruby+stdlib.wasm`);if(!d.ok)throw new Error(`Failed to fetch ruby+stdlib.wasm: ${d.statusText}`);const a=await d.arrayBuffer(),b=await WebAssembly.compile(a),{vm:L}=await u(b);return m=L,window.rubyVM=L,g.value=!0,_("ready"),m}catch(s){throw l.value.push({type:"error",message:`Failed to load Ruby: ${s.message}`}),console.error(s),s}finally{n.value=!1,v.value=""}},C=async()=>{l.value=[],y.value=null;try{const s=console.log,t=console.error;console.log=(...a)=>{s(...a);const b=a.join(" ");l.value.push({type:"log",message:b})},console.error=(...a)=>{t(...a);const b=a.join(" ");l.value.push({type:"error",message:b})};const u=performance.now();try{(await V()).eval(x.value)}catch(a){l.value.push({type:"error",message:a.toString()})}finally{console.log=s,console.error=t}const d=performance.now();y.value=(d-u).toFixed(2)}catch(s){l.value.push({type:"error",message:s.message}),_("error",s)}},B=()=>{l.value=[],y.value=null},j=s=>s==="error"?"text-red-400":"text-blue-400";return(s,t)=>(r(),o("div",q,[e("div",A,[e("div",I,[e("div",W,[t[1]||(t[1]=e("svg",{class:"w-5 h-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M12 2L3.5 6.5L2 12L3.5 17.5L12 22L20.5 17.5L22 12L20.5 6.5L12 2ZM12 4.5L18.5 8L19.5 12L18.5 16L12 19.5L5.5 16L4.5 12L5.5 8L12 4.5Z"}),e("path",{d:"M12 7.5L8.5 10.5L9.5 14.5L12 16.5L14.5 14.5L15.5 10.5L12 7.5Z",opacity:".5"})],-1)),t[2]||(t[2]=e("span",{class:"font-bold text-white"},"Ruby 3.4",-1)),g.value?(r(),o("span",D,i(w(c)("tools.code-playground.common.ready")),1)):n.value?h("",!0):(r(),o("span",G,i(w(c)("tools.code-playground.common.not_loaded","Not loaded")),1))]),e("button",{onClick:C,disabled:n.value,class:R(["px-4 py-1.5 rounded-lg font-medium text-sm transition-colors flex items-center gap-2",n.value?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-500 text-white"])},[n.value?(r(),o("svg",O,[...t[3]||(t[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(r(),o("svg",U,[...t[4]||(t[4]=[e("path",{d:"M8 5v14l11-7z"},null,-1)])])),N(" "+i(n.value?"Loading...":w(c)("tools.code-playground.common.run")),1)],10,H)]),e("div",Z,[S($,{modelValue:x.value,"onUpdate:modelValue":t[0]||(t[0]=u=>x.value=u),language:"ruby",theme:"vs-dark",height:"100%",minimap:!1},null,8,["modelValue"])])]),e("div",P,[e("div",Y,[e("div",J,[e("span",K,i(w(c)("tools.code-playground.common.output")),1),y.value?(r(),o("span",Q,i(y.value)+"ms",1)):h("",!0)]),e("button",{onClick:B,class:"text-xs text-slate-500 hover:text-white transition-colors"},i(w(c)("tools.code-playground.common.clear")),1)]),n.value?(r(),o("div",X,[e("div",ee,[t[5]||(t[5]=e("div",{class:"w-12 h-12 border-4 border-rose-500 border-t-transparent rounded-full animate-spin mx-auto"},null,-1)),e("div",te,i(v.value),1),t[6]||(t[6]=e("div",{class:"text-xs text-slate-500"},"Initializing Ruby WASM...",-1))])])):(r(),o("div",se,[(r(!0),o(T,null,z(l.value,(u,d)=>(r(),o("div",{key:d,class:R(["flex items-start gap-2",j(u.type)])},[u.type==="error"?(r(),o("span",oe,"✗")):(r(),o("span",re,"›")),e("span",ae,i(u.message),1)],2))),128)),l.value.length===0&&!n.value?(r(),o("div",le,' Click "Run" to execute Ruby code... ')):h("",!0)]))])]))}};export{ce as default};
