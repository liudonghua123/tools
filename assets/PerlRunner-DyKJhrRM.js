import{u as j,r as v,o as E,c as s,j as r,d as o,g as b,t as d,e as g,n as P,i as V,b as M,F as N,f as T}from"./index-CpdbSi_Z.js";import W from"./MonacoEditor-M7Go4pjs.js";import"./monaco-editor-CGO6wXTd.js";const F={class:"flex flex-col md:flex-row h-full"},S={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col border-b md:border-b-0 md:border-r border-slate-700"},q={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700 bg-slate-800/50"},H={class:"flex items-center gap-2"},I={key:0,class:"text-xs px-2 py-0.5 bg-emerald-600 text-white rounded-full"},L={key:1,class:"text-xs px-2 py-0.5 bg-slate-600 text-slate-300 rounded-full"},O=["disabled"],A={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},U={key:1,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},D={class:"flex-1 min-h-0"},G={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col bg-slate-900"},J={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700"},K={class:"flex items-center gap-3"},Q={class:"text-xs font-bold text-slate-400 uppercase tracking-wider"},X={key:0,class:"text-xs text-slate-500"},Y={key:0,class:"flex-1 flex items-center justify-center"},Z={class:"text-center space-y-4"},ee={class:"text-slate-400"},te={key:1,class:"flex-1 overflow-y-auto p-4 font-mono text-sm space-y-1"},oe={key:0,class:"text-red-400"},se={key:1,class:"text-indigo-400"},re={class:"whitespace-pre-wrap"},le={key:0,class:"text-slate-500 italic"},ue={__name:"PerlRunner",emits:["output","error","ready"],setup(ne,{emit:k}){const{t:c}=j(),_=k,h=v(`# Perl code runs in your browser with WebPerl
# No server required!

print "Hello from Perl $^V!\\n";

# Basic math
my $sum = 0;
$sum += $_ for (1..100);
print "Sum of 1 to 100: $sum\\n";

# Array operations
my @fruits = ("Apple", "Banana", "Cherry");
print "Fruits: ", join(", ", @fruits), "\\n";

# Map example
my @squares = map { $_ * $_ } (1..10);
print "Squares: @squares\\n";

# Subroutine example
sub greet {
    my $name = shift;
    return "Greetings, $name!";
}

print greet("Developer"), "\\n";
`),l=v([]),n=v(!1),w=v(!1),y=v(""),f=v(null),$=async()=>{if(window.Perl&&window.Perl.state==="Ready")return w.value=!0,window.Perl;if(window.Perl&&window.Perl.state==="Initializing")return new Promise(e=>{const t=()=>{window.Perl.state==="Ready"?(w.value=!0,e(window.Perl)):setTimeout(t,100)};t()});n.value=!0,y.value=c("tools.code-playground.perl.loading");try{const e="/tools/",t=`${e.endsWith("/")?e:e+"/"}webperl/`;if(await new Promise((i,p)=>{const u=document.createElement("script");u.src=`${t}webperl.js`,u.onload=()=>{typeof window<"u"&&(window.getScriptURL=(function(){for(var m=document.getElementsByTagName("script"),x=m.length-1;x>=0;x--)if(m[x].src&&m[x].src.indexOf("webperl.js")!==-1)return function(){return m[x].src};var B=m[m.length-1];return function(){return B.src}})()),i()},u.onerror=()=>p(new Error("Failed to load webperl.js")),document.head.appendChild(u)}),!window.Perl)throw new Error("WebPerl script loaded but window.Perl not found");window.Perl.trace=!0;const a=window.Perl.output;return window.Perl.output=(i,p)=>{typeof a=="function"&&a.call(window.Perl,i,p);const u=p===2?"error":"log";l.value.length>0&&l.value[l.value.length-1].type===u?l.value[l.value.length-1].message+=i:l.value.push({type:u,message:i})},new Promise((i,p)=>{console.log("Initializing WebPerl..."),window.Perl.init(()=>{console.log("WebPerl is Ready!"),w.value=!0,n.value=!1,y.value="",_("ready"),i(window.Perl)}),setTimeout(()=>{w.value||p(new Error("WebPerl initialization timed out"))},3e4)})}catch(e){throw l.value.push({type:"error",message:`Failed to load Perl: ${e.message}`}),console.error(e),n.value=!1,y.value="",e}},C=async()=>{l.value=[],f.value=null;try{const e=await $(),t=performance.now();if(e.state!=="Ready"&&e.state!=="Running")throw new Error(`Perl is in state ${e.state}, cannot run code.`);e.state==="Ready"&&e.start([]),e.eval(`$|=1;${h.value}`);const a=performance.now();f.value=(a-t).toFixed(2)}catch(e){l.value.push({type:"error",message:e.message}),_("error",e)}},R=()=>{l.value=[],f.value=null},z=e=>e==="error"?"text-red-400":"text-indigo-400";return E(()=>{}),(e,t)=>(r(),s("div",F,[o("div",S,[o("div",q,[o("div",H,[t[1]||(t[1]=o("svg",{class:"w-5 h-5 text-indigo-400",viewBox:"0 0 128 128",fill:"currentColor"},[o("path",{d:"M64 14.6465v.002c-35.346 0-64 19.1902-64 42.8632 0 20.764 22.0464 38.0766 51.3164 42.0176v-12.83c-15.55-4.89-26.166-14.6943-26.166-25.9923 0-16.183 21.7795-29.3027 48.6465-29.3027 26.866 0 46.6914 8.9748 46.6914 29.3027 0 10.486-5.2715 17.9507-14.0645 22.7207 1.204.908 2.2184 2.073 2.9024 3.42l.3886.6543C121.0248 79.772 128 69.1888 128 57.5098c0-23.672-28.654-42.8633-64-42.8633zM52.7363 41.2637v72.084l21.834-.0098-.0039-28.2188h5.8613c1.199 0 1.7167.3481 2.9297 1.3301 1.454 1.177 3.8164 5.2383 3.8164 5.2383l11.5371 21.666 24.6739-.0097-15.2657-25.7403a8.388 8.388 0 0 0-1.4199-2.041c-.974-1.036-2.3255-1.8227-3.1055-2.2188-2.249-1.1375-6.12-2.3076-6.123-2.3085 0 0 19.08-1.4151 19.08-20.4141 0-18.999-19.9706-19.3574-19.9706-19.3574H52.7363zm22.0176 15.627 13.2188.0077s6.123-.3302 6.123 6.0098c0 6.216-6.123 6.2344-6.123 6.2344l-13.2247.0039.006-12.2559zm9.3457 32.6366c-2.612.257-5.3213.411-8.1133.463l.002 9.6288a88.362 88.362 0 0 0 12.4746-2.4902l-.502-.9414c-.68-1.268-1.3472-2.5426-2.0332-3.8066a41.01 41.01 0 0 0-1.828-2.8516v-.002z"})],-1)),t[2]||(t[2]=o("span",{class:"font-bold text-white"},"Perl 5",-1)),w.value?(r(),s("span",I,d(g(c)("tools.code-playground.common.ready")),1)):n.value?b("",!0):(r(),s("span",L,d(g(c)("tools.code-playground.common.not_loaded","Not loaded")),1))]),o("button",{onClick:C,disabled:n.value,class:P(["px-4 py-1.5 rounded-lg font-medium text-sm transition-colors flex items-center gap-2",n.value?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-500 text-white"])},[n.value?(r(),s("svg",A,[...t[3]||(t[3]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(r(),s("svg",U,[...t[4]||(t[4]=[o("path",{d:"M8 5v14l11-7z"},null,-1)])])),V(" "+d(n.value?"Loading...":g(c)("tools.code-playground.common.run")),1)],10,O)]),o("div",D,[M(W,{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=a=>h.value=a),language:"perl",theme:"vs-dark",height:"100%",minimap:!1},null,8,["modelValue"])])]),o("div",G,[o("div",J,[o("div",K,[o("span",Q,d(g(c)("tools.code-playground.common.output")),1),f.value?(r(),s("span",X,d(f.value)+"ms",1)):b("",!0)]),o("button",{onClick:R,class:"text-xs text-slate-500 hover:text-white transition-colors"},d(g(c)("tools.code-playground.common.clear")),1)]),n.value?(r(),s("div",Y,[o("div",Z,[t[5]||(t[5]=o("div",{class:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto"},null,-1)),o("div",ee,d(y.value),1),t[6]||(t[6]=o("div",{class:"text-xs text-slate-500"},"Initializing WebPerl...",-1))])])):(r(),s("div",te,[(r(!0),s(N,null,T(l.value,(a,i)=>(r(),s("div",{key:i,class:P(["flex items-start gap-2",z(a.type)])},[a.type==="error"?(r(),s("span",oe,"✗")):(r(),s("span",se,"›")),o("span",re,d(a.message),1)],2))),128)),l.value.length===0&&!n.value?(r(),s("div",le,' Click "Run" to execute Perl code... ')):b("",!0)]))])]))}};export{ue as default};
