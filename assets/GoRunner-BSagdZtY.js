import{_ as T,u as U,r as i,o as D,a as I,c as l,j as o,d as t,g as _,t as c,e as x,h as O,q as A,F as b,f as k,n as B,i as H,b as P}from"./index-DFuPh5c1.js";import S from"./MonacoEditor-CEMHBMtr.js";import{f as W,a as E}from"./ExampleLoader-C0CuCz3g.js";import"./monaco-editor-DrHUTMTD.js";const q={class:"flex flex-col md:flex-row h-full"},J={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col border-b md:border-b-0 md:border-r border-slate-700"},K={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700 bg-slate-800/50"},Q={class:"flex items-center gap-4"},X={class:"flex items-center gap-2"},Y={key:0,class:"text-xs px-2 py-0.5 bg-emerald-600 text-white rounded-full"},Z={key:1,class:"text-xs px-2 py-0.5 bg-slate-600 text-slate-300 rounded-full"},e1={class:"relative group"},t1=["label"],s1=["value"],l1=["disabled"],o1={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},a1={key:1,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},n1={class:"flex-1 min-h-0"},r1={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col bg-slate-900"},c1={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700"},i1={class:"flex items-center gap-3"},d1={class:"text-xs font-bold text-slate-400 uppercase tracking-wider"},u1={key:0,class:"text-xs text-slate-500"},m1={key:0,class:"flex-1 flex items-center justify-center"},p1={class:"text-center space-y-4"},v1={class:"text-slate-400"},h1={key:1,class:"flex-1 overflow-y-auto p-4 font-mono text-sm space-y-1"},f1={key:0,class:"text-red-400"},x1={key:1,class:"text-emerald-400"},g1={class:"whitespace-pre-wrap"},y1={key:0,class:"text-slate-500 italic"},w1={__name:"GoRunner",emits:["output","error","ready"],setup(_1,{emit:F}){const{t:m}=U(),C=F,p=i(""),G=i(null),v=i(""),r=i([]),n=i(!1),g=i(!1),u=i(""),h=i(null);let w=null;const V=async()=>{try{const s=await W("go");if(G.value=s,s.chapters&&s.chapters.length>0&&s.chapters[0].examples.length>0){const e=s.chapters[0].examples[0];v.value=e.path,p.value=await E("go",e.path)}}catch(s){console.error("Failed to load Go manifest:",s)}},z=async()=>{if(!g.value){n.value=!0,u.value="Loading Go runtime...";try{const s="/tools/",e=`${s.endsWith("/")?s:s+"/"}go-wasm/`;if(await new Promise((j,N)=>{if(window.Go){j();return}const y=document.createElement("script");y.src=`${e}wasm_exec.js`,y.onload=j,y.onerror=()=>N(new Error("Failed to load wasm_exec.js")),document.head.appendChild(y)}),!window.Go)throw new Error("Go class not found after loading wasm_exec.js");w=new window.Go,u.value="Initializing Go interpreter...";const a=await(await fetch(`${e}main.wasm`)).arrayBuffer(),d=await WebAssembly.instantiate(a,w.importObject);w.run(d.instance),g.value=!0,C("ready")}catch(s){r.value.push({type:"error",message:`Failed to load Go runtime: ${s.message}`}),console.error(s)}finally{n.value=!1,u.value=""}}},L=async()=>{if(g.value||await z(),!window.runGoCode){r.value.push({type:"error",message:"Go interpreter not ready (runGoCode not found)"});return}r.value=[],h.value=null;try{const s=performance.now(),e=window.runGoCode(p.value),f=performance.now();h.value=(f-s).toFixed(2),e&&r.value.push({type:"log",message:e})}catch(s){r.value.push({type:"error",message:s.message}),C("error",s)}},R=async()=>{if(v.value){M();try{n.value=!0,u.value="Loading example...",p.value=await E("go",v.value)}catch(s){r.value.push({type:"error",message:`Failed to load example: ${s.message}`})}finally{n.value=!1,u.value=""}}},M=()=>{r.value=[],h.value=null},$=s=>s==="error"?"text-red-400":"text-emerald-400";return D(()=>{z(),V()}),I(()=>{}),(s,e)=>{var f;return o(),l("div",q,[t("div",J,[t("div",K,[t("div",Q,[t("div",X,[e[2]||(e[2]=t("svg",{class:"w-5 h-5 text-cyan-400",viewBox:"0 0 128 128",fill:"currentColor"},[t("path",{d:"M108.2 64.8c-.1-.1-.2-.2-.4-.2l-.1-.1c-.1-.1-.2-.1-.2-.2l-.1-.1c-.1 0-.2-.1-.2-.1l-.2-.1c-.1 0-.2-.1-.2-.1l-.2-.1c-.1 0-.2-.1-.2-.1-.1 0-.1 0-.2-.1l-.3-.1c-.1 0-.1 0-.2-.1l-.3-.1h-.1l-.4-.1h-.2c-.1 0-.2 0-.3-.1h-2.3c-.6-13.3.6-26.8-2.8-39.6 12.9-4.6 2.8-22.3-8.4-14.4-7.4-6.4-17.6-7.8-28.3-7.8-10.5.7-20.4 2.9-27.4 8.4-2.8-1.4-5.5-1.8-7.9-1.1v.1c-.1 0-.3.1-.4.2-.1 0-.3.1-.4.2h-.1c-.1 0-.2.1-.4.2h-.1l-.3.2h-.1l-.3.2h-.1l-.3.2s-.1 0-.1.1l-.3.2s-.1 0-.1.1l-.3.2s-.1 0-.1.1l-.3.2-.1.1c-.1.1-.2.1-.2.2l-.1.1-.2.2-.1.1c-.1.1-.1.2-.2.2l-.1.1c-.1.1-.1.2-.2.2l-.1.1c-.1.1-.1.2-.2.2l-.1.1c-.1.1-.1.2-.2.2l-.1.1c-.1.1-.1.2-.2.2l-.1.1-.1.3s0 .1-.1.1l-.1.3s0 .1-.1.1l-.1.3s0 .1-.1.1l-.1.3s0 .1-.1.1c.4.3.4.4.4.4v.1l-.1.3v.1c0 .1 0 .2-.1.3v3.1c0 .1 0 .2.1.3v.1l.1.3v.1l.1.3s0 .1.1.1l.1.3s0 .1.1.1l.1.3s0 .1.1.1l.2.3s0 .1.1.1l.2.3s0 .1.1.1l.2.3.1.1.3.3.3.3h.1c1 .9 2 1.6 4 2.2v-.2C23 37.3 26.5 50 26.7 63c-.6 0-.7.4-1.7.5h-.5c-.1 0-.3 0-.5.1-.1 0-.3 0-.4.1l-.4.1h-.1l-.4.1h-.1l-.3.1h-.1l-.3.1s-.1 0-.1.1l-.3.1-.2.1c-.1 0-.2.1-.2.1l-.2.1-.2.1c-.1 0-.2.1-.2.1l-.2.1-.4.3c-.1.1-.2.2-.3.2l-.4.4-.1.1c-.1.2-.3.4-.4.5l-.2.3-.3.6-.1.3v.3c0 .5.2.9.9 1.2.2 3.7 3.9 2 5.6.8l.1-.1c.2-.2.5-.3.6-.3h.1l.2-.1c.1 0 .1 0 .2-.1.2-.1.4-.1.5-.2.1 0 .1-.1.1-.2l.1-.1c.1-.2.2-.6.2-1.2l.1-1.3v1.8c-.5 13.1-4 30.7 3.3 42.5 1.3 2.1 2.9 3.9 4.7 5.4h-.5c-.2.2-.5.4-.8.6l-.9.6-.3.2-.6.4-.9.7-1.1 1c-.2.2-.3.4-.4.5l-.4.6-.2.3c-.1.2-.2.4-.2.6l-.1.3c-.2.8 0 1.7.6 2.7l.4.4h.2c.1 0 .2 0 .4.1.2.4 1.2 2.5 3.9.9 2.8-1.5 4.7-4.6 8.1-5.1l-.5-.6c5.9 2.8 12.8 4 19 4.2 8.7.3 18.6-.9 26.5-5.2 2.2.7 3.9 3.9 5.8 5.4l.1.1.1.1.1.1.1.1s.1 0 .1.1c0 0 .1 0 .1.1 0 0 .1 0 .1.1h2.1s.1 0 .1-.1h.1s.1 0 .1-.1h.1s.1 0 .1-.1c0 0 .1 0 .1-.1l.1-.1s.1 0 .1-.1l.1-.1h.1l.2-.2.2-.1h.1l.1-.1h.1l.1-.1.1-.1.1-.1.1-.1.1-.1.1-.1.1-.1v-.1s0-.1.1-.1v-.1s0-.1.1-.1v-.1s0-.1.1-.1v-1.4s-.3 0-.3-.1l-.3-.1v-.1l.3-.1s.2 0 .2-.1l.1-.1v-2.1s0-.1-.1-.1v-.1s0-.1-.1-.1v-.1s0-.1-.1-.1c0 0 0-.1-.1-.1 0 0 0-.1-.1-.1 0 0 0-.1-.1-.1 0 0 0-.1-.1-.1 0 0 0-.1-.1-.1 0 0 0-.1-.1-.1 0 0 0-.1-.1-.1 0 0 0-.1-.1-.1 0 0 0-.1-.1-.1 0 0 0-.1-.1-.1 0 0 0-.1-.1-.1 0 0 0-.1-.1-.1 0 0 0-.1-.1-.1l-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1v-.1l-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1-.1c2-1.9 3.8-4.2 5.1-6.9 5.9-11.8 4.9-26.2 4.1-39.2h.1c.1 0 .2.1.2.1h.3s.1 0 .1.1h.1s.1 0 .1.1l.2.1c1.7 1.2 5.4 2.9 5.6-.8 1.6.6-.3-1.8-1.3-2.5zM36 23C32.8 7 58.4 4 59.3 19.6c.8 13-20 16.3-23.3 3.4zm36.1 15c-1.3 1.4-2.7 1.2-4.1.7 0 1.9.4 3.9.1 5.9-.5.9-1.5 1-2.3 1.4-1.2-.2-2.1-.9-2.6-2l-.2-.1c-3.9 5.2-6.3-1.1-5.2-5-1.2.1-2.2-.2-3-1.5-1.4-2.6.7-5.8 3.4-6.3.7 3 8.7 2.6 10.1-.2 3.1 1.5 6.5 4.3 3.8 7.1zm-7-17.5c-.9-13.8 20.3-17.5 23.4-4 3.5 15-20.8 18.9-23.4 4zM41.7 17c-1.9 0-3.5 1.7-3.5 3.8 0 2.1 1.6 3.8 3.5 3.8s3.5-1.7 3.5-3.8c0-2.1-1.5-3.8-3.5-3.8zm1.6 5.7c-.5 0-.8-.4-.8-1 0-.5.4-1 .8-1 .5 0 .8.4.8 1 0 .5-.3 1-.8 1zm27.8-6.6c-1.9 0-3.4 1.7-3.4 3.8 0 2.1 1.5 3.8 3.4 3.8s3.4-1.7 3.4-3.8c0-2.1-1.5-3.8-3.4-3.8zm1.6 5.6c-.4 0-.8-.4-.8-1 0-.5.4-1 .8-1s.8.4.8 1-.4 1-.8 1z"})],-1)),e[3]||(e[3]=t("span",{class:"font-bold text-white"},"Go",-1)),g.value?(o(),l("span",Y,c(x(m)("tools.code-playground.common.ready")),1)):n.value?_("",!0):(o(),l("span",Z,c(x(m)("tools.code-playground.common.not_loaded")),1))]),t("div",e1,[O(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>v.value=a),onChange:R,class:"appearance-none bg-slate-700/50 border border-slate-600 text-slate-200 text-xs rounded px-2 pr-6 py-1 hover:border-slate-500 focus:outline-none focus:ring-1 focus:ring-cyan-500 transition-all cursor-pointer"},[(o(!0),l(b,null,k((f=G.value)==null?void 0:f.chapters,a=>(o(),l("optgroup",{key:a.title,label:a.title},[(o(!0),l(b,null,k(a.examples,d=>(o(),l("option",{key:d.path,value:d.path},c(d.name),9,s1))),128))],8,t1))),128))],544),[[A,v.value]]),e[4]||(e[4]=t("div",{class:"absolute inset-y-0 right-1.5 flex items-center pointer-events-none text-slate-400"},[t("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),t("button",{onClick:L,disabled:n.value,class:B(["px-4 py-1.5 rounded-lg font-medium text-sm transition-colors flex items-center gap-2",n.value?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-500 text-white"])},[n.value?(o(),l("svg",o1,[...e[5]||(e[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(o(),l("svg",a1,[...e[6]||(e[6]=[t("path",{d:"M8 5v14l11-7z"},null,-1)])])),H(" "+c(n.value?"Loading...":x(m)("tools.code-playground.common.run")),1)],10,l1)]),t("div",n1,[P(S,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=a=>p.value=a),language:"go",theme:"vs-dark",height:"100%",minimap:!1},null,8,["modelValue"])])]),t("div",r1,[t("div",c1,[t("div",i1,[t("span",d1,c(x(m)("tools.code-playground.common.output")),1),h.value?(o(),l("span",u1,c(h.value)+"ms",1)):_("",!0)]),t("button",{onClick:M,class:"text-xs text-slate-500 hover:text-white transition-colors"},c(x(m)("tools.code-playground.common.clear")),1)]),n.value?(o(),l("div",m1,[t("div",p1,[e[7]||(e[7]=t("div",{class:"w-12 h-12 border-4 border-cyan-500 border-t-transparent rounded-full animate-spin mx-auto"},null,-1)),t("div",v1,c(u.value),1),e[8]||(e[8]=t("div",{class:"text-xs text-slate-500"},"First load may take a few seconds...",-1))])])):(o(),l("div",h1,[(o(!0),l(b,null,k(r.value,(a,d)=>(o(),l("div",{key:d,class:B(["flex items-start gap-2",$(a.type)])},[a.type==="error"?(o(),l("span",f1,"✗")):(o(),l("span",x1,"›")),t("span",g1,c(a.message),1)],2))),128)),r.value.length===0&&!n.value?(o(),l("div",y1,' Click "Run" to execute Go code... ')):_("",!0)]))])])}}},z1=T(w1,[["__scopeId","data-v-14c1b9d4"]]);export{z1 as default};
