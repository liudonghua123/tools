import{u as A,r as m,c as s,j as l,d as e,i as g,t as a,e as x,F as p,f,b as I,g as N}from"./index-B-wXu5Xs.js";import U from"./MonacoEditor-D01zuseN.js";import"./monaco-editor-CGO6wXTd.js";const V={class:"flex flex-col md:flex-row h-full"},B={class:"w-full md:w-64 h-48 md:h-full bg-slate-900 border-b md:border-b-0 md:border-r border-slate-700 flex flex-col"},F={class:"px-4 py-3 border-b border-slate-700 font-bold text-slate-300 flex items-center gap-2"},j={class:"flex-1 overflow-y-auto p-2"},O={key:0,class:"text-xs text-slate-500 text-center py-4"},P={key:1,class:"text-xs text-slate-500 text-center py-4"},Q={key:2,class:"space-y-1"},$={class:"flex items-center gap-2 text-slate-300 font-medium px-2 py-1 hover:bg-slate-800 rounded"},D={class:"pl-6 space-y-0.5"},J={class:"text-slate-600"},z={class:"flex-1 flex flex-col min-w-0 h-full md:h-auto"},G={class:"h-1/2 flex flex-col border-b border-slate-700"},H={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700 bg-slate-800/50"},K={class:"flex items-center gap-2"},W={class:"font-bold text-white"},X={class:"flex-1 min-h-0"},Y={class:"h-1/2 flex flex-col bg-slate-900 overflow-hidden"},Z={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700"},ee={class:"flex items-center gap-3"},te={class:"text-xs font-bold text-slate-400 uppercase tracking-wider"},se={key:0,class:"text-xs text-slate-500"},le={class:"flex-1 overflow-auto p-4"},oe={key:0,class:"text-slate-500 italic text-sm"},ae={key:0,class:"text-red-400 p-2 bg-red-900/10 rounded border border-red-900/20 text-sm font-mono"},ne={key:1,class:"text-emerald-400 p-2 text-sm"},re={key:2,class:"overflow-x-auto"},de={class:"w-full text-left text-sm border-collapse"},ie={class:"mt-1 text-xs text-slate-500"},pe={__name:"SqliteRunner",emits:["ready"],setup(ce,{emit:S}){const{t:c}=A(),L=S,b=m(`-- Create a table
CREATE TABLE users (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL,
  email TEXT UNIQUE,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Insert data
INSERT INTO users (name, email) VALUES 
('Alice', 'alice@example.com'),
('Bob', 'bob@example.com'),
('Charlie', 'charlie@example.com');

-- Query data
SELECT * FROM users;
`),u=m([]),y=m([]),E=m(!1),k=m(!1),w=m(""),v=m(null);let i=null,T=null;const M=async()=>{if(i)return i;E.value=!0,w.value="Loading SQLite runtime...";try{const n="/tools/",o=`${n.endsWith("/")?n:n+"/"}sql-wasm/`;if(window.initSqlJs||await new Promise((t,d)=>{const r=document.createElement("script");r.src=`${o}sql-wasm.js`,r.onload=t,r.onerror=()=>d(new Error("Failed to load sql-wasm.js")),document.head.appendChild(r)}),w.value="Initializing Database...",window.initSqlJs)T=await window.initSqlJs({locateFile:t=>`${o}${t}`}),i=new T.Database,await q();else throw new Error("initSqlJs not found");return k.value=!0,L("ready"),i}catch(n){u.value=[{error:`Failed to load SQLite: ${n.message}`}],console.error(n)}finally{E.value=!1,w.value=""}},q=async()=>{if(!i)return;const n=[],o=i.exec("SELECT name FROM sqlite_master WHERE type='table' AND name NOT LIKE 'sqlite_%'");if(o.length>0)for(const t of o[0].values){const d=t[0],r=i.exec(`PRAGMA table_info(${d})`),_=[];r.length>0&&_.push(...r[0].values.map(h=>({name:h[1],type:h[2]}))),n.push({name:d,columns:_})}y.value=n},R=async()=>{u.value=[],v.value=null,i||await M();try{const n=performance.now(),o=i.exec(b.value),t=performance.now();v.value=(t-n).toFixed(2),await q(),o.length===0?u.value=[{message:"Query executed successfully. No results returned."}]:u.value=o}catch(n){u.value=[{error:n.message}]}};return(n,o)=>(l(),s("div",V,[e("div",B,[e("div",F,[o[1]||(o[1]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})],-1)),g(" "+a(x(c)("tools.code-playground.sqlite.database")),1)]),e("div",j,[k.value?y.value.length===0?(l(),s("div",P,a(x(c)("tools.code-playground.sqlite.no_tables")),1)):(l(),s("div",Q,[(l(!0),s(p,null,f(y.value,t=>(l(),s("div",{key:t.name,class:"text-sm"},[e("div",$,[o[2]||(o[2]=e("svg",{class:"w-3 h-3 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)),g(" "+a(t.name),1)]),e("div",D,[(l(!0),s(p,null,f(t.columns,d=>(l(),s("div",{key:d.name,class:"flex justify-between text-xs text-slate-500 px-2 py-0.5 hover:bg-slate-800/50 rounded"},[e("span",null,a(d.name),1),e("span",J,a(d.type),1)]))),128))])]))),128))])):(l(),s("div",O,a(x(c)("tools.code-playground.sqlite.no_db")),1))])]),e("div",z,[e("div",G,[e("div",H,[e("div",K,[e("span",W,a(x(c)("tools.code-playground.sqlite.query")),1)]),e("button",{onClick:R,class:"px-4 py-1.5 rounded-lg font-medium text-sm transition-colors flex items-center gap-2 bg-emerald-600 hover:bg-emerald-500 text-white"},[o[3]||(o[3]=e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M8 5v14l11-7z"})],-1)),g(" "+a(x(c)("tools.code-playground.common.run")),1)])]),e("div",X,[I(U,{modelValue:b.value,"onUpdate:modelValue":o[0]||(o[0]=t=>b.value=t),language:"sql",theme:"vs-dark",height:"100%"},null,8,["modelValue"])])]),e("div",Y,[e("div",Z,[e("div",ee,[e("span",te,a(x(c)("tools.code-playground.sqlite.results")),1),v.value?(l(),s("span",se,a(v.value)+"ms",1)):N("",!0)])]),e("div",le,[u.value.length===0?(l(),s("div",oe," Run query to see results... ")):N("",!0),(l(!0),s(p,null,f(u.value,(t,d)=>(l(),s("div",{key:d,class:"mb-6 last:mb-0"},[t.error?(l(),s("div",ae," Error: "+a(t.error),1)):t.message?(l(),s("div",ne,a(t.message),1)):(l(),s("div",re,[e("table",de,[e("thead",null,[e("tr",null,[(l(!0),s(p,null,f(t.columns,r=>(l(),s("th",{key:r,class:"bg-slate-800 p-2 border border-slate-700 text-slate-300 font-medium whitespace-nowrap"},a(r),1))),128))])]),e("tbody",null,[(l(!0),s(p,null,f(t.values,(r,_)=>(l(),s("tr",{key:_,class:"hover:bg-slate-800/30"},[(l(!0),s(p,null,f(r,(h,C)=>(l(),s("td",{key:C,class:"p-2 border border-slate-700 text-slate-400 whitespace-nowrap font-mono"},a(h===null?"NULL":h),1))),128))]))),128))])]),e("div",ie,a(x(c)("tools.code-playground.sqlite.row_count",[t.values.length])),1)]))]))),128))])])])]))}};export{pe as default};
