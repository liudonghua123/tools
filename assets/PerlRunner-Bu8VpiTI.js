import{u as j,r as w,o as E,c as s,j as r,d as o,g as b,t as d,e as g,n as P,i as V,b as M,F as N,f as T}from"./index-HNFkyshc.js";import W from"./MonacoEditor-6BHKnU1_.js";import"./monaco-editor-CGO6wXTd.js";const F={class:"flex flex-col md:flex-row h-full"},S={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col border-b md:border-b-0 md:border-r border-slate-700"},q={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700 bg-slate-800/50"},I={class:"flex items-center gap-2"},L={key:0,class:"text-xs px-2 py-0.5 bg-emerald-600 text-white rounded-full"},O={key:1,class:"text-xs px-2 py-0.5 bg-slate-600 text-slate-300 rounded-full"},A=["disabled"],H={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},U={key:1,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},D={class:"flex-1 min-h-0"},G={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col bg-slate-900"},J={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700"},K={class:"flex items-center gap-3"},Q={class:"text-xs font-bold text-slate-400 uppercase tracking-wider"},X={key:0,class:"text-xs text-slate-500"},Y={key:0,class:"flex-1 flex items-center justify-center"},Z={class:"text-center space-y-4"},ee={class:"text-slate-400"},te={key:1,class:"flex-1 overflow-y-auto p-4 font-mono text-sm space-y-1"},oe={key:0,class:"text-red-400"},se={key:1,class:"text-indigo-400"},re={class:"whitespace-pre-wrap"},le={key:0,class:"text-slate-500 italic"},ue={__name:"PerlRunner",emits:["output","error","ready"],setup(ne,{emit:k}){const{t:c}=j(),_=k,h=w(`# Perl code runs in your browser with WebPerl
# No server required!

print "Hello from Perl $^V!\\n";

# Basic math
my $sum = 0;
$sum += $_ for (1..100);
print "Sum of 1 to 100: $sum\\n";

# Array operations
my @fruits = ("Apple", "Banana", "Cherry");
print "Fruits: ", join(", ", @fruits), "\\n";

# Map example
my @squares = map { $_ * $_ } (1..10);
print "Squares: @squares\\n";

# Subroutine example
sub greet {
    my $name = shift;
    return "Greetings, $name!";
}

print greet("Developer"), "\\n";
`),l=w([]),n=w(!1),f=w(!1),y=w(""),v=w(null),C=async()=>{if(window.Perl&&window.Perl.state==="Ready")return f.value=!0,window.Perl;if(window.Perl&&window.Perl.state==="Initializing")return new Promise(e=>{const t=()=>{window.Perl.state==="Ready"?(f.value=!0,e(window.Perl)):setTimeout(t,100)};t()});n.value=!0,y.value=c("tools.code-playground.perl.loading");try{const e="/tools/",t=`${e.endsWith("/")?e:e+"/"}webperl/`;if(await new Promise((i,m)=>{const u=document.createElement("script");u.src=`${t}webperl.js`,u.onload=()=>{typeof window<"u"&&(window.getScriptURL=(function(){for(var p=document.getElementsByTagName("script"),x=p.length-1;x>=0;x--)if(p[x].src&&p[x].src.indexOf("webperl.js")!==-1)return function(){return p[x].src};var B=p[p.length-1];return function(){return B.src}})()),i()},u.onerror=()=>m(new Error("Failed to load webperl.js")),document.head.appendChild(u)}),!window.Perl)throw new Error("WebPerl script loaded but window.Perl not found");window.Perl.trace=!0;const a=window.Perl.output;return window.Perl.output=(i,m)=>{typeof a=="function"&&a.call(window.Perl,i,m);const u=m===2?"error":"log";l.value.length>0&&l.value[l.value.length-1].type===u?l.value[l.value.length-1].message+=i:l.value.push({type:u,message:i})},new Promise((i,m)=>{console.log("Initializing WebPerl..."),window.Perl.init(()=>{console.log("WebPerl is Ready!"),f.value=!0,n.value=!1,y.value="",_("ready"),i(window.Perl)}),setTimeout(()=>{f.value||m(new Error("WebPerl initialization timed out"))},3e4)})}catch(e){throw l.value.push({type:"error",message:`Failed to load Perl: ${e.message}`}),console.error(e),n.value=!1,y.value="",e}},z=async()=>{l.value=[],v.value=null;try{const e=await C(),t=performance.now();if(e.state!=="Ready"&&e.state!=="Running")throw new Error(`Perl is in state ${e.state}, cannot run code.`);e.state==="Ready"&&e.start([]),e.eval(`$|=1;${h.value}`);const a=performance.now();v.value=(a-t).toFixed(2)}catch(e){l.value.push({type:"error",message:e.message}),_("error",e)}},$=()=>{l.value=[],v.value=null},R=e=>e==="error"?"text-red-400":"text-indigo-400";return E(()=>{}),(e,t)=>(r(),s("div",F,[o("div",S,[o("div",q,[o("div",I,[t[1]||(t[1]=o("svg",{class:"w-5 h-5 text-indigo-400",viewBox:"0 0 128 128",fill:"currentColor"},[o("path",{d:"M121.172 62.878c0-34.048-26.473-61.648-59.135-61.648C29.379 1.23 2.9 28.83 2.9 62.878s26.478 61.651 59.136 61.651c32.662 0 59.135-27.603 59.135-61.651z M53.34 127.516c-13.91-2.461-25.842-8.812-35.703-19.006C9.25 99.842 3.477 88.928.853 76.763c-1.137-5.256-1.137-20.287 0-25.54C2.629 43 6.075 34.835 10.776 27.714 13.89 23 23.004 13.888 27.716 10.773c7.123-4.7 15.293-8.15 23.514-9.921 5.253-1.137 20.286-1.137 25.543 0C89.58 3.617 100.225 9.4 109.41 18.585c9.187 9.186 14.97 19.828 17.739 32.639 1.133 5.252 1.133 20.283 0 25.54-2.769 12.806-8.552 23.448-17.739 32.634-9.038 9.041-19.55 14.812-32.147 17.65-4.467 1.009-19.238 1.297-23.923.468zm11.567-12.772c0-4.194-.062-4.497-.907-4.497-.838 0-.904.288-.869 3.897.043 4.264.343 5.572 1.211 5.284.401-.132.565-1.491.565-4.684zm-6.757 1.445c1.192-1.196 1.542-1.92 1.542-3.209 0-1.316-.16-1.635-.763-1.519-.417.078-.919.76-1.114 1.507-.194.748-1 1.904-1.783 2.57-1.418 1.196-1.472 2.192-.125 2.192.386 0 1.394-.697 2.243-1.541zm14.943 1.047c.167-.269-.339-1.036-1.122-1.698-.786-.666-1.589-1.822-1.783-2.57-.199-.747-.701-1.429-1.118-1.507-.6-.116-.76.203-.76 1.519 0 2.609 3.743 5.942 4.783 4.256zm-20.66-8.146c0-.261-.634-.822-1.41-1.246-5.054-2.769-10.985-7.176-14.28-10.61-6.433-6.71-9.33-13.388-9.4-21.678-.048-5.54.665-8.43 3.364-13.605 2.609-5.004 5.631-8.78 13.95-17.421 9.287-9.653 11.425-12.2 13.038-15.533 1.148-2.367 1.3-3.231 1.46-8.235.199-6.215-.18-10.506-.927-10.506-.339 0-.401 1.612-.21 5.234.623 11.592-1.53 15.19-14.892 24.881-9.202 6.674-13.424 10.3-16.613 14.264-4.518 5.61-6.52 10.466-7.018 17.05-1.207 15.868 8.848 29.629 26.59 36.385 3.914 1.487 6.348 1.881 6.348 1.02zm30.7-1.285c6.098-2.543 10.736-5.615 15.11-10.007 6.667-6.701 9.439-12.967 9.856-22.242.362-8.134-1.402-13.515-6.437-19.61-3.45-4.173-7.162-7.16-17.174-13.81-13.47-8.953-16.633-12.516-16.633-18.746 0-1.658.3-4.006.662-5.217.623-2.068.608-3.493-.02-1.862-.591 1.546-1.947.837-2.675-1.41l-.7-2.152.264 2.04c.942 7.242 1.06 10.276.642 16.615-.564 8.57-1.616 14.427-4.51 25.076-2.87 10.572-3.387 14.404-3.029 22.476.3 6.825 1.254 11.93 3.474 18.593 2.06 6.183 2.445 6.654 6.235 7.624 2.083.533 4.058 1.433 5.627 2.566 1.476 1.067 2.952 1.76 3.781 1.775.748.012 3.237-.755 5.526-1.709zm-1.371-3.076c-.565-.565-.3-1.048 1.912-3.493 6.97-7.694 10.094-15.641 10.183-25.906.063-6.993-1.483-11.627-6.2-18.593-2.13-3.15-9.634-11.008-13.263-13.893-2.66-2.114-5.398-5.72-5.885-7.76-.494-2.068.892-1.523 2.496.98.787 1.227 2.493 3.03 3.79 4.004 1.296.977 5.132 3.835 8.524 6.355 11.664 8.671 16.859 16.066 18.023 25.672.678 5.556-.397 11.3-3.107 16.634-2.812 5.525-7.937 11.545-12.326 14.477-2.703 1.803-3.556 2.115-4.147 1.523zm-22.837.584c.133-.343-1.036-2.535-2.593-4.875-4.128-6.191-5.924-9.606-7.598-14.454-1.414-4.085-1.492-4.641-1.504-10.883-.015-9.431 1.005-12.422 8.49-24.85 7.057-11.718 8.015-16.258 7.22-34.286-.288-6.46-.611-11.838-.72-11.95-.744-.744-.904 1.172-.627 7.67.545 12.94-.292 20.147-3.018 26.062-1.858 4.026-3.938 7.075-9.53 14.002-7.788 9.637-9.985 14.75-9.946 23.126.031 5.743.806 9.275 3.127 14.185 2.512 5.32 7.135 10.689 12.93 15.011 2.667 1.994 3.391 2.231 3.77 1.242z"})],-1)),t[2]||(t[2]=o("span",{class:"font-bold text-white"},"Perl 5",-1)),f.value?(r(),s("span",L,d(g(c)("tools.code-playground.common.ready")),1)):n.value?b("",!0):(r(),s("span",O,d(g(c)("tools.code-playground.common.not_loaded","Not loaded")),1))]),o("button",{onClick:z,disabled:n.value,class:P(["px-4 py-1.5 rounded-lg font-medium text-sm transition-colors flex items-center gap-2",n.value?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-500 text-white"])},[n.value?(r(),s("svg",H,[...t[3]||(t[3]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(r(),s("svg",U,[...t[4]||(t[4]=[o("path",{d:"M8 5v14l11-7z"},null,-1)])])),V(" "+d(n.value?"Loading...":g(c)("tools.code-playground.common.run")),1)],10,A)]),o("div",D,[M(W,{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=a=>h.value=a),language:"perl",theme:"vs-dark",height:"100%",minimap:!1},null,8,["modelValue"])])]),o("div",G,[o("div",J,[o("div",K,[o("span",Q,d(g(c)("tools.code-playground.common.output")),1),v.value?(r(),s("span",X,d(v.value)+"ms",1)):b("",!0)]),o("button",{onClick:$,class:"text-xs text-slate-500 hover:text-white transition-colors"},d(g(c)("tools.code-playground.common.clear")),1)]),n.value?(r(),s("div",Y,[o("div",Z,[t[5]||(t[5]=o("div",{class:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto"},null,-1)),o("div",ee,d(y.value),1),t[6]||(t[6]=o("div",{class:"text-xs text-slate-500"},"Initializing WebPerl...",-1))])])):(r(),s("div",te,[(r(!0),s(N,null,T(l.value,(a,i)=>(r(),s("div",{key:i,class:P(["flex items-start gap-2",R(a.type)])},[a.type==="error"?(r(),s("span",oe,"✗")):(r(),s("span",se,"›")),o("span",re,d(a.message),1)],2))),128)),l.value.length===0&&!n.value?(r(),s("div",le,' Click "Run" to execute Perl code... ')):b("",!0)]))])]))}};export{ue as default};
