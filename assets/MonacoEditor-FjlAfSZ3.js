import{e as n,K as d,a as y}from"./monaco-editor-DrHUTMTD.js";import{_ as w,r as c,m as s,o as k,D as v,a as S,c as V,j as L,E as M}from"./index-Q3LHmwEb.js";const T={__name:"MonacoEditor",props:{modelValue:{type:String,default:""},language:{type:String,default:"javascript"},theme:{type:String,default:null},readOnly:{type:Boolean,default:!1},height:{type:String,default:"300px"},minimap:{type:Boolean,default:!0},lineNumbers:{type:Boolean,default:!0},wordWrap:{type:String,default:"on"},fontSize:{type:Number,default:14},tabSize:{type:Number,default:2}},emits:["update:modelValue","format","ready"],setup(m,{expose:f,emit:p}){const r=c(!1);(()=>{const t=localStorage.getItem("theme");t?r.value=t==="dark":r.value=window.matchMedia("(prefers-color-scheme: dark)").matches})(),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>{localStorage.getItem("theme")||(r.value=o.matches)}),self.MonacoEnvironment={getWorker(t,o){return o==="json"?new Worker(new URL("/tools/assets/json.worker-BMhEWbJs.js",import.meta.url),{type:"module"}):o==="css"||o==="scss"||o==="less"?new Worker(new URL("/tools/assets/css.worker-CcP-duhg.js",import.meta.url),{type:"module"}):o==="html"||o==="handlebars"||o==="razor"?new Worker(new URL("/tools/assets/html.worker-4BlL5qLP.js",import.meta.url),{type:"module"}):o==="typescript"||o==="javascript"?new Worker(new URL("/tools/assets/ts.worker-h-kbVMTq.js",import.meta.url),{type:"module"}):new Worker(new URL("/tools/assets/editor.worker-D6OT0mgP.js",import.meta.url),{type:"module"})}};const a=m,i=p,l=c(null);let e=null;const h=()=>{if(!l.value)return;const t=a.theme||(r.value?"vs-dark":"vs");e=n.create(l.value,{value:a.modelValue,language:a.language,theme:t,readOnly:a.readOnly,automaticLayout:!0,minimap:{enabled:a.minimap},lineNumbers:a.lineNumbers?"on":"off",wordWrap:a.wordWrap,fontSize:a.fontSize,tabSize:a.tabSize,scrollBeyondLastLine:!1,padding:{top:12,bottom:12},smoothScrolling:!0,cursorBlinking:"smooth",cursorSmoothCaretAnimation:"on",renderWhitespace:"selection",bracketPairColorization:{enabled:!0},fontFamily:"'JetBrains Mono', 'Fira Code', Consolas, Monaco, 'Courier New', monospace",fontLigatures:!0}),e.onDidChangeModelContent(()=>{i("update:modelValue",e.getValue())}),e.addAction({id:"format-document",label:"Format Document",keybindings:[d.Shift|d.Alt|y.KeyF],run:()=>{e.getAction("editor.action.formatDocument").run(),i("format")}}),i("ready",e)};f({format:async()=>{var t;e&&(await((t=e.getAction("editor.action.formatDocument"))==null?void 0:t.run()),i("format"))},setValue:t=>{e&&e.getValue()!==t&&e.setValue(t)},getValue:()=>e?e.getValue():"",focus:()=>{e==null||e.focus()},getEditor:()=>e}),s(()=>a.modelValue,t=>{e&&e.getValue()!==t&&e.setValue(t)}),s(()=>a.language,t=>{e&&n.setModelLanguage(e.getModel(),t)}),s(()=>a.theme,t=>{const o=t||(r.value?"vs-dark":"vs");n.setTheme(o)}),s(r,t=>{if(!a.theme){const o=t?"vs-dark":"vs";e&&n.setTheme(o)}},{immediate:!0});const u=t=>{if(t.key==="theme"){const o=t.newValue;if(o&&(r.value=o==="dark",e&&!a.theme)){const g=r.value?"vs-dark":"vs";n.setTheme(g)}}};return window.addEventListener("storage",u),s(()=>a.readOnly,t=>{e&&e.updateOptions({readOnly:t})}),k(()=>{v(()=>{h()})}),S(()=>{e&&e.dispose(),window.removeEventListener("storage",u)}),(t,o)=>(L(),V("div",{ref_key:"containerRef",ref:l,class:"monaco-editor-container",style:M({height:m.height})},null,4))}},z=w(T,[["__scopeId","data-v-51c51776"]]);export{z as default};
