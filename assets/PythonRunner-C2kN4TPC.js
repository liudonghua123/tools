import{_ as N,u as R,r as c,o as I,c as s,j as a,d as o,g,t as u,e as f,h as S,q as T,F as w,f as _,n as E,i as U,b as $}from"./index-QYSNyAyw.js";import D from"./MonacoEditor-CUf4aWgq.js";import{f as A,a as M}from"./ExampleLoader-C0CuCz3g.js";import"./monaco-editor-CGO6wXTd.js";const O={class:"flex flex-col md:flex-row h-full"},q={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col border-b md:border-b-0 md:border-r border-slate-700"},W={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700 bg-slate-800/50"},G={class:"flex items-center gap-4"},J={class:"flex items-center gap-2"},K={key:0,class:"text-xs px-2 py-0.5 bg-emerald-600 text-white rounded-full"},Q={key:1,class:"text-xs px-2 py-0.5 bg-slate-600 text-slate-300 rounded-full"},X={class:"relative group"},Y=["label"],Z=["value"],ee=["disabled"],te={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},oe={key:1,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},se={class:"flex-1 min-h-0"},ae={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col bg-slate-900"},le={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700"},ne={class:"flex items-center gap-3"},re={class:"text-xs font-bold text-slate-400 uppercase tracking-wider"},de={key:0,class:"text-xs text-slate-500"},ie={key:0,class:"flex-1 flex items-center justify-center"},ue={class:"text-center space-y-4"},ce={class:"text-slate-400"},pe={key:1,class:"flex-1 overflow-y-auto p-4 font-mono text-sm space-y-1"},me={key:0,class:"text-red-400"},ve={key:1,class:"text-emerald-400"},he={class:"whitespace-pre-wrap"},ye={key:0,class:"text-slate-500 italic"},xe={__name:"PythonRunner",emits:["output","error","ready"],setup(fe,{emit:j}){const{t:v}=R(),b=j,h=c(""),k=c(null),y=c(""),i=c([]),n=c(!1),C=c(!1),p=c(""),x=c(null);let m=null;const B=async()=>{try{const t=await A("python");if(k.value=t,t.chapters&&t.chapters.length>0&&t.chapters[0].examples.length>0){const e=t.chapters[0].examples[0];y.value=e.path,h.value=await M("python",e.path)}}catch(t){console.error("Failed to load Python manifest:",t)}},F=async()=>{if(m)return m;if(console.log("Loading Pyodide runtime..."),window.loadPyodide)return await P(window.loadPyodide);n.value=!0,p.value="Loading Pyodide runtime...";try{const t="/tools/",e=`${t.endsWith("/")?t:t+"/"}pyodide/`;if(await new Promise((r,l)=>{const d=document.createElement("script");d.src=`${e}pyodide.js`,d.onload=r,d.onerror=()=>l(new Error("Failed to load pyodide.js script")),document.head.appendChild(d)}),p.value="Initializing Python environment...",!window.loadPyodide)throw new Error("Pyodide script loaded but loadPyodide not found in window");return await P(window.loadPyodide,e)}catch(t){throw i.value.push({type:"error",message:`Failed to load Pyodide: ${t.message}`}),t}finally{n.value=!1,p.value=""}},P=async(t,e)=>(m=await t({indexURL:e}),m.setStdout({batched:r=>{i.value.push({type:"log",message:r})}}),m.setStderr({batched:r=>{i.value.push({type:"error",message:r})}}),C.value=!0,b("ready"),m),z=async()=>{if(y.value){V();try{n.value=!0,p.value="Loading example...",h.value=await M("python",y.value)}catch(t){i.value.push({type:"error",message:`Failed to load example: ${t.message}`})}finally{n.value=!1,p.value=""}}},H=async()=>{i.value=[],x.value=null;try{const t=await F(),e=performance.now();await t.runPythonAsync(h.value.replace(/\r/g,""));const r=performance.now();x.value=(r-e).toFixed(2)}catch(t){i.value.push({type:"error",message:t.message}),b("error",t)}},V=()=>{i.value=[],x.value=null},L=t=>t==="error"?"text-red-400":"text-emerald-400";return I(()=>{B()}),(t,e)=>{var r;return a(),s("div",O,[o("div",q,[o("div",W,[o("div",G,[o("div",J,[e[2]||(e[2]=o("svg",{class:"w-5 h-5 text-yellow-400",viewBox:"0 0 128 128",fill:"currentColor"},[o("path",{d:"M49.33 62h29.159C86.606 62 93 55.132 93 46.981V19.183c0-7.912-6.632-13.856-14.555-15.176-5.014-.835-10.195-1.215-15.187-1.191-4.99.023-9.612.448-13.805 1.191C37.098 6.188 35 10.758 35 19.183V30h29v4H23.776c-8.484 0-15.914 5.108-18.237 14.811-2.681 11.12-2.8 17.919 0 29.53C7.614 86.983 12.569 93 21.054 93H31V79.952C31 70.315 39.428 62 49.33 62zm-1.838-39.11c-3.026 0-5.478-2.479-5.478-5.545 0-3.079 2.451-5.581 5.478-5.581 3.015 0 5.479 2.502 5.479 5.581-.001 3.066-2.465 5.545-5.479 5.545zm74.789 25.921C120.183 40.363 116.178 34 107.682 34H97v12.981C97 57.031 88.206 65 78.489 65H49.33C41.342 65 35 72.326 35 80.326v27.8c0 7.91 6.745 12.564 14.462 14.834 9.242 2.717 17.994 3.208 29.051 0C85.862 120.831 93 116.549 93 108.126V97H64v-4h43.682c8.484 0 11.647-5.776 14.599-14.66 3.047-9.145 2.916-17.799 0-29.529zm-41.955 55.606c3.027 0 5.479 2.479 5.479 5.547 0 3.076-2.451 5.579-5.479 5.579-3.015 0-5.478-2.502-5.478-5.579 0-3.068 2.463-5.547 5.478-5.547z"})],-1)),e[3]||(e[3]=o("span",{class:"font-bold text-white"},"Python",-1)),C.value?(a(),s("span",K,u(f(v)("tools.code-playground.common.ready")),1)):n.value?g("",!0):(a(),s("span",Q,u(f(v)("tools.code-playground.common.not_loaded","Not loaded")),1))]),o("div",X,[S(o("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>y.value=l),onChange:z,class:"appearance-none bg-slate-700/50 border border-slate-600 text-slate-200 text-xs rounded px-2 pr-6 py-1 hover:border-slate-500 focus:outline-none focus:ring-1 focus:ring-yellow-500 transition-all cursor-pointer"},[(a(!0),s(w,null,_((r=k.value)==null?void 0:r.chapters,l=>(a(),s("optgroup",{key:l.title,label:l.title},[(a(!0),s(w,null,_(l.examples,d=>(a(),s("option",{key:d.path,value:d.path},u(d.name),9,Z))),128))],8,Y))),128))],544),[[T,y.value]]),e[4]||(e[4]=o("div",{class:"absolute inset-y-0 right-1.5 flex items-center pointer-events-none text-slate-400"},[o("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})])],-1))])]),o("button",{onClick:H,disabled:n.value,class:E(["px-4 py-1.5 rounded-lg font-medium text-sm transition-colors flex items-center gap-2",n.value?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-emerald-600 hover:bg-emerald-500 text-white"])},[n.value?(a(),s("svg",te,[...e[5]||(e[5]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(a(),s("svg",oe,[...e[6]||(e[6]=[o("path",{d:"M8 5v14l11-7z"},null,-1)])])),U(" "+u(n.value?"Loading...":f(v)("tools.code-playground.common.run")),1)],10,ee)]),o("div",se,[$(D,{modelValue:h.value,"onUpdate:modelValue":e[1]||(e[1]=l=>h.value=l),language:"python",theme:"vs-dark",height:"100%",minimap:!1},null,8,["modelValue"])])]),o("div",ae,[o("div",le,[o("div",ne,[o("span",re,u(f(v)("tools.code-playground.common.output")),1),x.value?(a(),s("span",de,u(x.value)+"ms",1)):g("",!0)]),o("button",{onClick:V,class:"text-xs text-slate-500 hover:text-white transition-colors"},u(f(v)("tools.code-playground.common.clear")),1)]),n.value?(a(),s("div",ie,[o("div",ue,[e[7]||(e[7]=o("div",{class:"w-12 h-12 border-4 border-violet-500 border-t-transparent rounded-full animate-spin mx-auto"},null,-1)),o("div",ce,u(p.value),1),e[8]||(e[8]=o("div",{class:"text-xs text-slate-500"},"First load may take a few seconds...",-1))])])):(a(),s("div",pe,[(a(!0),s(w,null,_(i.value,(l,d)=>(a(),s("div",{key:d,class:E(["flex items-start gap-2",L(l.type)])},[l.type==="error"?(a(),s("span",me,"✗")):(a(),s("span",ve,"›")),o("span",he,u(l.message),1)],2))),128)),i.value.length===0&&!n.value?(a(),s("div",ye,' Click "Run" to execute Python code... ')):g("",!0)]))])])}}},ke=N(xe,[["__scopeId","data-v-1a32a507"]]);export{ke as default};
