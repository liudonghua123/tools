import{_ as R,u as T,r as i,l as V,o as j,a as A,c as d,j as c,d as e,h as H,q as N,F as W,f as S,t as u,e as _,n as I,i as $,b as D,g as q}from"./index-hxKMd8CD.js";import O from"./MonacoEditor-D13muXM5.js";import{x as G,a as J}from"./xterm-Btcyv0ds.js";import"./monaco-editor-CGO6wXTd.js";const K={class:"flex flex-col md:flex-row h-full"},P={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col border-b md:border-b-0 md:border-r border-slate-700"},Q={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700 bg-slate-800/50"},X={class:"flex items-center gap-2"},Y=["value"],Z={key:0,class:"text-xs px-2 py-0.5 bg-emerald-600 text-white rounded-full"},ee={key:1,class:"text-xs px-2 py-0.5 bg-slate-600 text-slate-300 rounded-full"},te=["disabled"],oe={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},se={key:1,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},ne={class:"flex-1 min-h-0"},le={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col bg-slate-900 border-t md:border-t-0 md:border-l border-slate-700"},ae={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700"},re={class:"flex items-center gap-3"},ie={class:"text-xs font-bold text-slate-400 uppercase tracking-wider"},de={key:0,class:"text-xs text-slate-500"},ce={class:"flex-1 min-h-0 p-2 bg-[#0f172a]"},ue={__name:"CppRunner",emits:["output","error","ready"],setup(me,{emit:B}){const{t:h}=T(),z=B,g={hello:{name:"Hello World",code:`#include <stdio.h>

int main() {
  printf("Hello, World!\\n");
  return 0;
}
`},loop:{name:"Loop",code:`#include <stdio.h>

int main() {
  for (int i = 1; i <= 10; ++i) {
    printf("Count: %d\\n", i);
  }
  return 0;
}
`},math:{name:"Math",code:`#include <iostream>
#include <vector>
#include <numeric>

int main() {
  std::vector<int> v = {1, 2, 3, 4, 5};
  int sum = std::accumulate(v.begin(), v.end(), 0);
  std::cout << "Sum: " << sum << std::endl;
  return 0;
}
`}},y=i("hello"),w=i(g.hello.code);V(y,o=>{g[o]&&(w.value=g[o].code)});const n=i(!1),p=i(!1),f=i(null),a=i("");let r=null,s=null,v=null;const C=i(null),E=()=>{s=new G.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:{background:"#0f172a",foreground:"#e2e8f0"}}),v=new J.FitAddon,s.loadAddon(v),s.open(C.value),v.fit(),s.write(`\x1B[38;5;244mResult will appear here...\x1B[0m\r
`)},U=async()=>{n.value=!0,a.value="Initializing C++ environment...";try{const o="/tools/",t=`${o.endsWith("/")?o:o+"/"}wasm-clang/worker.js`;r=new Worker(t),r.onmessage=m=>{const{id:b,data:k}=m.data;if(b==="write"){const x=k.replace(/\n/g,`\r
`);s.write(x)}};const l=new MessageChannel;l.port1.onmessage=m=>{const{id:b,data:k}=m.data;if(b==="write"){const x=k;if(x.includes("Untarring sysroot.tar")){a.value="Unpacking system files...";return}if(a.value==="Unpacking system files..."&&x.includes("done")){a.value="",p.value=!0,n.value=!1,z("ready");return}s.write(x.replace(/\n/g,`\r
`))}},r.postMessage({id:"constructor",data:l.port2},[l.port2])}catch(o){a.value=`Failed to load C++ environment: ${o.message}`,n.value=!1,console.error(o)}},F=async()=>{if(!r||!p.value)return;n.value=!0,a.value="Compiling and running...",s.clear(),f.value=null;const o=performance.now();try{r.postMessage({id:"compileLinkRun",data:w.value}),setTimeout(()=>{n.value=!1;const t=performance.now();f.value=(t-o).toFixed(2)},1e3)}catch(t){s.write(`\x1B[31mError: ${t.message}\x1B[0m\r
`),n.value=!1}},L=()=>{s.clear(),f.value=null};j(async()=>{E(),await U(),window.addEventListener("resize",M)}),A(()=>{r&&r.terminate(),s&&s.dispose(),window.removeEventListener("resize",M)});const M=()=>{v&&v.fit()};return(o,t)=>(c(),d("div",K,[e("div",P,[e("div",Q,[e("div",X,[t[2]||(t[2]=e("svg",{class:"w-5 h-5 text-blue-500",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M22.24 7.03h-2.14l-.32-.94c-.26-.74-.53-1.42-.8-2.03-.55-1.25-1.52-1.92-2.9-2.01l-10-2.33-.2-.03c-2.32-.23-3.69 1.14-4.08 4.09l-.49 3.19H5.03C2.26 6.97 0 9.23 0 12c0 2.75 2.24 4.97 5 5h.06l-.42 2.76c-.41 2.94.94 4.3 3.25 4.07l.2-.03 10-2.33c1.37-.08 2.34-.76 2.89-2.01.27-.61.54-1.29.8-2.03l.32-.94h2.14c.97 0 1.76-.79 1.76-1.76v-5.98c0-.96-.79-1.75-1.76-1.75zM5 15c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm13.43 3.84c-.2.43-.59.66-1.07.72l-10 2.33c-.76.07-1.21-.39-1.07-1.36l1.53-10.03c.14-.94.88-1.52 1.63-1.45l10 2.33c.47.05.8.35 1.01.78.22.42.23.97-.03 1.69l-2 5.3c-.26.73-.25 1.28-.03 1.69z"})],-1)),t[3]||(t[3]=e("span",{class:"font-bold text-white"},"C/C++",-1)),H(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>y.value=l),class:"ml-2 bg-slate-700 text-xs text-white border-none rounded px-2 py-1 outline-none focus:ring-1 focus:ring-blue-500"},[(c(),d(W,null,S(g,(l,m)=>e("option",{key:m,value:m},u(l.name),9,Y)),64))],512),[[N,y.value]]),p.value?(c(),d("span",Z,u(_(h)("tools.code-playground.common.ready")),1)):(c(),d("span",ee,u(a.value||"Loading..."),1))]),e("button",{onClick:F,disabled:n.value||!p.value,class:I(["px-4 py-1.5 rounded-lg font-medium text-sm transition-colors flex items-center gap-2",n.value||!p.value?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500 text-white"])},[n.value?(c(),d("svg",oe,[...t[4]||(t[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(c(),d("svg",se,[...t[5]||(t[5]=[e("path",{d:"M8 5v14l11-7z"},null,-1)])])),$(" "+u(n.value?"Running...":_(h)("tools.code-playground.common.run")),1)],10,te)]),e("div",ne,[D(O,{modelValue:w.value,"onUpdate:modelValue":t[1]||(t[1]=l=>w.value=l),language:"cpp",theme:"vs-dark",height:"100%",minimap:!1},null,8,["modelValue"])])]),e("div",le,[e("div",ae,[e("div",re,[e("span",ie,u(_(h)("tools.code-playground.common.output")),1),f.value?(c(),d("span",de,u(f.value)+"ms",1)):q("",!0)]),e("button",{onClick:L,class:"text-xs text-slate-500 hover:text-white transition-colors"},u(_(h)("tools.code-playground.common.clear")),1)]),e("div",ce,[e("div",{ref_key:"terminalContainer",ref:C,class:"w-full h-full"},null,512)])])]))}},he=R(ue,[["__scopeId","data-v-8fb95062"]]);export{he as default};
