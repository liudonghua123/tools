import{_ as R,u as T,r as i,l as V,o as j,a as A,c as d,j as u,d as e,h as N,q as W,F as H,f as S,t as c,e as _,n as I,i as $,b as D,g as q}from"./index-HNFkyshc.js";import O from"./MonacoEditor-6BHKnU1_.js";import{x as G,a as J}from"./xterm-Btcyv0ds.js";import"./monaco-editor-CGO6wXTd.js";const K={class:"flex flex-col md:flex-row h-full"},P={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col border-b md:border-b-0 md:border-r border-slate-700"},Q={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700 bg-slate-800/50"},X={class:"flex items-center gap-2"},Y=["value"],Z={key:0,class:"text-xs px-2 py-0.5 bg-emerald-600 text-white rounded-full"},ee={key:1,class:"text-xs px-2 py-0.5 bg-slate-600 text-slate-300 rounded-full"},te=["disabled"],oe={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},se={key:1,class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24"},le={class:"flex-1 min-h-0"},ne={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col bg-slate-900 border-t md:border-t-0 md:border-l border-slate-700"},ae={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700"},re={class:"flex items-center gap-3"},ie={class:"text-xs font-bold text-slate-400 uppercase tracking-wider"},de={key:0,class:"text-xs text-slate-500"},ue={class:"flex-1 min-h-0 p-2 bg-[#0f172a]"},ce={__name:"CppRunner",emits:["output","error","ready"],setup(me,{emit:z}){const{t:g}=T(),B=z,h={hello:{name:"Hello World",code:`#include <stdio.h>

int main() {
  printf("Hello, World!\\n");
  return 0;
}
`},loop:{name:"Loop",code:`#include <stdio.h>

int main() {
  for (int i = 1; i <= 10; ++i) {
    printf("Count: %d\\n", i);
  }
  return 0;
}
`},math:{name:"Math",code:`#include <iostream>
#include <vector>
#include <numeric>

int main() {
  std::vector<int> v = {1, 2, 3, 4, 5};
  int sum = std::accumulate(v.begin(), v.end(), 0);
  std::cout << "Sum: " << sum << std::endl;
  return 0;
}
`}},y=i("hello"),w=i(h.hello.code);V(y,o=>{h[o]&&(w.value=h[o].code)});const l=i(!1),p=i(!1),f=i(null),a=i("");let r=null,s=null,v=null;const C=i(null),L=()=>{s=new G.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:{background:"#0f172a",foreground:"#e2e8f0"}}),v=new J.FitAddon,s.loadAddon(v),s.open(C.value),v.fit(),s.write(`\x1B[38;5;244mResult will appear here...\x1B[0m\r
`)},E=async()=>{l.value=!0,a.value="Initializing C++ environment...";try{const o="/tools/",t=`${o.endsWith("/")?o:o+"/"}wasm-clang/worker.js`;r=new Worker(t),r.onmessage=m=>{const{id:b,data:k}=m.data;if(b==="write"){const x=k.replace(/\n/g,`\r
`);s.write(x)}};const n=new MessageChannel;n.port1.onmessage=m=>{const{id:b,data:k}=m.data;if(b==="write"){const x=k;if(x.includes("Untarring sysroot.tar")){a.value="Unpacking system files...";return}if(a.value==="Unpacking system files..."&&x.includes("done")){a.value="",p.value=!0,l.value=!1,B("ready");return}s.write(x.replace(/\n/g,`\r
`))}},r.postMessage({id:"constructor",data:n.port2},[n.port2])}catch(o){a.value=`Failed to load C++ environment: ${o.message}`,l.value=!1,console.error(o)}},U=async()=>{if(!r||!p.value)return;l.value=!0,a.value="Compiling and running...",s.clear(),f.value=null;const o=performance.now();try{r.postMessage({id:"compileLinkRun",data:w.value}),setTimeout(()=>{l.value=!1;const t=performance.now();f.value=(t-o).toFixed(2)},1e3)}catch(t){s.write(`\x1B[31mError: ${t.message}\x1B[0m\r
`),l.value=!1}},F=()=>{s.clear(),f.value=null};j(async()=>{L(),await E(),window.addEventListener("resize",M)}),A(()=>{r&&r.terminate(),s&&s.dispose(),window.removeEventListener("resize",M)});const M=()=>{v&&v.fit()};return(o,t)=>(u(),d("div",K,[e("div",P,[e("div",Q,[e("div",X,[t[2]||(t[2]=e("svg",{class:"w-5 h-5 text-blue-500",viewBox:"0 0 128 128",fill:"currentColor"},[e("path",{d:"M117.513 18.355l-3.235-5.603a11.536 11.536 0 00-15.75-4.22L61.642 29.83a48.27 48.27 0 00-6.04-2.858C45.335 23.367 33.91 22.067 23.778 27.915a39.22 39.22 0 00-14.35 14.35C3.58 52.56.98 64.122.98 75.83 1.012 101.48 18.67 119.106 43.687 119.106a44.6 44.6 0 0021.782-5.462l33.868 19.553a11.536 11.536 0 0015.75-4.22l3.235-5.604a11.536 11.536 0 00-4.22-15.75L78.68 87.21a48.514 48.514 0 002.822-5.594c3.483-8.491 3.515-18.064-.096-26.471a41.05 41.05 0 00-2.858-6.04l34.744-20.06a11.536 11.536 0 004.22-14.89zM52.022 93.9c-4.992 2.883-11.233 2.915-16.193.096a18.279 18.279 0 01-6.666-6.666c-2.787-4.832-2.787-10.724 0-15.556a18.279 18.279 0 016.666-6.666c4.96-2.819 11.2-2.819 16.193.064a18.279 18.279 0 016.666 6.666c2.787 4.832 2.819 10.724.032 15.556a18.441 18.441 0 01-6.698 6.506zm37.28-3.048l-1.636 2.822a1.868 1.868 0 01-2.532.61L30.133 63.385l1.603-2.822a1.868 1.868 0 012.532-.61l55.034 31.796a1.83 1.83 0 01.61 1.636l-.61 1.25c-.21.21-.42.42-.61.61h-.61l-.61-2.918zm14.89-25.922a1.868 1.868 0 01-.61 2.532l-55.034 31.796-1.503-2.612a1.868 1.868 0 01.61-2.532l55.034-31.796a1.83 1.83 0 01.61.61l.894 1.15-.001.864z"})],-1)),t[3]||(t[3]=e("span",{class:"font-bold text-white"},"C/C++",-1)),N(e("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>y.value=n),class:"ml-2 bg-slate-700 text-xs text-white border-none rounded px-2 py-1 outline-none focus:ring-1 focus:ring-blue-500"},[(u(),d(H,null,S(h,(n,m)=>e("option",{key:m,value:m},c(n.name),9,Y)),64))],512),[[W,y.value]]),p.value?(u(),d("span",Z,c(_(g)("tools.code-playground.common.ready")),1)):(u(),d("span",ee,c(a.value||"Loading..."),1))]),e("button",{onClick:U,disabled:l.value||!p.value,class:I(["px-4 py-1.5 rounded-lg font-medium text-sm transition-colors flex items-center gap-2",l.value||!p.value?"bg-slate-600 text-slate-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-500 text-white"])},[l.value?(u(),d("svg",oe,[...t[4]||(t[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(u(),d("svg",se,[...t[5]||(t[5]=[e("path",{d:"M8 5v14l11-7z"},null,-1)])])),$(" "+c(l.value?"Running...":_(g)("tools.code-playground.common.run")),1)],10,te)]),e("div",le,[D(O,{modelValue:w.value,"onUpdate:modelValue":t[1]||(t[1]=n=>w.value=n),language:"cpp",theme:"vs-dark",height:"100%",minimap:!1},null,8,["modelValue"])])]),e("div",ne,[e("div",ae,[e("div",re,[e("span",ie,c(_(g)("tools.code-playground.common.output")),1),f.value?(u(),d("span",de,c(f.value)+"ms",1)):q("",!0)]),e("button",{onClick:F,class:"text-xs text-slate-500 hover:text-white transition-colors"},c(_(g)("tools.code-playground.common.clear")),1)]),e("div",ue,[e("div",{ref_key:"terminalContainer",ref:C,class:"w-full h-full"},null,512)])])]))}},ge=R(ce,[["__scopeId","data-v-907f50fe"]]);export{ge as default};
