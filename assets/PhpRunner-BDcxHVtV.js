import{_ as C}from"./monaco-editor-CIrctJzJ.js";import $ from"./MonacoEditor-w0Cn9MOS.js";import{r as u,c as n,j as l,d as e,g as y,t as m,b as j,F as L,f as A,n as V}from"./index-EXevfkqS.js";const E={class:"flex h-full"},H={class:"w-1/2 flex flex-col border-r border-slate-700"},B={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700 bg-slate-800/50"},S={class:"flex items-center gap-2"},z={key:0,class:"text-xs px-2 py-0.5 bg-emerald-600 text-white rounded-full"},F=["disabled"],M={class:"flex-1 min-h-0"},R={class:"w-1/2 flex flex-col bg-slate-900"},W={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700"},O={class:"flex items-center gap-3"},T={key:0,class:"text-xs text-slate-500"},N={key:0,class:"flex-1 flex items-center justify-center"},q={class:"text-center space-y-4"},D={class:"text-slate-400"},U={key:1,class:"flex-1 overflow-y-auto p-4 font-mono text-sm space-y-1"},I={key:0,class:"text-red-400"},G={key:1,class:"text-slate-500"},J={key:2,class:"text-blue-400"},K={class:"whitespace-pre-wrap"},ee={__name:"PhpRunner",emits:["output","error","ready"],setup(Q,{emit:_}){const g=_,h=u(`<?php
$version = phpversion();
echo "Hello from PHP $version!\\n";

// Array example
$fruits = ["Apple", "Banana", "Cherry"];
echo "Fruits:\\n";
foreach ($fruits as $fruit) {
    echo "- $fruit\\n";
}

// Math
echo "\\nSqrt(16) = " . sqrt(16) . "\\n";
?>`),i=u([]),c=u(!1),f=u(!1),v=u(""),p=u(null);let d=null;const b=async()=>{if(d)return d;console.log("Loading PHP runtime..."),c.value=!0,v.value="Loading PHP runtime...";try{const t="/tools/",s=`${t.endsWith("/")?t:t+"/"}php-wasm/`,{PhpWeb:o}=await C(async()=>{const{PhpWeb:a}=await import(`${s}PhpWeb.mjs`);return{PhpWeb:a}},[]);return d=new o,d.addEventListener("output",a=>{const r=a.detail,x=Array.isArray(r)?r.join(""):String(r);i.value.push({type:"log",message:x})}),d.addEventListener("error",a=>{const r=a.detail,x=Array.isArray(r)?r.join(""):String(r);i.value.push({type:"error",message:x})}),new Promise((a,r)=>{d.addEventListener("ready",()=>{f.value=!0,g("ready"),a(d)})})}catch(t){return i.value.push({type:"error",message:`Failed to load PHP: ${t.message}`}),Promise.reject(t)}finally{c.value=!1,v.value=""}},w=async()=>{i.value=[],p.value=null;try{const t=await b(),s=performance.now();let o=h.value;const a=await t.run(o),r=performance.now();p.value=(r-s).toFixed(2),i.value.push({type:"info",message:`Program exited with code ${a}`})}catch(t){i.value.push({type:"error",message:t.message})}},P=()=>{i.value=[],p.value=null},k=t=>t==="error"?"text-red-400":t==="info"?"text-slate-500 italic":"text-blue-400";return(t,s)=>(l(),n("div",E,[e("div",H,[e("div",B,[e("div",S,[s[1]||(s[1]=e("svg",{class:"w-5 h-5 text-indigo-400",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.5 15h-9v-2h9v2zm0-4h-9V9h9v4z"}),e("path",{d:"M7 9h10v4H7z",opacity:".3"})],-1)),s[2]||(s[2]=e("span",{class:"font-bold text-white"},"PHP (WASM)",-1)),f.value?(l(),n("span",z,"Ready")):y("",!0)]),e("button",{onClick:w,disabled:c.value,class:"px-4 py-1.5 rounded-lg font-medium text-sm transition-colors flex items-center gap-2 bg-emerald-600 hover:bg-emerald-500 text-white disabled:bg-slate-600 disabled:text-slate-400"},m(c.value?"Loading...":"Run"),9,F)]),e("div",M,[j($,{modelValue:h.value,"onUpdate:modelValue":s[0]||(s[0]=o=>h.value=o),language:"php",theme:"vs-dark",height:"100%"},null,8,["modelValue"])])]),e("div",R,[e("div",W,[e("div",O,[s[3]||(s[3]=e("span",{class:"text-xs font-bold text-slate-400 uppercase tracking-wider"},"Output",-1)),p.value?(l(),n("span",T,m(p.value)+"ms",1)):y("",!0)]),e("button",{onClick:P,class:"text-xs text-slate-500 hover:text-white"},"Clear")]),c.value?(l(),n("div",N,[e("div",q,[s[4]||(s[4]=e("div",{class:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto"},null,-1)),e("div",D,m(v.value),1)])])):(l(),n("div",U,[(l(!0),n(L,null,A(i.value,(o,a)=>(l(),n("div",{key:a,class:V(["flex items-start gap-2",k(o.type)])},[o.type==="error"?(l(),n("span",I,"✗")):o.type==="info"?(l(),n("span",G,"ℹ")):(l(),n("span",J,"›")),e("span",K,m(o.message),1)],2))),128))]))])]))}};export{ee as default};
