import{r as g,l as x,o as C,A as j,a as B,c as y,j as w,C as T,u as D,k as O,b as _,d as e,p as W,T as E,h as U,t as f,e as m,q as R,F,f as A,n as S,i as k,g as z}from"./index-CpdbSi_Z.js";import{e as h}from"./monaco-editor-CGO6wXTd.js";const H={__name:"MonacoDiffEditor",props:{original:{type:String,default:""},modified:{type:String,default:""},language:{type:String,default:"plaintext"},theme:{type:String,default:"vs-dark"},renderSideBySide:{type:Boolean,default:!0},readOnly:{type:Boolean,default:!1}},emits:["update:original","update:modified","ready"],setup(v,{emit:u}){self.MonacoEnvironment||(self.MonacoEnvironment={getWorker(s,i){return i==="json"?new Worker(new URL("/tools/assets/json.worker-leyajbqV.js",import.meta.url),{type:"module"}):i==="css"||i==="scss"||i==="less"?new Worker(new URL("/tools/assets/css.worker-B4z49cGk.js",import.meta.url),{type:"module"}):i==="html"||i==="handlebars"||i==="razor"?new Worker(new URL("/tools/assets/html.worker-DtiGdgqp.js",import.meta.url),{type:"module"}):i==="typescript"||i==="javascript"?new Worker(new URL("/tools/assets/ts.worker-59MjiAqk.js",import.meta.url),{type:"module"}):new Worker(new URL("/tools/assets/editor.worker-DyuDvpVp.js",import.meta.url),{type:"module"})}});const o=v,n=u,d=g(null);let t=null,a=null,r=null;const b=()=>{d.value&&(t=h.createDiffEditor(d.value,{theme:o.theme,readOnly:o.readOnly,originalEditable:!0,automaticLayout:!0,renderSideBySide:o.renderSideBySide,wordWrap:"on",scrollBeyondLastLine:!1,padding:{top:12,bottom:12},fontFamily:"'JetBrains Mono', 'Fira Code', Consolas, monospace",fontLigatures:!0}),a=h.createModel(o.original,o.language),r=h.createModel(o.modified,o.language),t.setModel({original:a,modified:r}),a.onDidChangeContent(()=>{n("update:original",a.getValue())}),r.onDidChangeContent(()=>{n("update:modified",r.getValue())}),n("ready",t))};return x(()=>o.original,s=>{a&&a.getValue()!==s&&a.setValue(s)}),x(()=>o.modified,s=>{r&&r.getValue()!==s&&r.setValue(s)}),x(()=>o.language,s=>{a&&r&&(h.setModelLanguage(a,s),h.setModelLanguage(r,s))}),x(()=>o.theme,s=>{h.setTheme(s)}),x(()=>o.renderSideBySide,s=>{t&&(t.updateOptions({renderSideBySide:s,wordWrap:"on",wordWrapOverride1:"on",wordWrapOverride2:"on"}),t.layout())}),C(()=>{j(()=>{b()})}),B(()=>{t&&t.dispose(),a&&a.dispose(),r&&r.dispose()}),(s,i)=>(w(),y("div",{ref_key:"containerRef",ref:d,class:"w-full h-full rounded-lg overflow-hidden"},null,512))}},N={__name:"MonacoEditor",props:{modelValue:{type:String,default:""},language:{type:String,default:"plaintext"},theme:{type:String,default:"vs-dark"},readOnly:{type:Boolean,default:!1},height:{type:String,default:"100%"},minimap:{type:Boolean,default:!1},wordWrap:{type:String,default:"on"}},emits:["update:modelValue","ready"],setup(v,{emit:u}){const o=v,n=u,d=g(null);let t=null;const a=()=>{d.value&&(t=h.create(d.value,{value:o.modelValue,language:o.language,theme:o.theme,readOnly:o.readOnly,automaticLayout:!0,minimap:{enabled:o.minimap},wordWrap:o.wordWrap,scrollBeyondLastLine:!1,padding:{top:12,bottom:12},fontFamily:"'JetBrains Mono', 'Fira Code', Consolas, Monaco, 'Courier New', monospace",fontLigatures:!0}),t.onDidChangeModelContent(()=>{n("update:modelValue",t.getValue())}),n("ready",t))};return x(()=>o.modelValue,r=>{t&&t.getValue()!==r&&t.setValue(r)}),x(()=>o.language,r=>{t&&h.setModelLanguage(t.getModel(),r)}),C(()=>{j(()=>{a()})}),B(()=>{t&&t.dispose()}),(r,b)=>(w(),y("div",{ref_key:"containerRef",ref:d,class:"w-full",style:T({height:v.height})},null,4))}};function $(v,u){const o=v.split(/\r?\n/),n=u.split(/\r?\n/),d=Array(o.length+1).fill(null).map(()=>Array(n.length+1).fill(0));for(let s=1;s<=o.length;s++)for(let i=1;i<=n.length;i++)o[s-1]===n[i-1]?d[s][i]=d[s-1][i-1]+1:d[s][i]=Math.max(d[s-1][i],d[s][i-1]);let t=o.length,a=n.length;const r=[];for(;t>0||a>0;)t>0&&a>0&&o[t-1]===n[a-1]?(r.unshift("  "+o[t-1]),t--,a--):a>0&&(t===0||d[t][a-1]>=d[t-1][a])?(r.unshift("+ "+n[a-1]),a--):t>0&&(a===0||d[t][a-1]<d[t-1][a])&&(r.unshift("- "+o[t-1]),t--);return["--- Original","+++ Modified","@@ -1,"+o.length+" +1,"+n.length+" @@"].concat(r).join(`
`)}const q={class:"flex flex-col h-[calc(100vh-140px)] p-4 max-w-7xl mx-auto w-full gap-4 relative"},J={key:0,class:"absolute top-4 left-1/2 -translate-x-1/2 z-50 px-4 py-2 bg-slate-800 text-white rounded-lg shadow-lg text-sm font-medium border border-slate-700"},G={class:"bg-white dark:bg-slate-800 p-3 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col md:flex-row items-center justify-between gap-4"},P={class:"flex items-center gap-4 flex-wrap w-full md:w-auto"},I={class:"flex items-center gap-2"},K={class:"font-bold text-slate-700 dark:text-slate-200 hidden md:inline"},Q=["value"],X={class:"flex bg-slate-100 dark:bg-slate-900 rounded-lg p-1 border border-slate-200 dark:border-slate-700"},Y={class:"flex items-center gap-2"},Z={class:"flex-1 min-h-0 flex flex-col gap-4"},ee={class:"flex-1 min-h-[300px] bg-slate-900 rounded-xl overflow-hidden border border-slate-700 shadow-2xl relative"},te={class:"h-64 bg-slate-900 rounded-xl overflow-hidden border border-slate-700 flex flex-col"},oe={class:"flex-1 overflow-hidden relative"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},se={class:"bg-gradient-to-br from-violet-50 to-fuchsia-50 dark:from-slate-800 dark:to-slate-800/50 p-4 rounded-xl border border-violet-100 dark:border-slate-700"},le={class:"font-bold text-slate-800 dark:text-slate-200 mb-2 flex items-center gap-2"},re={class:"text-sm text-slate-600 dark:text-slate-400 leading-relaxed"},ie={class:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700"},ne={class:"font-bold text-slate-800 dark:text-slate-200 mb-2"},de={class:"space-y-2 text-sm text-slate-600 dark:text-slate-400"},ue={class:"flex items-start gap-2"},fe={class:"flex items-start gap-2"},me={__name:"index",setup(v){const{t:u}=D(),o=g(`// Original Function
function add(a, b) {
    return a + b;
}`),n=g(`// Modified Function
function add(a, b) {
    console.log("Adding numbers");
    return a + b;
}`),d=g("javascript"),t=g(!0),a=[{id:"javascript",label:"JavaScript"},{id:"typescript",label:"TypeScript"},{id:"json",label:"JSON"},{id:"html",label:"HTML"},{id:"css",label:"CSS"},{id:"python",label:"Python"},{id:"markdown",label:"Markdown"},{id:"plaintext",label:"Plain Text"}],r=O(()=>$(o.value,n.value)),b=()=>{o.value="",n.value=""},s=g(!1),i=g(""),V=async()=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(r.value);else{const c=document.createElement("textarea");c.value=r.value,c.style.position="absolute",c.style.left="-9999px",document.body.appendChild(c),c.select(),document.execCommand("copy"),document.body.removeChild(c)}M("Unified Diff copied!")}catch{M("Failed to copy",!0)}},M=(c,l=!1)=>{i.value=c,s.value=!0,setTimeout(()=>{s.value=!1},2e3)},L=()=>{const c=o.value;o.value=n.value,n.value=c};return(c,l)=>(w(),y("div",q,[_(E,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"transform opacity-0 translate-y-2","enter-to-class":"transform opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"transform opacity-100 translate-y-0","leave-to-class":"transform opacity-0 translate-y-2"},{default:W(()=>[s.value?(w(),y("div",J,f(i.value),1)):z("",!0)]),_:1}),e("div",G,[e("div",P,[e("div",I,[l[5]||(l[5]=e("svg",{class:"w-5 h-5 text-fuchsia-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})],-1)),e("span",K,f(m(u)("tools.diff-viewer.title")),1)]),U(e("select",{"onUpdate:modelValue":l[0]||(l[0]=p=>d.value=p),class:"bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-fuchsia-500 outline-none"},[(w(),y(F,null,A(a,p=>e("option",{key:p.id,value:p.id},f(p.label),9,Q)),64))],512),[[R,d.value]]),e("div",X,[e("button",{onClick:l[1]||(l[1]=p=>t.value=!1),class:S(["px-3 py-1 text-sm rounded transition-all",t.value?"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300":"bg-white dark:bg-slate-700 shadow text-fuchsia-600 dark:text-fuchsia-400 font-medium"])},f(m(u)("tools.diff-viewer.controls.inline")),3),e("button",{onClick:l[2]||(l[2]=p=>t.value=!0),class:S(["px-3 py-1 text-sm rounded transition-all",t.value?"bg-white dark:bg-slate-700 shadow text-fuchsia-600 dark:text-fuchsia-400 font-medium":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"])},f(m(u)("tools.diff-viewer.controls.split")),3)])]),e("div",Y,[e("button",{onClick:L,class:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors border border-transparent hover:border-slate-200 dark:hover:border-slate-600"},[l[6]||(l[6]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)),k(" "+f(m(u)("tools.diff-viewer.controls.swap")),1)]),e("button",{onClick:b,class:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors border border-transparent hover:border-slate-200 dark:hover:border-slate-600"},[l[7]||(l[7]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),k(" "+f(m(u)("tools.diff-viewer.controls.clear")),1)]),e("button",{onClick:V,class:"flex items-center gap-2 px-4 py-1.5 bg-fuchsia-600 hover:bg-fuchsia-500 text-white rounded-lg font-medium text-sm transition-colors shadow-lg shadow-fuchsia-500/20 active:scale-95"},[l[8]||(l[8]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})],-1)),k(" "+f(m(u)("tools.diff-viewer.controls.copy")),1)])])]),e("div",Z,[e("div",ee,[_(H,{original:o.value,modified:n.value,language:d.value,renderSideBySide:t.value,theme:"vs-dark","onUpdate:original":l[3]||(l[3]=p=>o.value=p),"onUpdate:modified":l[4]||(l[4]=p=>n.value=p)},null,8,["original","modified","language","renderSideBySide"])]),e("div",te,[l[9]||(l[9]=e("div",{class:"px-4 py-2 bg-slate-800 border-b border-slate-700 text-xs font-bold text-slate-400 uppercase tracking-wider flex justify-between items-center"},[e("span",null,"Unified Diff Result")],-1)),e("div",oe,[_(N,{modelValue:r.value,language:"diff",theme:"vs-dark",readOnly:"",minimap:!1,height:"100%"},null,8,["modelValue"])])])]),e("div",ae,[e("div",se,[e("h3",le,[l[10]||(l[10]=e("svg",{class:"w-5 h-5 text-fuchsia-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),k(" "+f(m(u)("tools.diff-viewer.info.what_is_diff")),1)]),e("p",re,f(m(u)("tools.diff-viewer.info.what_is_diff_desc")),1)]),e("div",ie,[e("h3",ne,f(m(u)("tools.diff-viewer.info.types")),1),e("ul",de,[e("li",ue,[l[11]||(l[11]=e("span",{class:"inline-block w-4 h-4 rounded bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 flex-shrink-0 flex items-center justify-center text-xs font-bold"},"+",-1)),e("span",null,f(m(u)("tools.diff-viewer.info.unified")),1)]),e("li",fe,[l[12]||(l[12]=e("span",{class:"inline-block w-4 h-4 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex-shrink-0 flex items-center justify-center text-xs font-bold"},"||",-1)),e("span",null,f(m(u)("tools.diff-viewer.info.split")),1)])])])])]))}};export{me as default};
