import{r as g,l as v,o as B,C as L,a as T,c as w,j as y,u as D,k as U,b as M,d as e,p as V,T as E,h as F,t as f,e as m,q as R,F as O,f as H,n as S,i as k,g as W}from"./index-Dq4fYJG6.js";import{e as x}from"./monaco-editor-CIrctJzJ.js";const z={__name:"MonacoDiffEditor",props:{original:{type:String,default:""},modified:{type:String,default:""},language:{type:String,default:"plaintext"},theme:{type:String,default:"vs-dark"},renderSideBySide:{type:Boolean,default:!0},readOnly:{type:Boolean,default:!1}},emits:["update:original","update:modified","ready"],setup(h,{emit:u}){self.MonacoEnvironment||(self.MonacoEnvironment={getWorker(s,l){return l==="json"?new Worker(new URL("/tools/assets/json.worker-B7c_PmGb.js",import.meta.url),{type:"module"}):l==="css"||l==="scss"||l==="less"?new Worker(new URL("/tools/assets/css.worker-DaIe3gwK.js",import.meta.url),{type:"module"}):l==="html"||l==="handlebars"||l==="razor"?new Worker(new URL("/tools/assets/html.worker-CKrFyw_2.js",import.meta.url),{type:"module"}):l==="typescript"||l==="javascript"?new Worker(new URL("/tools/assets/ts.worker-BhkL8olL.js",import.meta.url),{type:"module"}):new Worker(new URL("/tools/assets/editor.worker-BCzxt1at.js",import.meta.url),{type:"module"})}});const t=h,n=u,d=g(null);let o=null,r=null,i=null;const b=()=>{d.value&&(o=x.createDiffEditor(d.value,{theme:t.theme,readOnly:t.readOnly,automaticLayout:!0,renderSideBySide:t.renderSideBySide,scrollBeyondLastLine:!1,padding:{top:12,bottom:12},fontFamily:"'JetBrains Mono', 'Fira Code', Consolas, monospace",fontLigatures:!0}),r=x.createModel(t.original,t.language),i=x.createModel(t.modified,t.language),o.setModel({original:r,modified:i}),r.onDidChangeContent(()=>{n("update:original",r.getValue())}),i.onDidChangeContent(()=>{n("update:modified",i.getValue())}),n("ready",o))};return v(()=>t.original,s=>{r&&r.getValue()!==s&&r.setValue(s)}),v(()=>t.modified,s=>{i&&i.getValue()!==s&&i.setValue(s)}),v(()=>t.language,s=>{r&&i&&(x.setModelLanguage(r,s),x.setModelLanguage(i,s))}),v(()=>t.theme,s=>{x.setTheme(s)}),v(()=>t.renderSideBySide,s=>{o&&o.updateOptions({renderSideBySide:s})}),B(()=>{L(()=>{b()})}),T(()=>{o&&o.dispose(),r&&r.dispose(),i&&i.dispose()}),(s,l)=>(y(),w("div",{ref_key:"containerRef",ref:d,class:"w-full h-full rounded-lg overflow-hidden"},null,512))}};function A(h,u){const t=h.split(/\r?\n/),n=u.split(/\r?\n/),d=Array(t.length+1).fill(null).map(()=>Array(n.length+1).fill(0));for(let s=1;s<=t.length;s++)for(let l=1;l<=n.length;l++)t[s-1]===n[l-1]?d[s][l]=d[s-1][l-1]+1:d[s][l]=Math.max(d[s-1][l],d[s][l-1]);let o=t.length,r=n.length;const i=[];for(;o>0||r>0;)o>0&&r>0&&t[o-1]===n[r-1]?(i.unshift("  "+t[o-1]),o--,r--):r>0&&(o===0||d[o][r-1]>=d[o-1][r])?(i.unshift("+ "+n[r-1]),r--):o>0&&(r===0||d[o][r-1]<d[o-1][r])&&(i.unshift("- "+t[o-1]),o--);return["--- Original","+++ Modified","@@ -1,"+t.length+" +1,"+n.length+" @@"].concat(i).join(`
`)}const N={class:"flex flex-col h-[calc(100vh-140px)] p-4 max-w-7xl mx-auto w-full gap-4 relative"},J={key:0,class:"absolute top-4 left-1/2 -translate-x-1/2 z-50 px-4 py-2 bg-slate-800 text-white rounded-lg shadow-lg text-sm font-medium border border-slate-700"},P={class:"bg-white dark:bg-slate-800 p-3 rounded-xl shadow-sm border border-slate-200 dark:border-slate-700 flex flex-col md:flex-row items-center justify-between gap-4"},$={class:"flex items-center gap-4 flex-wrap w-full md:w-auto"},I={class:"flex items-center gap-2"},K={class:"font-bold text-slate-700 dark:text-slate-200 hidden md:inline"},q=["value"],G={class:"flex bg-slate-100 dark:bg-slate-900 rounded-lg p-1 border border-slate-200 dark:border-slate-700"},Q={class:"flex items-center gap-2"},X={class:"flex-1 min-h-0 flex flex-col gap-4"},Y={class:"flex-1 min-h-[300px] bg-slate-900 rounded-xl overflow-hidden border border-slate-700 shadow-2xl relative"},Z={class:"h-64 bg-slate-900 rounded-xl overflow-hidden border border-slate-700 flex flex-col"},ee={class:"flex-1 overflow-auto p-4 custom-scrollbar"},te={class:"font-mono text-xs md:text-sm text-slate-300 whitespace-pre"},oe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},se={class:"bg-gradient-to-br from-violet-50 to-fuchsia-50 dark:from-slate-800 dark:to-slate-800/50 p-4 rounded-xl border border-violet-100 dark:border-slate-700"},ae={class:"font-bold text-slate-800 dark:text-slate-200 mb-2 flex items-center gap-2"},re={class:"text-sm text-slate-600 dark:text-slate-400 leading-relaxed"},le={class:"bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-200 dark:border-slate-700"},ie={class:"font-bold text-slate-800 dark:text-slate-200 mb-2"},ne={class:"space-y-2 text-sm text-slate-600 dark:text-slate-400"},de={class:"flex items-start gap-2"},ue={class:"flex items-start gap-2"},pe={__name:"index",setup(h){const{t:u}=D(),t=g(`// Original Function
function add(a, b) {
    return a + b;
}`),n=g(`// Modified Function
function add(a, b) {
    console.log("Adding numbers");
    return a + b;
}`),d=g("javascript"),o=g(!0),r=[{id:"javascript",label:"JavaScript"},{id:"typescript",label:"TypeScript"},{id:"json",label:"JSON"},{id:"html",label:"HTML"},{id:"css",label:"CSS"},{id:"python",label:"Python"},{id:"markdown",label:"Markdown"},{id:"plaintext",label:"Plain Text"}],i=U(()=>A(t.value,n.value)),b=()=>{t.value="",n.value=""},s=g(!1),l=g(""),C=async()=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(i.value);else{const c=document.createElement("textarea");c.value=i.value,c.style.position="absolute",c.style.left="-9999px",document.body.appendChild(c),c.select(),document.execCommand("copy"),document.body.removeChild(c)}_("Unified Diff copied!")}catch{_("Failed to copy",!0)}},_=(c,a=!1)=>{l.value=c,s.value=!0,setTimeout(()=>{s.value=!1},2e3)},j=()=>{const c=t.value;t.value=n.value,n.value=c};return(c,a)=>(y(),w("div",N,[M(E,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"transform opacity-0 translate-y-2","enter-to-class":"transform opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"transform opacity-100 translate-y-0","leave-to-class":"transform opacity-0 translate-y-2"},{default:V(()=>[s.value?(y(),w("div",J,f(l.value),1)):W("",!0)]),_:1}),e("div",P,[e("div",$,[e("div",I,[a[5]||(a[5]=e("svg",{class:"w-5 h-5 text-fuchsia-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})],-1)),e("span",K,f(m(u)("tools.diff-viewer.title")),1)]),F(e("select",{"onUpdate:modelValue":a[0]||(a[0]=p=>d.value=p),class:"bg-slate-50 dark:bg-slate-900 border border-slate-300 dark:border-slate-600 rounded-lg px-3 py-1.5 text-sm focus:ring-2 focus:ring-fuchsia-500 outline-none"},[(y(),w(O,null,H(r,p=>e("option",{key:p.id,value:p.id},f(p.label),9,q)),64))],512),[[R,d.value]]),e("div",G,[e("button",{onClick:a[1]||(a[1]=p=>o.value=!1),class:S(["px-3 py-1 text-sm rounded transition-all",o.value?"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300":"bg-white dark:bg-slate-700 shadow text-fuchsia-600 dark:text-fuchsia-400 font-medium"])},f(m(u)("tools.diff-viewer.controls.inline")),3),e("button",{onClick:a[2]||(a[2]=p=>o.value=!0),class:S(["px-3 py-1 text-sm rounded transition-all",o.value?"bg-white dark:bg-slate-700 shadow text-fuchsia-600 dark:text-fuchsia-400 font-medium":"text-slate-500 hover:text-slate-700 dark:hover:text-slate-300"])},f(m(u)("tools.diff-viewer.controls.split")),3)])]),e("div",Q,[e("button",{onClick:j,class:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors border border-transparent hover:border-slate-200 dark:hover:border-slate-600"},[a[6]||(a[6]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1)),k(" "+f(m(u)("tools.diff-viewer.controls.swap")),1)]),e("button",{onClick:b,class:"flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors border border-transparent hover:border-slate-200 dark:hover:border-slate-600"},[a[7]||(a[7]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),k(" "+f(m(u)("tools.diff-viewer.controls.clear")),1)]),e("button",{onClick:C,class:"flex items-center gap-2 px-4 py-1.5 bg-fuchsia-600 hover:bg-fuchsia-500 text-white rounded-lg font-medium text-sm transition-colors shadow-lg shadow-fuchsia-500/20 active:scale-95"},[a[8]||(a[8]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})],-1)),k(" "+f(m(u)("tools.diff-viewer.controls.copy")),1)])])]),e("div",X,[e("div",Y,[M(z,{original:t.value,modified:n.value,language:d.value,renderSideBySide:o.value,theme:"vs-dark","onUpdate:original":a[3]||(a[3]=p=>t.value=p),"onUpdate:modified":a[4]||(a[4]=p=>n.value=p)},null,8,["original","modified","language","renderSideBySide"])]),e("div",Z,[a[9]||(a[9]=e("div",{class:"px-4 py-2 bg-slate-800 border-b border-slate-700 text-xs font-bold text-slate-400 uppercase tracking-wider flex justify-between items-center"},[e("span",null,"Unified Diff Result")],-1)),e("div",ee,[e("pre",te,f(i.value),1)])])]),e("div",oe,[e("div",se,[e("h3",ae,[a[10]||(a[10]=e("svg",{class:"w-5 h-5 text-fuchsia-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),k(" "+f(m(u)("tools.diff-viewer.info.what_is_diff")),1)]),e("p",re,f(m(u)("tools.diff-viewer.info.what_is_diff_desc")),1)]),e("div",le,[e("h3",ie,f(m(u)("tools.diff-viewer.info.types")),1),e("ul",ne,[e("li",de,[a[11]||(a[11]=e("span",{class:"inline-block w-4 h-4 rounded bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 flex-shrink-0 flex items-center justify-center text-xs font-bold"},"+",-1)),e("span",null,f(m(u)("tools.diff-viewer.info.unified")),1)]),e("li",ue,[a[12]||(a[12]=e("span",{class:"inline-block w-4 h-4 rounded bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 flex-shrink-0 flex items-center justify-center text-xs font-bold"},"||",-1)),e("span",null,f(m(u)("tools.diff-viewer.info.split")),1)])])])])]))}};export{pe as default};
