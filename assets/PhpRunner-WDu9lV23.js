import{_ as j}from"./monaco-editor-CGO6wXTd.js";import{u as L,r as u,c as l,j as n,d as e,g,t as c,e as f,b as A,F as V,f as E,n as H}from"./index-CroKb6bU.js";import B from"./MonacoEditor-C2fe0tjm.js";const S={class:"flex flex-col md:flex-row h-full"},z={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col border-b md:border-b-0 md:border-r border-slate-700"},F={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700 bg-slate-800/50"},M={class:"flex items-center gap-2"},W={key:0,class:"text-xs px-2 py-0.5 bg-emerald-600 text-white rounded-full"},T=["disabled"],N={class:"flex-1 min-h-0"},O={class:"w-full md:w-1/2 h-1/2 md:h-full flex flex-col bg-slate-900"},R={class:"flex items-center justify-between px-4 py-3 border-b border-slate-700"},q={class:"flex items-center gap-3"},D={class:"text-xs font-bold text-slate-400 uppercase tracking-wider"},I={key:0,class:"text-xs text-slate-500"},U={key:0,class:"flex-1 flex items-center justify-center"},G={class:"text-center space-y-4"},J={class:"text-slate-400"},K={key:1,class:"flex-1 overflow-y-auto p-4 font-mono text-sm space-y-1"},Q={key:0,class:"text-red-400"},X={key:1,class:"text-slate-500"},Y={key:2,class:"text-blue-400"},Z={class:"whitespace-pre-wrap"},ae={__name:"PhpRunner",emits:["output","error","ready"],setup(ee,{emit:b}){const{t:h}=L(),w=b,v=u(`<?php
$version = phpversion();
echo "Hello from PHP $version!\\n";

// Array example
$fruits = ["Apple", "Banana", "Cherry"];
echo "Fruits:\\n";
foreach ($fruits as $fruit) {
    echo "- $fruit\\n";
}

// Math
echo "\\nSqrt(16) = " . sqrt(16) . "\\n";
?>`),i=u([]),p=u(!1),_=u(!1),x=u(""),m=u(null);let d=null;const P=async()=>{if(d)return d;console.log("Loading PHP runtime..."),p.value=!0,x.value="Loading PHP runtime...";try{const t="/tools/",s=`${t.endsWith("/")?t:t+"/"}php-wasm/`,{PhpWeb:a}=await j(async()=>{const{PhpWeb:o}=await import(`${s}PhpWeb.mjs`);return{PhpWeb:o}},[]);return d=new a,d.addEventListener("output",o=>{const r=o.detail,y=Array.isArray(r)?r.join(""):String(r);i.value.push({type:"log",message:y})}),d.addEventListener("error",o=>{const r=o.detail,y=Array.isArray(r)?r.join(""):String(r);i.value.push({type:"error",message:y})}),new Promise((o,r)=>{d.addEventListener("ready",()=>{_.value=!0,w("ready"),o(d)})})}catch(t){return i.value.push({type:"error",message:`Failed to load PHP: ${t.message}`}),Promise.reject(t)}finally{p.value=!1,x.value=""}},k=async()=>{i.value=[],m.value=null;try{const t=await P(),s=performance.now();let a=v.value;const o=await t.run(a),r=performance.now();m.value=(r-s).toFixed(2),i.value.push({type:"info",message:`Program exited with code ${o}`})}catch(t){i.value.push({type:"error",message:t.message})}},C=()=>{i.value=[],m.value=null},$=t=>t==="error"?"text-red-400":t==="info"?"text-slate-500 italic":"text-blue-400";return(t,s)=>(n(),l("div",S,[e("div",z,[e("div",F,[e("div",M,[s[1]||(s[1]=e("svg",{class:"w-5 h-5 text-indigo-400",viewBox:"0 0 24 24",fill:"currentColor"},[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.5 15h-9v-2h9v2zm0-4h-9V9h9v4z"}),e("path",{d:"M7 9h10v4H7z",opacity:".3"})],-1)),s[2]||(s[2]=e("span",{class:"font-bold text-white"},"PHP (WASM)",-1)),_.value?(n(),l("span",W,c(f(h)("tools.code-playground.common.ready")),1)):g("",!0)]),e("button",{onClick:k,disabled:p.value,class:"px-4 py-1.5 rounded-lg font-medium text-sm transition-colors flex items-center gap-2 bg-emerald-600 hover:bg-emerald-500 text-white disabled:bg-slate-600 disabled:text-slate-400"},c(p.value?"Loading...":f(h)("tools.code-playground.common.run")),9,T)]),e("div",N,[A(B,{modelValue:v.value,"onUpdate:modelValue":s[0]||(s[0]=a=>v.value=a),language:"php",theme:"vs-dark",height:"100%"},null,8,["modelValue"])])]),e("div",O,[e("div",R,[e("div",q,[e("span",D,c(f(h)("tools.code-playground.common.output")),1),m.value?(n(),l("span",I,c(m.value)+"ms",1)):g("",!0)]),e("button",{onClick:C,class:"text-xs text-slate-500 hover:text-white"},c(f(h)("tools.code-playground.common.clear")),1)]),p.value?(n(),l("div",U,[e("div",G,[s[3]||(s[3]=e("div",{class:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto"},null,-1)),e("div",J,c(x.value),1)])])):(n(),l("div",K,[(n(!0),l(V,null,E(i.value,(a,o)=>(n(),l("div",{key:o,class:H(["flex items-start gap-2",$(a.type)])},[a.type==="error"?(n(),l("span",Q,"✗")):a.type==="info"?(n(),l("span",X,"ℹ")):(n(),l("span",Y,"›")),e("span",Z,c(a.message),1)],2))),128))]))])]))}};export{ae as default};
